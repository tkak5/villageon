{"ast":null,"code":"var _jsxFileName = \"/Users/tkak/sample/villageon/villageon/pages/user/[id].js\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport Layout, { phoneNumber, url } from '../../components/layout';\nimport Head from 'next/head';\nimport styles from '../../styles/user.module.scss';\nimport { useState, useEffect } from 'react';\nimport AnimateHeight from 'react-animate-height';\nimport Router from 'next/router';\nimport Link from 'next/link';\nimport { getSortedPostsData } from '../../lib/posts';\nimport initFirebase from '../../components/initFirebase';\nimport firebase from \"firebase/app\";\nimport 'firebase/auth';\n\nrequire('firebase/auth');\n\nrequire(\"firebase/firestore\");\n\ninitFirebase();\nvar db = firebase.firestore();\nvar getOptions = {\n  source: 'cache'\n};\nexport async function getStaticPaths() {\n  const ids = await db.collection('users').get().then(function (querySnapshot) {\n    var ids = [];\n    querySnapshot.docs.forEach(doc => {\n      ids.push(doc.id);\n    });\n    return ids;\n  });\n  const paths = ids.map(id => {\n    return {\n      params: {\n        id: id\n      }\n    };\n  });\n  return {\n    paths,\n    fallback: false\n  };\n}\nexport async function getStaticProps({\n  params\n}) {\n  const allPostsData = await db.collection('events').orderBy(\"date\").get().then(function (querySnapshot) {\n    var datas = [];\n    querySnapshot.docs.forEach(doc => {\n      datas.push(doc.data());\n    });\n    return datas;\n  });\n  const userInfo = await db.collection('users').doc(params.id).get().then(function (doc) {\n    if (doc.exists) {\n      return doc.data();\n    }\n  });\n  return {\n    props: {\n      allPostsData,\n      userInfo\n    }\n  };\n}\nexport default function details({\n  allPostsData,\n  userInfo\n}) {\n  const {\n    0: user,\n    1: setUser\n  } = useState(\"\");\n  const {\n    0: verifyMessage,\n    1: setVerifyMessage\n  } = useState(\"認証メールを送る\");\n  const {\n    0: toggleId,\n    1: setToggleId\n  } = useState(\"\"); //name\n\n  const {\n    0: nameError,\n    1: setNameError\n  } = useState(\"\");\n  const {\n    0: newFirst,\n    1: setNewFirst\n  } = useState(\"\");\n  const {\n    0: newLast,\n    1: setNewLast\n  } = useState(\"\"); //mail\n\n  const {\n    0: newMail,\n    1: setNewMail\n  } = useState(\"\");\n  const {\n    0: mailError,\n    1: setMailError\n  } = useState(\"\");\n  const {\n    0: reAuth,\n    1: setReAuth\n  } = useState(false); //password\n\n  const {\n    0: password,\n    1: setPassword\n  } = useState(\"\");\n  const {\n    0: newPassword,\n    1: setNewPassword\n  } = useState(\"\");\n  const {\n    0: passwordError,\n    1: setPasswordError\n  } = useState(\"\");\n  const {\n    0: newPasswordError,\n    1: setNewPasswordError\n  } = useState(\"\");\n  const {\n    0: passwordToggle,\n    1: setPasswordToggle\n  } = useState(true);\n  const {\n    0: newPasswordToggle,\n    1: setNewPasswordToggle\n  } = useState(true); //database\n\n  const {\n    0: admin,\n    1: setAdmin\n  } = useState(false);\n  const {\n    0: events,\n    1: setEvents\n  } = useState([]); //useEffect\n\n  const {\n    0: mount,\n    1: setMount\n  } = useState(true); //cancel\n\n  const {\n    0: cancelId,\n    1: setCancelId\n  } = useState(\"\");\n  const {\n    0: canceledId,\n    1: setCanceledId\n  } = useState([]);\n  const {\n    0: cancelErrorId,\n    1: setCancelErrorId\n  } = useState([]); //admin\n\n  const {\n    0: mensName,\n    1: setMensName\n  } = useState({});\n  const {\n    0: womensName,\n    1: setWomensName\n  } = useState({});\n  const {\n    0: mensEmail,\n    1: setMensEmail\n  } = useState({});\n  const {\n    0: womensEmail,\n    1: setWomensEmail\n  } = useState({});\n  const {\n    0: eventId,\n    1: setEventId\n  } = useState(\"\");\n  const {\n    0: eventMensName,\n    1: setEventMensName\n  } = useState([]);\n  const {\n    0: eventMensMail,\n    1: setEventMensMail\n  } = useState([]);\n  const {\n    0: eventWomensName,\n    1: setEventWomensName\n  } = useState([]);\n  const {\n    0: eventWomensMail,\n    1: setEventWomensMail\n  } = useState([]);\n  useEffect(() => {\n    if (mount) {\n      firebase.auth().onAuthStateChanged(function (user) {\n        if (user) {\n          // User is signed in.\n          setUser(user);\n        } else {\n          if (false) {\n            Router.push(\"/\");\n          } // No user is signed in.\n\n        }\n      });\n\n      if (user) {\n        db.collection(\"users\").doc(user.uid).get().then(function (doc) {\n          if (doc.exists) {\n            setEvents(doc.data().events);\n            setAdmin(doc.data().admin);\n\n            if (admin) {\n              var mensName = {};\n              const womensName = {};\n              const mensEmail = {};\n              const womensEmail = {};\n              db.collection('events').get().then(function (querySnapshot) {\n                querySnapshot.docs.forEach(doc => {\n                  const nameForMens = [];\n                  const emailForMens = [];\n                  doc.data().mens.forEach(man => {\n                    nameForMens.push(man.name);\n                    emailForMens.push(man.mail);\n                  });\n                  const nameForWomens = [];\n                  const emailForWomens = [];\n                  doc.data().womens.forEach(woman => {\n                    nameForWomens.push(woman.name);\n                    emailForWomens.push(woman.mail);\n                  });\n                  mensName[doc.id] = nameForMens;\n                  mensEmail[doc.id] = emailForMens;\n                  womensName[doc.id] = nameForWomens;\n                  womensEmail[doc.id] = emailForWomens;\n                });\n                setMensName(mensName);\n                setMensEmail(mensEmail);\n                setWomensName(womensName);\n                setWomensEmail(womensEmail);\n              });\n            }\n\n            setMount(false);\n          } else {}\n        });\n      }\n    }\n  });\n  useEffect(() => {\n    if (user) {\n      db.collection(\"users\").doc(user.uid).get().then(function (doc) {\n        if (doc.exists) {\n          setEvents(doc.data().events);\n        }\n      });\n    }\n  }, [canceledId]);\n\n  const changeFirst = event => {\n    setNewFirst(event.target.value);\n  };\n\n  const changeLast = event => {\n    setNewLast(event.target.value);\n  }; //change displayname to newer\n\n\n  const submitName = event => {\n    if (newLast && newFirst) {\n      user.updateProfile({\n        displayName: `${newLast} ${newFirst}`\n      }).then(function () {\n        setToggleId(\"\");\n        setNewFirst(\"\");\n        setNewLast(\"\");\n      }).catch(function (error) {\n        setNameError(error.message);\n      });\n    } else {\n      setNameError(\"入力してください\");\n    }\n  }; //change email to newer\n\n\n  const submitMail = () => {\n    user.updateEmail(newMail).then(function () {\n      setToggleId(\"\");\n      setNewMail(\"\");\n      setMailError(\"\");\n    }).catch(function (error) {\n      if (error.code == \"auth/invalid-email\") {\n        setMailError(\"メールアドレスの形式が正しくないです\");\n      } else if (error.code == \"auth/email-already-in-use\") {\n        setMailError(\"既に使われています\");\n      } else if (error.code == \"auth/requires-recent-login\") {\n        setReAuth(true);\n      }\n    });\n  };\n\n  const submitMailAfterReAuth = () => {\n    var cred = firebase.auth.EmailAuthProvider.credential(user.email, password);\n    user.reauthenticateWithCredential(cred).then(function () {\n      submitMail();\n      setPasswordError(\"\");\n      setToggleId(\"\");\n      setReAuth(false);\n    }).catch(function (error) {\n      if (error.code == \"auth/wrong-password\") {\n        setPasswordError(\"パスワードが違います\");\n      } else {\n        setPasswordError(error.message);\n      }\n    });\n  };\n\n  const changeMail = event => {\n    var mail = event.target.value;\n    setNewMail(mail);\n  }; //change password to newer\n\n\n  const submitPasswordAfterReAuth = () => {\n    var cred = firebase.auth.EmailAuthProvider.credential(user.email, password);\n    user.reauthenticateWithCredential(cred).then(function () {\n      setPasswordError(\"\");\n      submitPassword();\n    }).catch(function (error) {\n      if (error.code == \"auth/wrong-password\") {\n        setPasswordError(\"パスワードが違います\");\n      } else {\n        setPasswordError(error.message);\n      }\n    });\n  };\n\n  const submitPassword = () => {\n    user.updatePassword(newPassword).then(function () {\n      setPassword(\"\");\n      setPasswordError(\"\");\n      setToggleId(\"\");\n      setReAuth(false);\n    }).catch(function (error) {\n      if (error.code == \"auth/weak-password\") {\n        setNewPasswordError(\"6文字以上で設定してください\");\n      } else {\n        setNewPasswordError(error.message);\n      }\n    });\n  }; //switch password display or none\n\n\n  const togglePassword = () => {\n    setPasswordToggle(!passwordToggle);\n  }; //switch newpassword display or none\n\n\n  const toggleNewPassword = () => {\n    setNewPasswordToggle(!newPasswordToggle);\n  };\n\n  const changePassword = event => {\n    var pass = event.target.value;\n    setPassword(pass);\n  };\n\n  const changeNewPassword = event => {\n    var pass = event.target.value;\n    setNewPassword(pass);\n  }; //send verification for mail\n\n\n  const submitVerification = () => {\n    var actionCodeSettings = {\n      url: `${url}/user/details`\n    };\n    user.sendEmailVerification(actionCodeSettings).then(function () {\n      setVerifyMessage(\"認証メールを送信しました。\");\n    }).catch(function (error) {\n      setVerifyMessage(error.code);\n    });\n  }; //signout\n\n\n  const handleSignOut = () => {\n    firebase.auth().signOut().then(function () {\n      Router.replace(\"/\");\n    }).catch(function (error) {// An error happened.\n    });\n  }; //reauthentication\n  //damy\n\n\n  const handleNone = () => {}; // toggle setting id\n\n\n  const changeId = event => {\n    var newId = event.target.id;\n\n    if (newId == toggleId) {\n      setToggleId(\"\");\n    } else {\n      setToggleId(newId);\n    }\n  }; //delete account\n\n\n  const submitDelete = () => {\n    var cred = firebase.auth.EmailAuthProvider.credential(user.email, password);\n    user.reauthenticateWithCredential(cred).then(function () {\n      setPasswordError(\"\");\n      db.collection(\"users\").doc(user.uid).delete().then(function () {\n        user.delete();\n      });\n    }).catch(function (error) {\n      if (error.code == \"auth/wrong-password\") {\n        setPasswordError(\"パスワードが違います\");\n      } else {\n        setPasswordError(error.message);\n      }\n    });\n  }; //apper display to cancel\n\n\n  const displayCancel = () => {\n    var id = event.target.id;\n    setCancelId(id);\n  };\n\n  const hideCancel = () => {\n    setCancelId(\"\");\n  };\n\n  const judgeCancel = (eventId, eventDate, eventPlace, eventTitle, eventGender, eventPrice) => {\n    var today = new Date();\n    var year = today.getFullYear();\n    var month = today.getMonth() + 1;\n    var day = today.getDate();\n    var eventYear = Number(eventId.substr(0, 4));\n    var eventMonth = Number(eventId.substr(4, 2));\n    var eventDay = Number(eventId.substr(6, 2));\n    var array = [2, 4, 6, 9, 11];\n    var dayLeft;\n\n    if (month == 2) {\n      dayLeft = 29 - day;\n    } else if (array.includes(month)) {\n      dayLeft = 30 - day;\n    } else {\n      dayLeft = 31 - day;\n    }\n\n    if (year == eventYear && month == eventMonth && day + 3 >= eventDay) {\n      setCancelErrorId(eventId);\n    } else if (year == eventYear && month + 1 == eventMonth && dayLeft + eventDay <= 3) {\n      setCancelErrorId(eventId);\n    } else {\n      submitCancel(eventId, eventDate, eventPlace, eventTitle, eventGender, eventPrice);\n    }\n  };\n\n  const submitCancel = (eventId, eventDate, eventPlace, eventTitle, eventGender, eventPrice) => {\n    db.collection(\"users\").doc(user.uid).update({\n      events: firebase.firestore.FieldValue.arrayRemove({\n        id: eventId,\n        date: eventDate,\n        place: eventPlace,\n        title: eventTitle,\n        gender: eventGender,\n        price: eventPrice\n      })\n    }).then(function () {\n      setCanceledId(eventId);\n    }).catch(function (error) {});\n\n    if (eventGender == \"man\") {\n      db.collection(\"events\").doc(cancelId).update({\n        mens: firebase.firestore.FieldValue.arrayRemove({\n          id: user.uid,\n          mail: user.email,\n          name: user.displayName\n        })\n      }).then(function () {}).catch(function (error) {});\n    } else {\n      db.collection(\"events\").doc(cancelId).update({\n        womens: firebase.firestore.FieldValue.arrayRemove({\n          id: user.uid,\n          mail: user.email,\n          name: user.displayName\n        })\n      }).then(function () {}).catch(function (error) {});\n    }\n  };\n\n  const changeEventId = event => {\n    var id = event.target.id;\n    setEventId(id);\n    setEventMensName(mensName[id]);\n    setEventMensMail(mensEmail[id]);\n    setEventWomensName(womensName[id]);\n    setEventWomensMail(womensEmail[id]);\n  };\n\n  return __jsx(Layout, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 440,\n      columnNumber: 9\n    }\n  }, __jsx(Head, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 441,\n      columnNumber: 13\n    }\n  }, __jsx(\"title\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 442,\n      columnNumber: 17\n    }\n  }, \"details\")), __jsx(\"article\", {\n    className: \"bg-white p-6 mt-6 sm:max-w-lg sm:mx-auto\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 444,\n      columnNumber: 13\n    }\n  }, __jsx(\"div\", {\n    className: \"w-full\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 445,\n      columnNumber: 17\n    }\n  }, __jsx(\"div\", {\n    className: \" border-b-2 py-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 447,\n      columnNumber: 21\n    }\n  }, __jsx(\"p\", {\n    className: \"text-center font-semibold\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 448,\n      columnNumber: 25\n    }\n  }, \"\\u540D\\u524D\"), __jsx(\"p\", {\n    className: \"text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 449,\n      columnNumber: 25\n    }\n  }, user.displayName), __jsx(\"p\", {\n    className: \"text-blue-600 cursor-pointer text-xs text-center\",\n    id: \"name\",\n    onClick: changeId,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 450,\n      columnNumber: 25\n    }\n  }, \"\\u7DE8\\u96C6\"), __jsx(AnimateHeight, {\n    duration: 300,\n    height: toggleId === \"name\" ? 'auto' : 0,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 451,\n      columnNumber: 25\n    }\n  }, __jsx(\"div\", {\n    className: \"flex flex-col jusify-center items-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 454,\n      columnNumber: 29\n    }\n  }, __jsx(\"input\", {\n    type: \"text\",\n    placeholder: \"\\u59D3\",\n    onChange: changeLast,\n    className: \"border-solid border-2 rounded p-2 w-full outline-none max-w-sm\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 455,\n      columnNumber: 33\n    }\n  }), __jsx(\"input\", {\n    type: \"text\",\n    placeholder: \"\\u540D\",\n    onChange: changeFirst,\n    className: \"border-solid border-2 rounded p-2 mt-1 w-full outline-none max-w-sm\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 456,\n      columnNumber: 33\n    }\n  }), __jsx(\"p\", {\n    className: \"text-red-600 text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 457,\n      columnNumber: 33\n    }\n  }, nameError), __jsx(\"input\", {\n    className: \"border-solid border-2 rounded p-2 mt-1 bg-blue-200\\u3000outline-none\",\n    type: \"button\",\n    onClick: submitName,\n    value: \"\\u5909\\u66F4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 458,\n      columnNumber: 33\n    }\n  })))), __jsx(\"div\", {\n    className: \"border-b-2 py-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 463,\n      columnNumber: 21\n    }\n  }, __jsx(\"p\", {\n    className: \"text-center font-semibold\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 464,\n      columnNumber: 25\n    }\n  }, \"\\u30E1\\u30FC\\u30EB\\u30A2\\u30C9\\u30EC\\u30B9\"), __jsx(\"p\", {\n    className: \"text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 465,\n      columnNumber: 25\n    }\n  }, user.email), __jsx(\"p\", {\n    className: \"text-blue-600 cursor-pointer text-xs text-center\",\n    id: \"mail\",\n    onClick: changeId,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 466,\n      columnNumber: 25\n    }\n  }, \"\\u7DE8\\u96C6\"), __jsx(AnimateHeight, {\n    duration: 300,\n    height: toggleId === \"mail\" ? 'auto' : 0,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 467,\n      columnNumber: 25\n    }\n  }, __jsx(\"div\", {\n    className: \"flex flex-col justify-center items-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 470,\n      columnNumber: 33\n    }\n  }, __jsx(\"input\", {\n    className: \"border-solid border-2 rounded p-2 w-full outline-none max-w-sm\",\n    type: \"text\",\n    placeholder: \"\\u65B0\\u3057\\u3044\\u30E1\\u30FC\\u30EB\\u30A2\\u30C9\\u30EC\\u30B9\",\n    onChange: changeMail,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 471,\n      columnNumber: 37\n    }\n  }), __jsx(\"p\", {\n    className: \"text-red-600 text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 472,\n      columnNumber: 37\n    }\n  }, mailError), __jsx(\"input\", {\n    className: \"border-solid border-2 rounded p-2 mt-1 bg-blue-200\\u3000outline-none\",\n    type: \"button\",\n    onClick: submitMail,\n    value: \"\\u5909\\u66F4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 473,\n      columnNumber: 37\n    }\n  }))), __jsx(AnimateHeight, {\n    duration: 300,\n    height: reAuth ? 'auto' : 0,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 476,\n      columnNumber: 25\n    }\n  }, __jsx(\"div\", {\n    className: \"flex flex-col justify-center items-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 479,\n      columnNumber: 33\n    }\n  }, __jsx(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 480,\n      columnNumber: 37\n    }\n  }, \"\\u6642\\u9593\\u304C\\u7D4C\\u3063\\u3066\\u3044\\u308B\\u305F\\u3081\\u30D1\\u30B9\\u30EF\\u30FC\\u30C9\\u3092\\u5165\\u529B\\u3057\\u3066\\u304F\\u3060\\u3055\\u3044\"), __jsx(\"div\", {\n    className: \"border-solid border-2 rounded p-2 w-full flex max-w-sm\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 481,\n      columnNumber: 37\n    }\n  }, __jsx(\"input\", {\n    className: \"w-4/5 outline-none\",\n    placeholder: \"\\u73FE\\u5728\\u306E\\u30D1\\u30B9\\u30EF\\u30FC\\u30C9\",\n    type: passwordToggle ? \"password\" : \"text\",\n    onChange: changePassword,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 482,\n      columnNumber: 41\n    }\n  }), __jsx(\"input\", {\n    className: \"w-1/5 outline-none bg-white opacity-50\",\n    type: \"button\",\n    onClick: togglePassword,\n    value: passwordToggle ? \"表示\" : \"非表示\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 483,\n      columnNumber: 41\n    }\n  })), __jsx(\"p\", {\n    className: \"text-red-600 text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 485,\n      columnNumber: 37\n    }\n  }, passwordError), __jsx(\"input\", {\n    className: \"border-solid border-2 rounded p-2 mt-1 bg-blue-200\\u3000outline-none\",\n    type: \"button\",\n    onClick: submitMailAfterReAuth,\n    value: \"\\u8A8D\\u8A3C\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 486,\n      columnNumber: 37\n    }\n  })))), __jsx(\"div\", {\n    className: \"border-b-2 py-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 491,\n      columnNumber: 21\n    }\n  }, __jsx(\"p\", {\n    className: \"text-center font-semibold\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 492,\n      columnNumber: 25\n    }\n  }, \"\\u30D1\\u30B9\\u30EF\\u30FC\\u30C9\"), __jsx(\"p\", {\n    className: \"text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 493,\n      columnNumber: 25\n    }\n  }, \"\\u25CF\\u25CF\\u25CF\\u25CF\\u25CF\\u25CF\"), __jsx(\"p\", {\n    className: \"text-blue-600 cursor-pointer text-xs text-center\",\n    id: \"password\",\n    onClick: changeId,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 494,\n      columnNumber: 25\n    }\n  }, \"\\u7DE8\\u96C6\"), __jsx(AnimateHeight, {\n    duration: 300,\n    height: toggleId === \"password\" ? 'auto' : 0,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 495,\n      columnNumber: 25\n    }\n  }, __jsx(\"div\", {\n    className: \"flex flex-col justify-center items-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 498,\n      columnNumber: 33\n    }\n  }, __jsx(\"div\", {\n    className: \"border-solid border-2 rounded p-2 w-full flex max-w-sm\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 499,\n      columnNumber: 37\n    }\n  }, __jsx(\"input\", {\n    className: \"w-4/5 outline-none\",\n    placeholder: \"\\u73FE\\u5728\\u306E\\u30D1\\u30B9\\u30EF\\u30FC\\u30C9\",\n    type: passwordToggle ? \"password\" : \"text\",\n    onChange: changePassword,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 500,\n      columnNumber: 41\n    }\n  }), __jsx(\"input\", {\n    className: \"w-1/5 outline-none bg-white opacity-50\",\n    type: \"button\",\n    onClick: togglePassword,\n    value: passwordToggle ? \"表示\" : \"非表示\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 505,\n      columnNumber: 41\n    }\n  })), __jsx(\"p\", {\n    className: \"text-red-600 text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 507,\n      columnNumber: 37\n    }\n  }, passwordError), __jsx(\"div\", {\n    className: \"border-solid border-2 rounded p-2 w-full flex mt-1 max-w-sm\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 508,\n      columnNumber: 37\n    }\n  }, __jsx(\"input\", {\n    className: \"w-4/5 outline-none\",\n    placeholder: \"\\u65B0\\u3057\\u3044\\u30D1\\u30B9\\u30EF\\u30FC\\u30C9\",\n    type: newPasswordToggle ? \"password\" : \"text\",\n    onChange: changeNewPassword,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 509,\n      columnNumber: 41\n    }\n  }), __jsx(\"input\", {\n    className: \"w-1/5 outline-none bg-white opacity-50\",\n    type: \"button\",\n    onClick: toggleNewPassword,\n    value: newPasswordToggle ? \"表示\" : \"非表示\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 514,\n      columnNumber: 41\n    }\n  })), __jsx(\"p\", {\n    className: \"text-red-600 text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 516,\n      columnNumber: 37\n    }\n  }, newPasswordError), __jsx(\"input\", {\n    className: \"border-solid border-2 rounded p-2 mt-1 bg-blue-200\\u3000outline-none\",\n    type: \"button\",\n    onClick: submitPasswordAfterReAuth,\n    value: \"\\u5909\\u66F4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 517,\n      columnNumber: 37\n    }\n  })))), __jsx(\"div\", {\n    className: \"border-b-2 py-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 522,\n      columnNumber: 21\n    }\n  }, __jsx(\"div\", {\n    className: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 523,\n      columnNumber: 25\n    }\n  }, __jsx(\"p\", {\n    className: \"text-center font-semibold\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 524,\n      columnNumber: 29\n    }\n  }, \"\\u30E1\\u30FC\\u30EB\\u8A8D\\u8A3C\"), __jsx(\"p\", {\n    className: \"text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 525,\n      columnNumber: 29\n    }\n  }, user.emailVerified ? \"認証済み\" : \"未認証\"), __jsx(\"p\", {\n    className: \"text-blue-600 cursor-pointer text-xs text-center\",\n    onClick: user.emailVerified ? handleNone : submitVerification,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 526,\n      columnNumber: 29\n    }\n  }, user.emailVerified ? \"\" : verifyMessage)))), __jsx(\"div\", {\n    className: \"py-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 535,\n      columnNumber: 17\n    }\n  }, __jsx(\"p\", {\n    className: \"text-blue-600 cursor-pointer text-center\",\n    onClick: handleSignOut,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 536,\n      columnNumber: 21\n    }\n  }, \"\\u30ED\\u30B0\\u30A2\\u30A6\\u30C8\"), __jsx(\"p\", {\n    id: \"delete\",\n    className: \"text-red-600 cursor-pointer text-center\",\n    onClick: changeId,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 537,\n      columnNumber: 21\n    }\n  }, \"\\u30A2\\u30AB\\u30A6\\u30F3\\u30C8\\u3092\\u524A\\u9664\\u3059\\u308B\"), __jsx(AnimateHeight, {\n    duration: 300,\n    height: toggleId === \"delete\" ? 'auto' : 0,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 538,\n      columnNumber: 21\n    }\n  }, __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 541,\n      columnNumber: 25\n    }\n  }, __jsx(\"input\", {\n    placeholder: \"\\u73FE\\u5728\\u306E\\u30D1\\u30B9\\u30EF\\u30FC\\u30C9\",\n    type: passwordToggle ? \"password\" : \"text\",\n    onChange: changePassword,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 542,\n      columnNumber: 29\n    }\n  }), __jsx(\"input\", {\n    type: \"button\",\n    onClick: togglePassword,\n    value: \"\\u8868\\u793A\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 546,\n      columnNumber: 29\n    }\n  })), __jsx(\"p\", {\n    className: styles.alert,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 548,\n      columnNumber: 25\n    }\n  }, passwordError), __jsx(\"input\", {\n    type: \"button\",\n    onClick: submitDelete,\n    value: \"\\u524A\\u9664\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 549,\n      columnNumber: 25\n    }\n  })))), __jsx(\"article\", {\n    className: \"bg-white p-6 mt-6 mb-6 sm:max-w-lg sm:mx-auto\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 553,\n      columnNumber: 13\n    }\n  }, __jsx(\"div\", {\n    className: \"w-full\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 554,\n      columnNumber: 17\n    }\n  }, __jsx(\"h2\", {\n    className: \"text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 555,\n      columnNumber: 21\n    }\n  }, \"\\u53C2\\u52A0\\u4E88\\u5B9A\\u306E\\u30A4\\u30D9\\u30F3\\u30C8\\u30EA\\u30B9\\u30C8\"), __jsx(\"ul\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 556,\n      columnNumber: 21\n    }\n  }, userInfo.events.map(event => __jsx(\"li\", {\n    key: event.id,\n    className: \"list-none border-t-2 py-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 558,\n      columnNumber: 29\n    }\n  }, __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 559,\n      columnNumber: 29\n    }\n  }, __jsx(Link, {\n    href: \"/posts/[id]\",\n    as: `/posts/${event.id}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 560,\n      columnNumber: 33\n    }\n  }, __jsx(\"a\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 561,\n      columnNumber: 37\n    }\n  }, __jsx(\"h3\", {\n    className: \"text-blue-600 text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 561,\n      columnNumber: 40\n    }\n  }, event.title))), __jsx(\"p\", {\n    className: \"text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 563,\n      columnNumber: 33\n    }\n  }, event.date), __jsx(\"p\", {\n    className: \"text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 564,\n      columnNumber: 33\n    }\n  }, event.place), __jsx(\"div\", {\n    className: styles.fee,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 565,\n      columnNumber: 33\n    }\n  }, __jsx(\"p\", {\n    className: \"text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 566,\n      columnNumber: 37\n    }\n  }, event.gender == \"man\" ? \"男性\" : \"女性\"), __jsx(\"p\", {\n    className: \"text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 567,\n      columnNumber: 37\n    }\n  }, \"1\\u4EBA\"), __jsx(\"p\", {\n    className: \"text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 568,\n      columnNumber: 37\n    }\n  }, event.price, \"\\u5186\")), cancelId !== event.id ? __jsx(\"div\", {\n    className: \"flex flex-col justify-center items-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 571,\n      columnNumber: 37\n    }\n  }, __jsx(\"p\", {\n    id: event.id,\n    onClick: displayCancel,\n    className: \"text-red-600 cursor-pointer text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 572,\n      columnNumber: 41\n    }\n  }, \"\\u30AD\\u30E3\\u30F3\\u30BB\\u30EB\")) : __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 575,\n      columnNumber: 37\n    }\n  }, cancelErrorId !== event.id ? __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 577,\n      columnNumber: 45\n    }\n  }, __jsx(\"p\", {\n    className: \"text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 578,\n      columnNumber: 49\n    }\n  }, \"\\u4E0A\\u8A18\\u306E\\u30A4\\u30D9\\u30F3\\u30C8\\u306E\\u4E88\\u7D04\\u3092\\u30AD\\u30E3\\u30F3\\u30BB\\u30EB\\u3057\\u307E\\u3059\\u304C\\u3088\\u308D\\u3057\\u3044\\u3067\\u3059\\u304B\"), __jsx(\"div\", {\n    className: \"flex justify-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 579,\n      columnNumber: 49\n    }\n  }, __jsx(\"input\", {\n    className: \"border-solid border-2 rounded p-2 mt-1 bg-white\\u3000outline-none mx-1\",\n    type: \"button\",\n    value: \"\\u306F\\u3044\",\n    onClick: e => judgeCancel(event.id, event.date, event.place, event.title, event.gender, event.price, e),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 580,\n      columnNumber: 53\n    }\n  }), __jsx(\"input\", {\n    className: \"border-solid border-2 rounded p-2 mt-1 bg-white\\u3000outline-none mx-1\",\n    type: \"button\",\n    value: \"\\u3044\\u3044\\u3048\",\n    onClick: hideCancel,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 581,\n      columnNumber: 53\n    }\n  }))) : __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 585,\n      columnNumber: 45\n    }\n  }, __jsx(\"p\", {\n    className: \"text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 586,\n      columnNumber: 49\n    }\n  }, \"web\\u4E0A\\u3067\\u30AD\\u30E3\\u30F3\\u30BB\\u30EB\\u53EF\\u80FD\\u306A\\u65E5\\u306B\\u3061\\u3092\\u8D85\\u3048\\u3066\\u3044\\u307E\\u3059\\u3002\"), __jsx(\"p\", {\n    className: \"text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 587,\n      columnNumber: 49\n    }\n  }, \"\\u304A\\u624B\\u6570\\u3067\\u3059\\u304C\\u4EE5\\u4E0B\\u306E\\u96FB\\u8A71\\u756A\\u53F7\\u307E\\u3067\\u3054\\u9023\\u7D61\\u304F\\u3060\\u3055\\u3044\"), __jsx(\"p\", {\n    className: \"text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 588,\n      columnNumber: 49\n    }\n  }, phoneNumber)))))))), userInfo.admin ? __jsx(\"div\", {\n    className: styles.detailWrapper,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 599,\n      columnNumber: 21\n    }\n  }, __jsx(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 600,\n      columnNumber: 25\n    }\n  }, \"\\u30A4\\u30D9\\u30F3\\u30C8\\u30EA\\u30B9\\u30C8\"), __jsx(\"ul\", {\n    className: styles.mainWrapper,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 601,\n      columnNumber: 25\n    }\n  }, allPostsData.map(data => __jsx(\"li\", {\n    className: styles.eventList,\n    key: `admin${data.id}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 604,\n      columnNumber: 33\n    }\n  }, __jsx(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 605,\n      columnNumber: 37\n    }\n  }, data.title), __jsx(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 606,\n      columnNumber: 37\n    }\n  }, data.date), __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 607,\n      columnNumber: 37\n    }\n  }, __jsx(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 608,\n      columnNumber: 45\n    }\n  }, \"\\u5408\\u8A08\\u4EBA\\u6570 \", eventMensName.length + eventWomensName.length, \"\\u4EBA\"), __jsx(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 609,\n      columnNumber: 45\n    }\n  }, \"\\u7537\\u6027\\u53C2\\u52A0\\u8005\"), __jsx(\"div\", {\n    className: styles.adminUsers,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 610,\n      columnNumber: 45\n    }\n  }, __jsx(\"div\", {\n    className: styles.adminName,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 611,\n      columnNumber: 49\n    }\n  }, data.mens.map(man => __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 613,\n      columnNumber: 57\n    }\n  }, __jsx(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 614,\n      columnNumber: 60\n    }\n  }, man.name), __jsx(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 615,\n      columnNumber: 61\n    }\n  }, man.mail))))), __jsx(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 620,\n      columnNumber: 45\n    }\n  }, \"\\u5973\\u6027\\u53C2\\u52A0\\u8005\"), __jsx(\"div\", {\n    className: styles.adminUsers,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 621,\n      columnNumber: 45\n    }\n  }, __jsx(\"div\", {\n    className: styles.adminName,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 622,\n      columnNumber: 49\n    }\n  }, eventWomensName.map(name => __jsx(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 624,\n      columnNumber: 57\n    }\n  }, name))), __jsx(\"div\", {\n    className: styles.adminMail,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 627,\n      columnNumber: 49\n    }\n  }, eventWomensMail.map(mail => __jsx(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 629,\n      columnNumber: 57\n    }\n  }, mail))))))))) : __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 674,\n      columnNumber: 17\n    }\n  })));\n}","map":{"version":3,"sources":["/Users/tkak/sample/villageon/villageon/pages/user/[id].js"],"names":["Layout","phoneNumber","url","Head","styles","useState","useEffect","AnimateHeight","Router","Link","getSortedPostsData","initFirebase","firebase","require","db","firestore","getOptions","source","getStaticPaths","ids","collection","get","then","querySnapshot","docs","forEach","doc","push","id","paths","map","params","fallback","getStaticProps","allPostsData","orderBy","datas","data","userInfo","exists","props","details","user","setUser","verifyMessage","setVerifyMessage","toggleId","setToggleId","nameError","setNameError","newFirst","setNewFirst","newLast","setNewLast","newMail","setNewMail","mailError","setMailError","reAuth","setReAuth","password","setPassword","newPassword","setNewPassword","passwordError","setPasswordError","newPasswordError","setNewPasswordError","passwordToggle","setPasswordToggle","newPasswordToggle","setNewPasswordToggle","admin","setAdmin","events","setEvents","mount","setMount","cancelId","setCancelId","canceledId","setCanceledId","cancelErrorId","setCancelErrorId","mensName","setMensName","womensName","setWomensName","mensEmail","setMensEmail","womensEmail","setWomensEmail","eventId","setEventId","eventMensName","setEventMensName","eventMensMail","setEventMensMail","eventWomensName","setEventWomensName","eventWomensMail","setEventWomensMail","auth","onAuthStateChanged","uid","nameForMens","emailForMens","mens","man","name","mail","nameForWomens","emailForWomens","womens","woman","changeFirst","event","target","value","changeLast","submitName","updateProfile","displayName","catch","error","message","submitMail","updateEmail","code","submitMailAfterReAuth","cred","EmailAuthProvider","credential","email","reauthenticateWithCredential","changeMail","submitPasswordAfterReAuth","submitPassword","updatePassword","togglePassword","toggleNewPassword","changePassword","pass","changeNewPassword","submitVerification","actionCodeSettings","sendEmailVerification","handleSignOut","signOut","replace","handleNone","changeId","newId","submitDelete","delete","displayCancel","hideCancel","judgeCancel","eventDate","eventPlace","eventTitle","eventGender","eventPrice","today","Date","year","getFullYear","month","getMonth","day","getDate","eventYear","Number","substr","eventMonth","eventDay","array","dayLeft","includes","submitCancel","update","FieldValue","arrayRemove","date","place","title","gender","price","changeEventId","emailVerified","alert","fee","e","detailWrapper","mainWrapper","eventList","length","adminUsers","adminName","adminMail"],"mappings":"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","sourcesContent":["import Layout, { phoneNumber, url }from '../../components/layout'\nimport Head from 'next/head'\nimport styles from '../../styles/user.module.scss'\nimport { useState, useEffect } from 'react'\nimport AnimateHeight from 'react-animate-height'\nimport Router from 'next/router'\nimport Link from 'next/link'\nimport { getSortedPostsData } from '../../lib/posts'\n\nimport initFirebase from '../../components/initFirebase'\nimport firebase from \"firebase/app\"\nimport 'firebase/auth'\nrequire('firebase/auth')\nrequire(\"firebase/firestore\")\n\ninitFirebase()\nvar db = firebase.firestore()\nvar getOptions = {\n    source: 'cache'\n}\n\nexport async function getStaticPaths() {\n    const ids = await db.collection('users').get().then(function(querySnapshot) {\n        var ids = []\n        querySnapshot.docs.forEach(doc => {\n          ids.push(doc.id)\n        })\n        return ids\n    })\n\n    const paths = ids.map(id => {\n        return {\n            params: {\n                id: id\n            }\n        }\n    })\n\n    return {\n        paths,\n        fallback: false\n    }\n}\n\nexport async function getStaticProps({params}) {\n    const allPostsData = await db.collection('events').orderBy(\"date\").get().then(function(querySnapshot) {\n        var datas = []\n        querySnapshot.docs.forEach(doc => {\n          datas.push(doc.data())\n        })\n        return datas\n    })\n    const userInfo = await db.collection('users').doc(params.id).get().then(function(doc) {\n        if (doc.exists) {\n            return doc.data()\n        }\n    })\n    return {\n      props: {\n        allPostsData,\n        userInfo\n      }\n    }\n  }\n\n\n\n\nexport default function details({ allPostsData, userInfo }) {\n    const [user, setUser] = useState(\"\")\n    const [verifyMessage, setVerifyMessage] = useState(\"認証メールを送る\")\n    const [toggleId, setToggleId] = useState(\"\")\n    //name\n    const [nameError, setNameError] = useState(\"\")\n    const [newFirst, setNewFirst] = useState(\"\")\n    const [newLast, setNewLast] = useState(\"\")\n    //mail\n    const [newMail, setNewMail] = useState(\"\")\n    const [mailError, setMailError] = useState(\"\")\n    const [reAuth, setReAuth] = useState(false)\n    //password\n    const [password, setPassword] = useState(\"\")\n    const [newPassword, setNewPassword] = useState(\"\")\n    const [passwordError, setPasswordError] = useState(\"\")\n    const [newPasswordError, setNewPasswordError] = useState(\"\")\n    const [passwordToggle, setPasswordToggle] = useState(true)\n    const [newPasswordToggle, setNewPasswordToggle] = useState(true)\n    //database\n    const [admin, setAdmin] = useState(false) \n    const [events, setEvents] = useState([])\n    //useEffect\n    const [mount, setMount] = useState(true)\n    //cancel\n    const [cancelId, setCancelId] = useState(\"\")\n    const [canceledId, setCanceledId] = useState([])\n    const [cancelErrorId, setCancelErrorId] = useState([])\n    //admin\n    const [mensName, setMensName] = useState({})\n    const [womensName, setWomensName] = useState({})\n    const [mensEmail, setMensEmail] = useState({})\n    const [womensEmail, setWomensEmail] = useState({})\n    const [eventId, setEventId] = useState(\"\")\n    const [eventMensName, setEventMensName] = useState([])\n    const [eventMensMail, setEventMensMail] = useState([])\n    const [eventWomensName, setEventWomensName] = useState([])\n    const [eventWomensMail, setEventWomensMail] = useState([])\n\n    \n\n    \n    useEffect(() => {\n        if (mount) {\n            firebase.auth().onAuthStateChanged(function(user) {\n                if (user) {\n                    // User is signed in.\n                    setUser(user)\n                } else {\n                    if (process.browser) {\n                        Router.push(\"/\")\n                    }\n                    // No user is signed in.\n                }\n            })\n            if (user) {\n                db.collection(\"users\").doc(user.uid).get().then(function(doc) {\n                    if (doc.exists) {\n                        setEvents(doc.data().events)\n                        setAdmin(doc.data().admin)\n                        if (admin) {\n                            var mensName = {}\n                            const womensName = {}\n                            const mensEmail = {}\n                            const womensEmail = {}\n                            db.collection('events').get().then(function(querySnapshot) {\n                                querySnapshot.docs.forEach(doc => {\n                                    const nameForMens = []\n                                    const emailForMens = []\n                                    doc.data().mens.forEach(man => {\n                                        nameForMens.push(man.name)\n                                        emailForMens.push(man.mail)\n                                    })\n                                    \n                                    const nameForWomens = []\n                                    const emailForWomens = []\n                                    doc.data().womens.forEach(woman => {\n                                        nameForWomens.push(woman.name)\n                                        emailForWomens.push(woman.mail)\n                                    })\n                                    \n                                    mensName[doc.id] = nameForMens\n                                    mensEmail[doc.id] = emailForMens\n                                                                        \n                                    womensName[doc.id] = nameForWomens\n                                    womensEmail[doc.id] = emailForWomens\n                                })\n                                setMensName(mensName)\n                                setMensEmail(mensEmail)\n                                \n                                setWomensName(womensName)\n                                setWomensEmail(womensEmail)\n                                \n                            })\n                        }\n                        setMount(false)\n                    } else {\n                    }\n                })\n            }\n        }        \n    })\n\n    useEffect(() => {\n        if (user) {\n            db.collection(\"users\").doc(user.uid).get().then(function(doc) {\n                if (doc.exists) {\n                    setEvents(doc.data().events)\n                }\n            })\n        }\n    },[canceledId])\n    \n\n    const changeFirst = event => {\n        setNewFirst(event.target.value)\n    }\n\n    const changeLast = event => {\n        setNewLast(event.target.value)\n    }\n\n    //change displayname to newer\n    const submitName = event => {\n        if (newLast && newFirst) {\n            user.updateProfile({\n                displayName: `${newLast} ${newFirst}`\n            }).then(function() {\n                setToggleId(\"\")\n                setNewFirst(\"\")\n                setNewLast(\"\")\n            }) .catch(function(error) {\n                setNameError(error.message)\n            })\n        } else {\n            setNameError(\"入力してください\")\n        }\n    }\n\n    //change email to newer\n    const submitMail = () => {\n        user.updateEmail(newMail).then(\n            function() {\n                setToggleId(\"\")\n                setNewMail(\"\")\n                setMailError(\"\")\n            }).catch(function(error) {\n                if (error.code == \"auth/invalid-email\") {\n                    setMailError(\"メールアドレスの形式が正しくないです\")\n                } else if (error.code == \"auth/email-already-in-use\") {\n                    setMailError(\"既に使われています\")\n                } else if (error.code == \"auth/requires-recent-login\") {\n                    setReAuth(true)\n                }\n            }\n        )\n    }\n\n    const submitMailAfterReAuth = () => {\n        var cred = firebase.auth.EmailAuthProvider.credential(user.email, password)\n        user.reauthenticateWithCredential(cred).then(\n            function(){\n                submitMail()\n                setPasswordError(\"\")\n                setToggleId(\"\")\n                setReAuth(false)\n            }).catch(function(error){\n                if (error.code == \"auth/wrong-password\") {\n                    setPasswordError(\"パスワードが違います\")\n                } else {\n                    setPasswordError(error.message)\n                }\n            })\n    }\n\n    const changeMail = (event) => {\n        var mail = event.target.value\n        setNewMail(mail)\n    }\n\n    //change password to newer\n    const submitPasswordAfterReAuth = () => {\n        var cred = firebase.auth.EmailAuthProvider.credential(user.email, password)\n        user.reauthenticateWithCredential(cred).then(\n            function(){\n                setPasswordError(\"\")\n                submitPassword()\n                \n            }).catch(function(error){\n                if (error.code == \"auth/wrong-password\") {\n                    setPasswordError(\"パスワードが違います\")\n                } else {\n                    setPasswordError(error.message)\n                }\n            })\n    }\n\n    const submitPassword = () => {\n        user.updatePassword(newPassword).then(function() {\n            setPassword(\"\")\n            setPasswordError(\"\")\n            setToggleId(\"\")\n            setReAuth(false)\n        }).catch(function(error) {\n            if (error.code == \"auth/weak-password\") {\n                setNewPasswordError(\"6文字以上で設定してください\")\n            } else {\n                setNewPasswordError(error.message)\n            }\n        })\n    }\n\n    //switch password display or none\n    const togglePassword = () => {\n        setPasswordToggle(!passwordToggle)\n    }\n\n    //switch newpassword display or none\n    const toggleNewPassword = () => {\n        setNewPasswordToggle(!newPasswordToggle)\n    }\n\n    \n    const changePassword = (event) => {\n        var pass = event.target.value\n        setPassword(pass)\n    }\n\n    const changeNewPassword = (event) => {\n        var pass = event.target.value\n        setNewPassword(pass)\n    }\n\n    //send verification for mail\n    const submitVerification = ()　=> {\n        var actionCodeSettings = {\n            url: `${url}/user/details`,\n        }\n        user.sendEmailVerification(actionCodeSettings).then(function() {\n            setVerifyMessage(\"認証メールを送信しました。\")\n        }).catch(function(error) {\n            setVerifyMessage(error.code)\n        })\n    }\n\n    //signout\n    const handleSignOut = () => {\n        firebase.auth().signOut().then(function() {\n            Router.replace(\"/\")\n          }).catch(function(error) {\n            // An error happened.\n          });\n    }\n\n    //reauthentication\n\n    //damy\n    const handleNone = () => {\n    }\n\n    // toggle setting id\n    const changeId = (event) => {\n        var newId = event.target.id\n        if (newId == toggleId) {\n            setToggleId(\"\")\n        } else {\n            setToggleId(newId)\n        }\n    }\n\n    //delete account\n    const submitDelete = () => {\n        var cred = firebase.auth.EmailAuthProvider.credential(user.email, password)\n        user.reauthenticateWithCredential(cred).then(\n            function(){\n                setPasswordError(\"\")\n                db.collection(\"users\").doc(user.uid).delete().then(function() {\n                    user.delete()\n                })\n            }).catch(function(error){\n                if (error.code == \"auth/wrong-password\") {\n                    setPasswordError(\"パスワードが違います\")\n                } else {\n                    setPasswordError(error.message)\n                }\n            })\n    }\n\n\n    //apper display to cancel\n    const displayCancel = () => {\n        var id = event.target.id\n        setCancelId(id)\n    }\n    const hideCancel = () => {\n        setCancelId(\"\")\n    }\n\n    const judgeCancel = (eventId, eventDate, eventPlace, eventTitle, eventGender, eventPrice) => {\n        var today = new Date()\n        var year = today.getFullYear()\n        var month = today.getMonth()+1\n        var day = today.getDate()\n        var eventYear = Number(eventId.substr(0,4))\n        var eventMonth = Number(eventId.substr(4,2))\n        var eventDay = Number(eventId.substr(6,2))\n        var array = [2,4,6,9,11]\n        var dayLeft\n        if (month == 2) {\n            dayLeft = 29 - day\n        } else if (array.includes(month)) {\n            dayLeft = 30 - day\n        } else {\n            dayLeft = 31 - day\n        }\n        if (year == eventYear && month == eventMonth && day+3 >= eventDay) {\n            setCancelErrorId(eventId)\n        } else if (year == eventYear && month+1 == eventMonth && dayLeft + eventDay <= 3) {\n            setCancelErrorId(eventId)\n        } else {\n            submitCancel(eventId, eventDate, eventPlace, eventTitle, eventGender, eventPrice)\n        }\n    }\n\n    const submitCancel = (eventId, eventDate, eventPlace, eventTitle, eventGender, eventPrice) => {\n        db.collection(\"users\").doc(user.uid).update({\n            events: firebase.firestore.FieldValue.arrayRemove({\n                id: eventId,\n                date: eventDate,\n                place: eventPlace,\n                title: eventTitle,\n                gender: eventGender,\n                price: eventPrice\n            })\n        }).then(function(){\n            setCanceledId(eventId)\n        }).catch(function(error){\n        })\n        if (eventGender == \"man\") {\n            db.collection(\"events\").doc(cancelId).update({\n                mens: firebase.firestore.FieldValue.arrayRemove({\n                    id: user.uid,\n                    mail: user.email,\n                    name: user.displayName,\n                })\n            }).then(function(){\n            }).catch(function(error){\n            })\n        } else {\n            db.collection(\"events\").doc(cancelId).update({\n                womens: firebase.firestore.FieldValue.arrayRemove({\n                    id: user.uid,\n                    mail: user.email,\n                    name: user.displayName,\n                })\n            }).then(function(){\n            }).catch(function(error){\n            })\n        }\n    }\n\n    const changeEventId = (event) => {\n        var id = event.target.id\n        setEventId(id)\n        setEventMensName(mensName[id])\n        setEventMensMail(mensEmail[id])\n        setEventWomensName(womensName[id])\n        setEventWomensMail(womensEmail[id])\n    }\n\n    return (\n        <Layout>\n            <Head>\n                <title>details</title>\n            </Head>\n            <article className=\"bg-white p-6 mt-6 sm:max-w-lg sm:mx-auto\">\n                <div className=\"w-full\">\n                    {/*name block*/}\n                    <div className=\" border-b-2 py-4\">\n                        <p className=\"text-center font-semibold\">名前</p>\n                        <p className=\"text-center\">{user.displayName}</p>\n                        <p className=\"text-blue-600 cursor-pointer text-xs text-center\" id=\"name\" onClick={changeId}>編集</p>\n                        <AnimateHeight\n                            duration={300}\n                            height={toggleId === \"name\" ? 'auto' : 0}>\n                            <div className=\"flex flex-col jusify-center items-center\">\n                                <input type=\"text\" placeholder=\"姓\" onChange={changeLast} className=\"border-solid border-2 rounded p-2 w-full outline-none max-w-sm\"/>\n                                <input type=\"text\" placeholder=\"名\" onChange={changeFirst} className=\"border-solid border-2 rounded p-2 mt-1 w-full outline-none max-w-sm\"/>\n                                <p className=\"text-red-600 text-center\">{nameError}</p>\n                                <input className=\"border-solid border-2 rounded p-2 mt-1 bg-blue-200　outline-none\" type=\"button\" onClick={submitName} value=\"変更\"/>\n                            </div>\n                        </AnimateHeight>\n                    </div>\n                    {/*mail block*/}\n                    <div className=\"border-b-2 py-4\">\n                        <p className=\"text-center font-semibold\">メールアドレス</p>\n                        <p className=\"text-center\">{user.email}</p>\n                        <p className=\"text-blue-600 cursor-pointer text-xs text-center\" id=\"mail\" onClick={changeId}>編集</p>\n                        <AnimateHeight\n                            duration={300}\n                            height={toggleId === \"mail\" ? 'auto' : 0}>\n                                <div className=\"flex flex-col justify-center items-center\">\n                                    <input className=\"border-solid border-2 rounded p-2 w-full outline-none max-w-sm\" type=\"text\" placeholder=\"新しいメールアドレス\" onChange={changeMail}/>\n                                    <p className=\"text-red-600 text-center\">{mailError}</p>\n                                    <input className=\"border-solid border-2 rounded p-2 mt-1 bg-blue-200　outline-none\" type=\"button\" onClick={submitMail} value=\"変更\"/>\n                                </div>\n                        </AnimateHeight>\n                        <AnimateHeight\n                            duration={300}\n                            height={reAuth ? 'auto' : 0}>\n                                <div className=\"flex flex-col justify-center items-center\">\n                                    <p>時間が経っているためパスワードを入力してください</p>\n                                    <div className=\"border-solid border-2 rounded p-2 w-full flex max-w-sm\">\n                                        <input className=\"w-4/5 outline-none\" placeholder=\"現在のパスワード\" type={passwordToggle ? \"password\" : \"text\"} onChange={changePassword}/>\n                                        <input className=\"w-1/5 outline-none bg-white opacity-50\" type=\"button\" onClick={togglePassword} value={passwordToggle ? \"表示\" : \"非表示\"}/>\n                                    </div>\n                                    <p className=\"text-red-600 text-center\">{passwordError}</p>\n                                    <input className=\"border-solid border-2 rounded p-2 mt-1 bg-blue-200　outline-none\" type=\"button\" onClick={submitMailAfterReAuth} value=\"認証\"/>\n                                </div>\n                        </AnimateHeight>\n                    </div>\n                    {/*password block*/}\n                    <div className=\"border-b-2 py-4\">\n                        <p className=\"text-center font-semibold\">パスワード</p>\n                        <p className=\"text-center\">●●●●●●</p>\n                        <p className=\"text-blue-600 cursor-pointer text-xs text-center\" id=\"password\" onClick={changeId}>編集</p>\n                        <AnimateHeight\n                            duration={300}\n                            height={toggleId === \"password\" ? 'auto' : 0}>\n                                <div className=\"flex flex-col justify-center items-center\">\n                                    <div className=\"border-solid border-2 rounded p-2 w-full flex max-w-sm\">\n                                        <input\n                                            className=\"w-4/5 outline-none\"\n                                            placeholder=\"現在のパスワード\"\n                                            type={passwordToggle ? \"password\" : \"text\"}\n                                            onChange={changePassword}/>\n                                        <input className=\"w-1/5 outline-none bg-white opacity-50\" type=\"button\" onClick={togglePassword} value={passwordToggle ? \"表示\" : \"非表示\"}/>\n                                    </div>\n                                    <p className=\"text-red-600 text-center\">{passwordError}</p>\n                                    <div className=\"border-solid border-2 rounded p-2 w-full flex mt-1 max-w-sm\">\n                                        <input\n                                            className=\"w-4/5 outline-none\"\n                                            placeholder=\"新しいパスワード\"\n                                            type={newPasswordToggle ? \"password\" : \"text\"}\n                                            onChange={changeNewPassword}/>\n                                        <input className=\"w-1/5 outline-none bg-white opacity-50\" type=\"button\" onClick={toggleNewPassword} value={newPasswordToggle ? \"表示\" : \"非表示\"}/>\n                                    </div>\n                                    <p className=\"text-red-600 text-center\">{newPasswordError}</p>\n                                    <input className=\"border-solid border-2 rounded p-2 mt-1 bg-blue-200　outline-none\" type=\"button\" onClick={submitPasswordAfterReAuth} value=\"変更\"/>\n                                </div>\n                        </AnimateHeight>\n                    </div>\n                    {/* verifyed block */}\n                    <div className=\"border-b-2 py-4\">\n                        <div className=\"\">\n                            <p className=\"text-center font-semibold\">メール認証</p>\n                            <p className=\"text-center\">{user.emailVerified ? \"認証済み\" : \"未認証\"}</p>\n                            <p\n                                className=\"text-blue-600 cursor-pointer text-xs text-center\"\n                                onClick={user.emailVerified ? handleNone : submitVerification}\n                                >\n                                    {user.emailVerified ? \"\" : verifyMessage}\n                            </p>\n                        </div>\n                    </div>\n                </div>\n                <div className=\"py-4\">\n                    <p className=\"text-blue-600 cursor-pointer text-center\" onClick={handleSignOut}>ログアウト</p>\n                    <p id=\"delete\" className=\"text-red-600 cursor-pointer text-center\" onClick={changeId}>アカウントを削除する</p>\n                    <AnimateHeight\n                        duration={300}\n                        height={toggleId === \"delete\" ? 'auto' : 0}>\n                        <div>\n                            <input\n                                placeholder=\"現在のパスワード\"\n                                type={passwordToggle ? \"password\" : \"text\"}\n                                onChange={changePassword}/>\n                            <input type=\"button\" onClick={togglePassword} value=\"表示\"/>\n                        </div>\n                        <p className={styles.alert}>{passwordError}</p>\n                        <input type=\"button\" onClick={submitDelete} value=\"削除\"/>\n                    </AnimateHeight>\n                </div>\n            </article>\n            <article className=\"bg-white p-6 mt-6 mb-6 sm:max-w-lg sm:mx-auto\">\n                <div className=\"w-full\">\n                    <h2 className=\"text-center\">参加予定のイベントリスト</h2>\n                    <ul>\n                        {userInfo.events.map((event) => (\n                            <li key={event.id} className=\"list-none border-t-2 py-4\">\n                            <div>\n                                <Link href=\"/posts/[id]\" as={`/posts/${event.id}`}>\n                                    <a><h3 className=\"text-blue-600 text-center\">{event.title}</h3></a>\n                                </Link>\n                                <p className=\"text-center\">{event.date}</p>\n                                <p className=\"text-center\">{event.place}</p>\n                                <div className={styles.fee}>\n                                    <p className=\"text-center\">{event.gender == \"man\" ? \"男性\" : \"女性\"}</p>\n                                    <p className=\"text-center\">1人</p>\n                                    <p className=\"text-center\">{event.price}円</p>\n                                </div>\n                                {cancelId !== event.id ? \n                                    <div className=\"flex flex-col justify-center items-center\">\n                                        <p id={event.id} onClick={displayCancel} className=\"text-red-600 cursor-pointer text-center\">キャンセル</p>\n                                    </div>\n                                :\n                                    <div>\n                                        {cancelErrorId !== event.id ?\n                                            <div>\n                                                <p className=\"text-center\">上記のイベントの予約をキャンセルしますがよろしいですか</p>\n                                                <div className=\"flex justify-center\">\n                                                    <input className=\"border-solid border-2 rounded p-2 mt-1 bg-white　outline-none mx-1\" type=\"button\" value=\"はい\" onClick={(e) => judgeCancel(event.id, event.date, event.place, event.title, event.gender, event.price, e)}/>\n                                                    <input className=\"border-solid border-2 rounded p-2 mt-1 bg-white　outline-none mx-1\" type=\"button\" value=\"いいえ\" onClick={hideCancel}/>\n                                                </div>\n                                            </div>\n                                        :\n                                            <div>\n                                                <p className=\"text-center\">web上でキャンセル可能な日にちを超えています。</p>\n                                                <p className=\"text-center\">お手数ですが以下の電話番号までご連絡ください</p>\n                                                <p className=\"text-center\">{phoneNumber}</p>\n                                            </div>\n                                        }\n                                    </div>\n                                }\n                            </div>\n                        </li>\n                        ))}\n                    </ul>\n                </div>\n                {userInfo.admin ?\n                    <div className={styles.detailWrapper}>\n                        <h2>イベントリスト</h2>\n                        <ul className={styles.mainWrapper}>\n                            {allPostsData.map((data) => (\n                                \n                                <li className={styles.eventList} key={`admin${data.id}`}>\n                                    <h3>{data.title}</h3>\n                                    <p>{data.date}</p>\n                                    <div>\n                                            <p>合計人数 {eventMensName.length + eventWomensName.length}人</p>\n                                            <p>男性参加者</p>\n                                            <div className={styles.adminUsers}>\n                                                <div className={styles.adminName}>\n                                                    {data.mens.map((man) => (\n                                                        <div>\n                                                           <p>{man.name}</p>\n                                                            <p>{man.mail}</p>\n                                                        </div>\n                                                    ))}\n                                                </div>\n                                            </div>\n                                            <p>女性参加者</p>\n                                            <div className={styles.adminUsers}>\n                                                <div className={styles.adminName}>\n                                                    {eventWomensName.map((name) => (\n                                                        <p>{name}</p>\n                                                    ))}\n                                                </div>\n                                                <div className={styles.adminMail}>\n                                                    {eventWomensMail.map((mail) => (\n                                                        <p>{mail}</p>\n                                                    ))}\n                                                </div>\n                                            </div>\n                                        </div>\n                                    {/*\n                                    <p onClick={changeEventId} id={id} className={styles.link}>詳細</p>\n                                    {eventId == id ? \n                                        <div>\n                                            <p>合計人数 {eventMensName.length + eventWomensName.length}人</p>\n                                            <p>男性参加者</p>\n                                            <div className={styles.adminUsers}>\n                                                <div className={styles.adminName}>\n                                                    {eventMensName.map((name) => (\n                                                        <p>{name}</p>\n                                                    ))}\n                                                </div>\n                                                <div className={styles.adminMail}>\n                                                    {eventMensMail.map((mail) => (\n                                                        <p>{mail}</p>\n                                                    ))}\n                                                </div>\n                                            </div>\n                                            <p>女性参加者</p>\n                                            <div className={styles.adminUsers}>\n                                                <div className={styles.adminName}>\n                                                    {eventWomensName.map((name) => (\n                                                        <p>{name}</p>\n                                                    ))}\n                                                </div>\n                                                <div className={styles.adminMail}>\n                                                    {eventWomensMail.map((mail) => (\n                                                        <p>{mail}</p>\n                                                    ))}\n                                                </div>\n                                            </div>\n                                        </div>\n                                    :\n                                    <div></div>}\n                                                    */}\n                                </li>\n                            ))}\n                        </ul>\n                    </div>\n                :\n                <div></div>\n                }\n            </article>\n        </Layout>\n    )\n}"]},"metadata":{},"sourceType":"module"}