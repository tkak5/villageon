{"ast":null,"code":"var _jsxFileName = \"/Users/tkak/sample/villageon/villageon/pages/user/details.js\",\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport Layout, { phoneNumber, url } from '../../components/layout';\nimport Application from '../../components/user/application';\nimport Head from 'next/head';\nimport styles from '../../styles/user.module.scss';\nimport { useState, useEffect } from 'react';\nimport AnimateHeight from 'react-animate-height';\nimport Router from 'next/router';\nimport Link from 'next/link';\nimport { getSortedPostsData } from '../../lib/posts';\nimport initFirebase from '../../components/initFirebase';\nimport firebase from \"firebase/app\";\nimport 'firebase/auth';\n\nrequire('firebase/auth');\n\nrequire(\"firebase/firestore\");\n\ninitFirebase();\nvar db = firebase.firestore();\nvar getOptions = {\n  source: 'cache'\n};\nexport var __N_SSG = true;\nexport default function details(_ref) {\n  _s();\n\n  var _this = this;\n\n  var allEventsData = _ref.allEventsData;\n\n  var _useState = useState(\"\"),\n      user = _useState[0],\n      setUser = _useState[1];\n\n  var _useState2 = useState(\"認証メールを送る\"),\n      verifyMessage = _useState2[0],\n      setVerifyMessage = _useState2[1];\n\n  var _useState3 = useState(\"\"),\n      toggleId = _useState3[0],\n      setToggleId = _useState3[1]; //name\n\n\n  var _useState4 = useState(\"\"),\n      nameError = _useState4[0],\n      setNameError = _useState4[1];\n\n  var _useState5 = useState(\"\"),\n      newFirst = _useState5[0],\n      setNewFirst = _useState5[1];\n\n  var _useState6 = useState(\"\"),\n      newLast = _useState6[0],\n      setNewLast = _useState6[1]; //mail\n\n\n  var _useState7 = useState(\"\"),\n      newMail = _useState7[0],\n      setNewMail = _useState7[1];\n\n  var _useState8 = useState(\"\"),\n      mailError = _useState8[0],\n      setMailError = _useState8[1];\n\n  var _useState9 = useState(false),\n      reAuth = _useState9[0],\n      setReAuth = _useState9[1]; //password\n\n\n  var _useState10 = useState(\"\"),\n      password = _useState10[0],\n      setPassword = _useState10[1];\n\n  var _useState11 = useState(\"\"),\n      newPassword = _useState11[0],\n      setNewPassword = _useState11[1];\n\n  var _useState12 = useState(\"\"),\n      passwordError = _useState12[0],\n      setPasswordError = _useState12[1];\n\n  var _useState13 = useState(\"\"),\n      newPasswordError = _useState13[0],\n      setNewPasswordError = _useState13[1];\n\n  var _useState14 = useState(true),\n      passwordToggle = _useState14[0],\n      setPasswordToggle = _useState14[1];\n\n  var _useState15 = useState(true),\n      newPasswordToggle = _useState15[0],\n      setNewPasswordToggle = _useState15[1]; //database\n\n\n  var _useState16 = useState(false),\n      admin = _useState16[0],\n      setAdmin = _useState16[1]; //useEffect\n\n\n  var _useState17 = useState(true),\n      mount = _useState17[0],\n      setMount = _useState17[1]; //admin\n\n\n  var _useState18 = useState({}),\n      mensName = _useState18[0],\n      setMensName = _useState18[1];\n\n  var _useState19 = useState({}),\n      womensName = _useState19[0],\n      setWomensName = _useState19[1];\n\n  var _useState20 = useState({}),\n      mensEmail = _useState20[0],\n      setMensEmail = _useState20[1];\n\n  var _useState21 = useState({}),\n      womensEmail = _useState21[0],\n      setWomensEmail = _useState21[1];\n\n  var _useState22 = useState(\"\"),\n      eventId = _useState22[0],\n      setEventId = _useState22[1];\n\n  var _useState23 = useState([]),\n      eventMensName = _useState23[0],\n      setEventMensName = _useState23[1];\n\n  var _useState24 = useState([]),\n      eventMensMail = _useState24[0],\n      setEventMensMail = _useState24[1];\n\n  var _useState25 = useState([]),\n      eventWomensName = _useState25[0],\n      setEventWomensName = _useState25[1];\n\n  var _useState26 = useState([]),\n      eventWomensMail = _useState26[0],\n      setEventWomensMail = _useState26[1];\n\n  var _useState27 = useState(\"\"),\n      userData = _useState27[0],\n      setUserData = _useState27[1];\n\n  useEffect(function () {\n    if (mount) {\n      firebase.auth().onAuthStateChanged(function (user) {\n        if (user) {\n          // User is signed in.\n          setUser(user);\n          db.collection('users').doc(user.uid).get().then(function (doc) {\n            if (doc.exists) {\n              setUserData(doc.data());\n            }\n\n            setMount(false);\n          });\n        } else {\n          if (true) {\n            Router.push(\"/\");\n          } // No user is signed in.\n\n        }\n      });\n    }\n  });\n\n  var changeFirst = function changeFirst(event) {\n    setNewFirst(event.target.value);\n  };\n\n  var changeLast = function changeLast(event) {\n    setNewLast(event.target.value);\n  }; //change displayname to newer\n\n\n  var submitName = function submitName(event) {\n    if (newLast && newFirst) {\n      user.updateProfile({\n        displayName: \"\".concat(newLast, \" \").concat(newFirst)\n      }).then(function () {\n        setToggleId(\"\");\n        setNewFirst(\"\");\n        setNewLast(\"\");\n      })[\"catch\"](function (error) {\n        setNameError(error.message);\n      });\n    } else {\n      setNameError(\"入力してください\");\n    }\n  }; //change email to newer\n\n\n  var submitMail = function submitMail() {\n    user.updateEmail(newMail).then(function () {\n      setToggleId(\"\");\n      setNewMail(\"\");\n      setMailError(\"\");\n    })[\"catch\"](function (error) {\n      if (error.code == \"auth/invalid-email\") {\n        setMailError(\"メールアドレスの形式が正しくないです\");\n      } else if (error.code == \"auth/email-already-in-use\") {\n        setMailError(\"既に使われています\");\n      } else if (error.code == \"auth/requires-recent-login\") {\n        setReAuth(true);\n      }\n    });\n  };\n\n  var submitMailAfterReAuth = function submitMailAfterReAuth() {\n    var cred = firebase.auth.EmailAuthProvider.credential(user.email, password);\n    user.reauthenticateWithCredential(cred).then(function () {\n      submitMail();\n      setPasswordError(\"\");\n      setToggleId(\"\");\n      setReAuth(false);\n    })[\"catch\"](function (error) {\n      if (error.code == \"auth/wrong-password\") {\n        setPasswordError(\"パスワードが違います\");\n      } else {\n        setPasswordError(error.message);\n      }\n    });\n  };\n\n  var changeMail = function changeMail(event) {\n    var mail = event.target.value;\n    setNewMail(mail);\n  }; //change password to newer\n\n\n  var submitPasswordAfterReAuth = function submitPasswordAfterReAuth() {\n    var cred = firebase.auth.EmailAuthProvider.credential(user.email, password);\n    user.reauthenticateWithCredential(cred).then(function () {\n      setPasswordError(\"\");\n      submitPassword();\n    })[\"catch\"](function (error) {\n      if (error.code == \"auth/wrong-password\") {\n        setPasswordError(\"パスワードが違います\");\n      } else {\n        setPasswordError(error.message);\n      }\n    });\n  };\n\n  var submitPassword = function submitPassword() {\n    user.updatePassword(newPassword).then(function () {\n      setPassword(\"\");\n      setPasswordError(\"\");\n      setToggleId(\"\");\n      setReAuth(false);\n    })[\"catch\"](function (error) {\n      if (error.code == \"auth/weak-password\") {\n        setNewPasswordError(\"6文字以上で設定してください\");\n      } else {\n        setNewPasswordError(error.message);\n      }\n    });\n  }; //switch password display or none\n\n\n  var togglePassword = function togglePassword() {\n    setPasswordToggle(!passwordToggle);\n  }; //switch newpassword display or none\n\n\n  var toggleNewPassword = function toggleNewPassword() {\n    setNewPasswordToggle(!newPasswordToggle);\n  };\n\n  var changePassword = function changePassword(event) {\n    var pass = event.target.value;\n    setPassword(pass);\n  };\n\n  var changeNewPassword = function changeNewPassword(event) {\n    var pass = event.target.value;\n    setNewPassword(pass);\n  }; //send verification for mail\n\n\n  var submitVerification = function submitVerification() {\n    var actionCodeSettings = {\n      url: \"\".concat(url, \"/user/details\")\n    };\n    user.sendEmailVerification(actionCodeSettings).then(function () {\n      setVerifyMessage(\"認証メールを送信しました。\");\n    })[\"catch\"](function (error) {\n      setVerifyMessage(error.code);\n    });\n  }; //signout\n\n\n  var handleSignOut = function handleSignOut() {\n    firebase.auth().signOut().then(function () {\n      Router.replace(\"/\");\n    })[\"catch\"](function (error) {// An error happened.\n    });\n  }; //reauthentication\n  //damy\n\n\n  var handleNone = function handleNone() {}; // toggle setting id\n\n\n  var changeId = function changeId(event) {\n    var newId = event.target.id;\n\n    if (newId == toggleId) {\n      setToggleId(\"\");\n    } else {\n      setToggleId(newId);\n    }\n  }; //delete account\n\n\n  var submitDelete = function submitDelete() {\n    var cred = firebase.auth.EmailAuthProvider.credential(user.email, password);\n    user.reauthenticateWithCredential(cred).then(function () {\n      setPasswordError(\"\");\n      db.collection(\"users\").doc(user.uid)[\"delete\"]().then(function () {\n        user[\"delete\"]();\n      });\n    })[\"catch\"](function (error) {\n      if (error.code == \"auth/wrong-password\") {\n        setPasswordError(\"パスワードが違います\");\n      } else {\n        setPasswordError(error.message);\n      }\n    });\n  };\n\n  var changeEventId = function changeEventId(event) {\n    var id = event.target.id;\n    setEventId(id);\n    setEventMensName(mensName[id]);\n    setEventMensMail(mensEmail[id]);\n    setEventWomensName(womensName[id]);\n    setEventWomensMail(womensEmail[id]);\n  };\n\n  return __jsx(Layout, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 292,\n      columnNumber: 9\n    }\n  }, __jsx(Head, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 293,\n      columnNumber: 13\n    }\n  }, __jsx(\"title\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 294,\n      columnNumber: 17\n    }\n  }, \"details\")), __jsx(\"article\", {\n    className: \"bg-white p-6 mt-6 sm:max-w-lg sm:mx-auto\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 296,\n      columnNumber: 13\n    }\n  }, __jsx(\"div\", {\n    className: \"w-full\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 297,\n      columnNumber: 17\n    }\n  }, __jsx(\"div\", {\n    className: \" border-b-2 py-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 299,\n      columnNumber: 21\n    }\n  }, __jsx(\"p\", {\n    className: \"text-center font-semibold\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 300,\n      columnNumber: 25\n    }\n  }, \"\\u540D\\u524D\"), __jsx(\"p\", {\n    className: \"text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 301,\n      columnNumber: 25\n    }\n  }, user.displayName), __jsx(\"p\", {\n    className: \"text-blue-600 cursor-pointer text-xs text-center\",\n    id: \"name\",\n    onClick: changeId,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 302,\n      columnNumber: 25\n    }\n  }, \"\\u7DE8\\u96C6\"), __jsx(AnimateHeight, {\n    duration: 300,\n    height: toggleId === \"name\" ? 'auto' : 0,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 303,\n      columnNumber: 25\n    }\n  }, __jsx(\"div\", {\n    className: \"flex flex-col jusify-center items-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 306,\n      columnNumber: 29\n    }\n  }, __jsx(\"input\", {\n    type: \"text\",\n    placeholder: \"\\u59D3\",\n    onChange: changeLast,\n    className: \"border-solid border-2 rounded p-2 w-full outline-none max-w-sm\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 307,\n      columnNumber: 33\n    }\n  }), __jsx(\"input\", {\n    type: \"text\",\n    placeholder: \"\\u540D\",\n    onChange: changeFirst,\n    className: \"border-solid border-2 rounded p-2 mt-1 w-full outline-none max-w-sm\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 308,\n      columnNumber: 33\n    }\n  }), __jsx(\"p\", {\n    className: \"text-red-600 text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 309,\n      columnNumber: 33\n    }\n  }, nameError), __jsx(\"input\", {\n    className: \"border-solid border-2 rounded p-2 mt-1 bg-blue-200\\u3000outline-none\",\n    type: \"button\",\n    onClick: submitName,\n    value: \"\\u5909\\u66F4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 310,\n      columnNumber: 33\n    }\n  })))), __jsx(\"div\", {\n    className: \"border-b-2 py-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 315,\n      columnNumber: 21\n    }\n  }, __jsx(\"p\", {\n    className: \"text-center font-semibold\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 316,\n      columnNumber: 25\n    }\n  }, \"\\u30E1\\u30FC\\u30EB\\u30A2\\u30C9\\u30EC\\u30B9\"), __jsx(\"p\", {\n    className: \"text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 317,\n      columnNumber: 25\n    }\n  }, user.email), __jsx(\"p\", {\n    className: \"text-blue-600 cursor-pointer text-xs text-center\",\n    id: \"mail\",\n    onClick: changeId,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 318,\n      columnNumber: 25\n    }\n  }, \"\\u7DE8\\u96C6\"), __jsx(AnimateHeight, {\n    duration: 300,\n    height: toggleId === \"mail\" ? 'auto' : 0,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 319,\n      columnNumber: 25\n    }\n  }, __jsx(\"div\", {\n    className: \"flex flex-col justify-center items-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 322,\n      columnNumber: 33\n    }\n  }, __jsx(\"input\", {\n    className: \"border-solid border-2 rounded p-2 w-full outline-none max-w-sm\",\n    type: \"text\",\n    placeholder: \"\\u65B0\\u3057\\u3044\\u30E1\\u30FC\\u30EB\\u30A2\\u30C9\\u30EC\\u30B9\",\n    onChange: changeMail,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 323,\n      columnNumber: 37\n    }\n  }), __jsx(\"p\", {\n    className: \"text-red-600 text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 324,\n      columnNumber: 37\n    }\n  }, mailError), __jsx(\"input\", {\n    className: \"border-solid border-2 rounded p-2 mt-1 bg-blue-200\\u3000outline-none\",\n    type: \"button\",\n    onClick: submitMail,\n    value: \"\\u5909\\u66F4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 325,\n      columnNumber: 37\n    }\n  }))), __jsx(AnimateHeight, {\n    duration: 300,\n    height: reAuth ? 'auto' : 0,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 328,\n      columnNumber: 25\n    }\n  }, __jsx(\"div\", {\n    className: \"flex flex-col justify-center items-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 331,\n      columnNumber: 33\n    }\n  }, __jsx(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 332,\n      columnNumber: 37\n    }\n  }, \"\\u6642\\u9593\\u304C\\u7D4C\\u3063\\u3066\\u3044\\u308B\\u305F\\u3081\\u30D1\\u30B9\\u30EF\\u30FC\\u30C9\\u3092\\u5165\\u529B\\u3057\\u3066\\u304F\\u3060\\u3055\\u3044\"), __jsx(\"div\", {\n    className: \"border-solid border-2 rounded p-2 w-full flex max-w-sm\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 333,\n      columnNumber: 37\n    }\n  }, __jsx(\"input\", {\n    className: \"w-4/5 outline-none\",\n    placeholder: \"\\u73FE\\u5728\\u306E\\u30D1\\u30B9\\u30EF\\u30FC\\u30C9\",\n    type: passwordToggle ? \"password\" : \"text\",\n    onChange: changePassword,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 334,\n      columnNumber: 41\n    }\n  }), __jsx(\"input\", {\n    className: \"w-1/5 outline-none bg-white opacity-50\",\n    type: \"button\",\n    onClick: togglePassword,\n    value: passwordToggle ? \"表示\" : \"非表示\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 335,\n      columnNumber: 41\n    }\n  })), __jsx(\"p\", {\n    className: \"text-red-600 text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 337,\n      columnNumber: 37\n    }\n  }, passwordError), __jsx(\"input\", {\n    className: \"border-solid border-2 rounded p-2 mt-1 bg-blue-200\\u3000outline-none\",\n    type: \"button\",\n    onClick: submitMailAfterReAuth,\n    value: \"\\u8A8D\\u8A3C\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 338,\n      columnNumber: 37\n    }\n  })))), __jsx(\"div\", {\n    className: \"border-b-2 py-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 343,\n      columnNumber: 21\n    }\n  }, __jsx(\"p\", {\n    className: \"text-center font-semibold\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 344,\n      columnNumber: 25\n    }\n  }, \"\\u30D1\\u30B9\\u30EF\\u30FC\\u30C9\"), __jsx(\"p\", {\n    className: \"text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 345,\n      columnNumber: 25\n    }\n  }, \"\\u25CF\\u25CF\\u25CF\\u25CF\\u25CF\\u25CF\"), __jsx(\"p\", {\n    className: \"text-blue-600 cursor-pointer text-xs text-center\",\n    id: \"password\",\n    onClick: changeId,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 346,\n      columnNumber: 25\n    }\n  }, \"\\u7DE8\\u96C6\"), __jsx(AnimateHeight, {\n    duration: 300,\n    height: toggleId === \"password\" ? 'auto' : 0,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 347,\n      columnNumber: 25\n    }\n  }, __jsx(\"div\", {\n    className: \"flex flex-col justify-center items-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 350,\n      columnNumber: 33\n    }\n  }, __jsx(\"div\", {\n    className: \"border-solid border-2 rounded p-2 w-full flex max-w-sm\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 351,\n      columnNumber: 37\n    }\n  }, __jsx(\"input\", {\n    className: \"w-4/5 outline-none\",\n    placeholder: \"\\u73FE\\u5728\\u306E\\u30D1\\u30B9\\u30EF\\u30FC\\u30C9\",\n    type: passwordToggle ? \"password\" : \"text\",\n    onChange: changePassword,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 352,\n      columnNumber: 41\n    }\n  }), __jsx(\"input\", {\n    className: \"w-1/5 outline-none bg-white opacity-50\",\n    type: \"button\",\n    onClick: togglePassword,\n    value: passwordToggle ? \"表示\" : \"非表示\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 357,\n      columnNumber: 41\n    }\n  })), __jsx(\"p\", {\n    className: \"text-red-600 text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 359,\n      columnNumber: 37\n    }\n  }, passwordError), __jsx(\"div\", {\n    className: \"border-solid border-2 rounded p-2 w-full flex mt-1 max-w-sm\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 360,\n      columnNumber: 37\n    }\n  }, __jsx(\"input\", {\n    className: \"w-4/5 outline-none\",\n    placeholder: \"\\u65B0\\u3057\\u3044\\u30D1\\u30B9\\u30EF\\u30FC\\u30C9\",\n    type: newPasswordToggle ? \"password\" : \"text\",\n    onChange: changeNewPassword,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 361,\n      columnNumber: 41\n    }\n  }), __jsx(\"input\", {\n    className: \"w-1/5 outline-none bg-white opacity-50\",\n    type: \"button\",\n    onClick: toggleNewPassword,\n    value: newPasswordToggle ? \"表示\" : \"非表示\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 366,\n      columnNumber: 41\n    }\n  })), __jsx(\"p\", {\n    className: \"text-red-600 text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 368,\n      columnNumber: 37\n    }\n  }, newPasswordError), __jsx(\"input\", {\n    className: \"border-solid border-2 rounded p-2 mt-1 bg-blue-200\\u3000outline-none\",\n    type: \"button\",\n    onClick: submitPasswordAfterReAuth,\n    value: \"\\u5909\\u66F4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 369,\n      columnNumber: 37\n    }\n  })))), __jsx(\"div\", {\n    className: \"border-b-2 py-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 374,\n      columnNumber: 21\n    }\n  }, __jsx(\"div\", {\n    className: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 375,\n      columnNumber: 25\n    }\n  }, __jsx(\"p\", {\n    className: \"text-center font-semibold\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 376,\n      columnNumber: 29\n    }\n  }, \"\\u30E1\\u30FC\\u30EB\\u8A8D\\u8A3C\"), __jsx(\"p\", {\n    className: \"text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 377,\n      columnNumber: 29\n    }\n  }, user.emailVerified ? \"認証済み\" : \"未認証\"), __jsx(\"p\", {\n    className: \"text-blue-600 cursor-pointer text-xs text-center\",\n    onClick: user.emailVerified ? handleNone : submitVerification,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 378,\n      columnNumber: 29\n    }\n  }, user.emailVerified ? \"\" : verifyMessage)))), __jsx(\"div\", {\n    className: \"py-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 387,\n      columnNumber: 17\n    }\n  }, __jsx(\"p\", {\n    className: \"text-blue-600 cursor-pointer text-center\",\n    onClick: handleSignOut,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 388,\n      columnNumber: 21\n    }\n  }, \"\\u30ED\\u30B0\\u30A2\\u30A6\\u30C8\"), __jsx(\"p\", {\n    id: \"delete\",\n    className: \"text-red-600 cursor-pointer text-center\",\n    onClick: changeId,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 389,\n      columnNumber: 21\n    }\n  }, \"\\u30A2\\u30AB\\u30A6\\u30F3\\u30C8\\u3092\\u524A\\u9664\\u3059\\u308B\"), __jsx(AnimateHeight, {\n    duration: 300,\n    height: toggleId === \"delete\" ? 'auto' : 0,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 390,\n      columnNumber: 21\n    }\n  }, __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 393,\n      columnNumber: 25\n    }\n  }, __jsx(\"input\", {\n    placeholder: \"\\u73FE\\u5728\\u306E\\u30D1\\u30B9\\u30EF\\u30FC\\u30C9\",\n    type: passwordToggle ? \"password\" : \"text\",\n    onChange: changePassword,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 394,\n      columnNumber: 29\n    }\n  }), __jsx(\"input\", {\n    type: \"button\",\n    onClick: togglePassword,\n    value: \"\\u8868\\u793A\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 398,\n      columnNumber: 29\n    }\n  })), __jsx(\"p\", {\n    className: styles.alert,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 400,\n      columnNumber: 25\n    }\n  }, passwordError), __jsx(\"input\", {\n    type: \"button\",\n    onClick: submitDelete,\n    value: \"\\u524A\\u9664\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 401,\n      columnNumber: 25\n    }\n  })))), __jsx(Application, {\n    events: allEventsData,\n    user: user,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 405,\n      columnNumber: 13\n    }\n  }), __jsx(\"article\", {\n    className: \"bg-white p-6 mt-6 mb-6 sm:max-w-lg sm:mx-auto\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 409,\n      columnNumber: 13\n    }\n  }, __jsx(\"div\", {\n    className: \"w-full\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 410,\n      columnNumber: 17\n    }\n  }), userData.admin ? __jsx(\"div\", {\n    className: styles.detailWrapper,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 413,\n      columnNumber: 21\n    }\n  }, __jsx(\"h2\", {\n    className: \"text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 414,\n      columnNumber: 25\n    }\n  }, \"\\u30A4\\u30D9\\u30F3\\u30C8\\u30EA\\u30B9\\u30C8\"), __jsx(\"ul\", {\n    className: styles.mainWrapper,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 415,\n      columnNumber: 25\n    }\n  }, allEventsData.map(function (event) {\n    return __jsx(\"li\", {\n      className: styles.eventList,\n      key: \"admin\".concat(event.id),\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 418,\n        columnNumber: 33\n      }\n    }, __jsx(\"h3\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 419,\n        columnNumber: 37\n      }\n    }, event.title), __jsx(\"p\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 420,\n        columnNumber: 37\n      }\n    }, event.date), __jsx(\"div\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 421,\n        columnNumber: 37\n      }\n    }, __jsx(\"p\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 422,\n        columnNumber: 41\n      }\n    }, \"\\u5408\\u8A08\\u4EBA\\u6570 \", event.mens.length + event.womens.length, \"\\u4EBA\"), __jsx(\"p\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 423,\n        columnNumber: 41\n      }\n    }, \"\\u7537\\u6027\\u53C2\\u52A0\\u8005\"), __jsx(\"div\", {\n      className: styles.adminUsers,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 424,\n        columnNumber: 41\n      }\n    }, __jsx(\"div\", {\n      className: styles.adminName,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 425,\n        columnNumber: 45\n      }\n    }, event.mens.map(function (man) {\n      return __jsx(\"div\", {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 427,\n          columnNumber: 53\n        }\n      }, __jsx(\"p\", {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 428,\n          columnNumber: 56\n        }\n      }, man.name), __jsx(\"p\", {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 429,\n          columnNumber: 57\n        }\n      }, man.mail));\n    }))), __jsx(\"p\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 434,\n        columnNumber: 41\n      }\n    }, \"\\u5973\\u6027\\u53C2\\u52A0\\u8005\"), __jsx(\"div\", {\n      className: styles.adminUsers,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 435,\n        columnNumber: 41\n      }\n    }, __jsx(\"div\", {\n      className: styles.adminName,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 436,\n        columnNumber: 45\n      }\n    }, event.womens.map(function (woman) {\n      return __jsx(\"div\", {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 438,\n          columnNumber: 53\n        }\n      }, __jsx(\"p\", {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 439,\n          columnNumber: 57\n        }\n      }, woman.name), __jsx(\"p\", {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 440,\n          columnNumber: 57\n        }\n      }, woman.mail));\n    })))));\n  }))) : __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 451,\n      columnNumber: 17\n    }\n  })));\n}\n\n_s(details, \"ONHOQerdV1cmu2LJSJDnGYyDK90=\");","map":{"version":3,"sources":["/Users/tkak/sample/villageon/villageon/pages/user/details.js"],"names":["Layout","phoneNumber","url","Application","Head","styles","useState","useEffect","AnimateHeight","Router","Link","getSortedPostsData","initFirebase","firebase","require","db","firestore","getOptions","source","details","allEventsData","user","setUser","verifyMessage","setVerifyMessage","toggleId","setToggleId","nameError","setNameError","newFirst","setNewFirst","newLast","setNewLast","newMail","setNewMail","mailError","setMailError","reAuth","setReAuth","password","setPassword","newPassword","setNewPassword","passwordError","setPasswordError","newPasswordError","setNewPasswordError","passwordToggle","setPasswordToggle","newPasswordToggle","setNewPasswordToggle","admin","setAdmin","mount","setMount","mensName","setMensName","womensName","setWomensName","mensEmail","setMensEmail","womensEmail","setWomensEmail","eventId","setEventId","eventMensName","setEventMensName","eventMensMail","setEventMensMail","eventWomensName","setEventWomensName","eventWomensMail","setEventWomensMail","userData","setUserData","auth","onAuthStateChanged","collection","doc","uid","get","then","exists","data","push","changeFirst","event","target","value","changeLast","submitName","updateProfile","displayName","error","message","submitMail","updateEmail","code","submitMailAfterReAuth","cred","EmailAuthProvider","credential","email","reauthenticateWithCredential","changeMail","mail","submitPasswordAfterReAuth","submitPassword","updatePassword","togglePassword","toggleNewPassword","changePassword","pass","changeNewPassword","submitVerification","actionCodeSettings","sendEmailVerification","handleSignOut","signOut","replace","handleNone","changeId","newId","id","submitDelete","changeEventId","emailVerified","alert","detailWrapper","mainWrapper","map","eventList","title","date","mens","length","womens","adminUsers","adminName","man","name","woman"],"mappings":"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","sourcesContent":["import Layout, { phoneNumber, url }from '../../components/layout'\nimport Application from '../../components/user/application'\nimport Head from 'next/head'\nimport styles from '../../styles/user.module.scss'\nimport { useState, useEffect } from 'react'\nimport AnimateHeight from 'react-animate-height'\nimport Router from 'next/router'\nimport Link from 'next/link'\nimport { getSortedPostsData } from '../../lib/posts'\n\nimport initFirebase from '../../components/initFirebase'\nimport firebase from \"firebase/app\"\nimport 'firebase/auth'\nrequire('firebase/auth')\nrequire(\"firebase/firestore\")\n\ninitFirebase()\nvar db = firebase.firestore()\nvar getOptions = {\n    source: 'cache'\n}\n\n\n\nexport async function getStaticProps() {\n    const allEventsData = await db.collection('events').orderBy(\"date\").get().then(function(querySnapshot) {\n        var datas = []\n        querySnapshot.docs.forEach(doc => {\n          datas.push(doc.data())\n        })\n        return datas\n    })\n    return {\n      props: {\n        allEventsData\n      }\n    }\n  }\n\n\n\n\n  export default function details({ allEventsData }) {\n    const [user, setUser] = useState(\"\")\n    const [verifyMessage, setVerifyMessage] = useState(\"認証メールを送る\")\n    const [toggleId, setToggleId] = useState(\"\")\n    //name\n    const [nameError, setNameError] = useState(\"\")\n    const [newFirst, setNewFirst] = useState(\"\")\n    const [newLast, setNewLast] = useState(\"\")\n    //mail\n    const [newMail, setNewMail] = useState(\"\")\n    const [mailError, setMailError] = useState(\"\")\n    const [reAuth, setReAuth] = useState(false)\n    //password\n    const [password, setPassword] = useState(\"\")\n    const [newPassword, setNewPassword] = useState(\"\")\n    const [passwordError, setPasswordError] = useState(\"\")\n    const [newPasswordError, setNewPasswordError] = useState(\"\")\n    const [passwordToggle, setPasswordToggle] = useState(true)\n    const [newPasswordToggle, setNewPasswordToggle] = useState(true)\n    //database\n    const [admin, setAdmin] = useState(false) \n    //useEffect\n    const [mount, setMount] = useState(true)\n    //admin\n    const [mensName, setMensName] = useState({})\n    const [womensName, setWomensName] = useState({})\n    const [mensEmail, setMensEmail] = useState({})\n    const [womensEmail, setWomensEmail] = useState({})\n    const [eventId, setEventId] = useState(\"\")\n    const [eventMensName, setEventMensName] = useState([])\n    const [eventMensMail, setEventMensMail] = useState([])\n    const [eventWomensName, setEventWomensName] = useState([])\n    const [eventWomensMail, setEventWomensMail] = useState([])\n    const [userData, setUserData] = useState(\"\")\n\n    \n\n    \n    useEffect(() => {\n        if (mount) {\n            firebase.auth().onAuthStateChanged(function(user) {\n                if (user) {\n                    // User is signed in.\n                    setUser(user)\n                    db.collection('users').doc(user.uid).get().then(function(doc) {\n                        if (doc.exists) {\n                            setUserData(doc.data())\n                        }\n                        setMount(false)\n                    })\n                } else {\n                    if (process.browser) {\n                        Router.push(\"/\")\n                    }\n                    // No user is signed in.\n                }\n            })\n        }        \n    })\n\n    \n\n    const changeFirst = event => {\n        setNewFirst(event.target.value)\n    }\n\n    const changeLast = event => {\n        setNewLast(event.target.value)\n    }\n\n    //change displayname to newer\n    const submitName = event => {\n        if (newLast && newFirst) {\n            user.updateProfile({\n                displayName: `${newLast} ${newFirst}`\n            }).then(function() {\n                setToggleId(\"\")\n                setNewFirst(\"\")\n                setNewLast(\"\")\n            }) .catch(function(error) {\n                setNameError(error.message)\n            })\n        } else {\n            setNameError(\"入力してください\")\n        }\n    }\n\n    //change email to newer\n    const submitMail = () => {\n        user.updateEmail(newMail).then(\n            function() {\n                setToggleId(\"\")\n                setNewMail(\"\")\n                setMailError(\"\")\n            }).catch(function(error) {\n                if (error.code == \"auth/invalid-email\") {\n                    setMailError(\"メールアドレスの形式が正しくないです\")\n                } else if (error.code == \"auth/email-already-in-use\") {\n                    setMailError(\"既に使われています\")\n                } else if (error.code == \"auth/requires-recent-login\") {\n                    setReAuth(true)\n                }\n            }\n        )\n    }\n\n    const submitMailAfterReAuth = () => {\n        var cred = firebase.auth.EmailAuthProvider.credential(user.email, password)\n        user.reauthenticateWithCredential(cred).then(\n            function(){\n                submitMail()\n                setPasswordError(\"\")\n                setToggleId(\"\")\n                setReAuth(false)\n            }).catch(function(error){\n                if (error.code == \"auth/wrong-password\") {\n                    setPasswordError(\"パスワードが違います\")\n                } else {\n                    setPasswordError(error.message)\n                }\n            })\n    }\n\n    const changeMail = (event) => {\n        var mail = event.target.value\n        setNewMail(mail)\n    }\n\n    //change password to newer\n    const submitPasswordAfterReAuth = () => {\n        var cred = firebase.auth.EmailAuthProvider.credential(user.email, password)\n        user.reauthenticateWithCredential(cred).then(\n            function(){\n                setPasswordError(\"\")\n                submitPassword()\n                \n            }).catch(function(error){\n                if (error.code == \"auth/wrong-password\") {\n                    setPasswordError(\"パスワードが違います\")\n                } else {\n                    setPasswordError(error.message)\n                }\n            })\n    }\n\n    const submitPassword = () => {\n        user.updatePassword(newPassword).then(function() {\n            setPassword(\"\")\n            setPasswordError(\"\")\n            setToggleId(\"\")\n            setReAuth(false)\n        }).catch(function(error) {\n            if (error.code == \"auth/weak-password\") {\n                setNewPasswordError(\"6文字以上で設定してください\")\n            } else {\n                setNewPasswordError(error.message)\n            }\n        })\n    }\n\n    //switch password display or none\n    const togglePassword = () => {\n        setPasswordToggle(!passwordToggle)\n    }\n\n    //switch newpassword display or none\n    const toggleNewPassword = () => {\n        setNewPasswordToggle(!newPasswordToggle)\n    }\n\n    \n    const changePassword = (event) => {\n        var pass = event.target.value\n        setPassword(pass)\n    }\n\n    const changeNewPassword = (event) => {\n        var pass = event.target.value\n        setNewPassword(pass)\n    }\n\n    //send verification for mail\n    const submitVerification = ()　=> {\n        var actionCodeSettings = {\n            url: `${url}/user/details`,\n        }\n        user.sendEmailVerification(actionCodeSettings).then(function() {\n            setVerifyMessage(\"認証メールを送信しました。\")\n        }).catch(function(error) {\n            setVerifyMessage(error.code)\n        })\n    }\n\n    //signout\n    const handleSignOut = () => {\n        firebase.auth().signOut().then(function() {\n            Router.replace(\"/\")\n          }).catch(function(error) {\n            // An error happened.\n          });\n    }\n\n    //reauthentication\n\n    //damy\n    const handleNone = () => {\n    }\n\n    // toggle setting id\n    const changeId = (event) => {\n        var newId = event.target.id\n        if (newId == toggleId) {\n            setToggleId(\"\")\n        } else {\n            setToggleId(newId)\n        }\n    }\n\n    //delete account\n    const submitDelete = () => {\n        var cred = firebase.auth.EmailAuthProvider.credential(user.email, password)\n        user.reauthenticateWithCredential(cred).then(\n            function(){\n                setPasswordError(\"\")\n                db.collection(\"users\").doc(user.uid).delete().then(function() {\n                    user.delete()\n                })\n            }).catch(function(error){\n                if (error.code == \"auth/wrong-password\") {\n                    setPasswordError(\"パスワードが違います\")\n                } else {\n                    setPasswordError(error.message)\n                }\n            })\n    }\n\n\n\n\n    const changeEventId = (event) => {\n        var id = event.target.id\n        setEventId(id)\n        setEventMensName(mensName[id])\n        setEventMensMail(mensEmail[id])\n        setEventWomensName(womensName[id])\n        setEventWomensMail(womensEmail[id])\n    }\n\n    return (\n        <Layout>\n            <Head>\n                <title>details</title>\n            </Head>\n            <article className=\"bg-white p-6 mt-6 sm:max-w-lg sm:mx-auto\">\n                <div className=\"w-full\">\n                    {/*name block*/}\n                    <div className=\" border-b-2 py-4\">\n                        <p className=\"text-center font-semibold\">名前</p>\n                        <p className=\"text-center\">{user.displayName}</p>\n                        <p className=\"text-blue-600 cursor-pointer text-xs text-center\" id=\"name\" onClick={changeId}>編集</p>\n                        <AnimateHeight\n                            duration={300}\n                            height={toggleId === \"name\" ? 'auto' : 0}>\n                            <div className=\"flex flex-col jusify-center items-center\">\n                                <input type=\"text\" placeholder=\"姓\" onChange={changeLast} className=\"border-solid border-2 rounded p-2 w-full outline-none max-w-sm\"/>\n                                <input type=\"text\" placeholder=\"名\" onChange={changeFirst} className=\"border-solid border-2 rounded p-2 mt-1 w-full outline-none max-w-sm\"/>\n                                <p className=\"text-red-600 text-center\">{nameError}</p>\n                                <input className=\"border-solid border-2 rounded p-2 mt-1 bg-blue-200　outline-none\" type=\"button\" onClick={submitName} value=\"変更\"/>\n                            </div>\n                        </AnimateHeight>\n                    </div>\n                    {/*mail block*/}\n                    <div className=\"border-b-2 py-4\">\n                        <p className=\"text-center font-semibold\">メールアドレス</p>\n                        <p className=\"text-center\">{user.email}</p>\n                        <p className=\"text-blue-600 cursor-pointer text-xs text-center\" id=\"mail\" onClick={changeId}>編集</p>\n                        <AnimateHeight\n                            duration={300}\n                            height={toggleId === \"mail\" ? 'auto' : 0}>\n                                <div className=\"flex flex-col justify-center items-center\">\n                                    <input className=\"border-solid border-2 rounded p-2 w-full outline-none max-w-sm\" type=\"text\" placeholder=\"新しいメールアドレス\" onChange={changeMail}/>\n                                    <p className=\"text-red-600 text-center\">{mailError}</p>\n                                    <input className=\"border-solid border-2 rounded p-2 mt-1 bg-blue-200　outline-none\" type=\"button\" onClick={submitMail} value=\"変更\"/>\n                                </div>\n                        </AnimateHeight>\n                        <AnimateHeight\n                            duration={300}\n                            height={reAuth ? 'auto' : 0}>\n                                <div className=\"flex flex-col justify-center items-center\">\n                                    <p>時間が経っているためパスワードを入力してください</p>\n                                    <div className=\"border-solid border-2 rounded p-2 w-full flex max-w-sm\">\n                                        <input className=\"w-4/5 outline-none\" placeholder=\"現在のパスワード\" type={passwordToggle ? \"password\" : \"text\"} onChange={changePassword}/>\n                                        <input className=\"w-1/5 outline-none bg-white opacity-50\" type=\"button\" onClick={togglePassword} value={passwordToggle ? \"表示\" : \"非表示\"}/>\n                                    </div>\n                                    <p className=\"text-red-600 text-center\">{passwordError}</p>\n                                    <input className=\"border-solid border-2 rounded p-2 mt-1 bg-blue-200　outline-none\" type=\"button\" onClick={submitMailAfterReAuth} value=\"認証\"/>\n                                </div>\n                        </AnimateHeight>\n                    </div>\n                    {/*password block*/}\n                    <div className=\"border-b-2 py-4\">\n                        <p className=\"text-center font-semibold\">パスワード</p>\n                        <p className=\"text-center\">●●●●●●</p>\n                        <p className=\"text-blue-600 cursor-pointer text-xs text-center\" id=\"password\" onClick={changeId}>編集</p>\n                        <AnimateHeight\n                            duration={300}\n                            height={toggleId === \"password\" ? 'auto' : 0}>\n                                <div className=\"flex flex-col justify-center items-center\">\n                                    <div className=\"border-solid border-2 rounded p-2 w-full flex max-w-sm\">\n                                        <input\n                                            className=\"w-4/5 outline-none\"\n                                            placeholder=\"現在のパスワード\"\n                                            type={passwordToggle ? \"password\" : \"text\"}\n                                            onChange={changePassword}/>\n                                        <input className=\"w-1/5 outline-none bg-white opacity-50\" type=\"button\" onClick={togglePassword} value={passwordToggle ? \"表示\" : \"非表示\"}/>\n                                    </div>\n                                    <p className=\"text-red-600 text-center\">{passwordError}</p>\n                                    <div className=\"border-solid border-2 rounded p-2 w-full flex mt-1 max-w-sm\">\n                                        <input\n                                            className=\"w-4/5 outline-none\"\n                                            placeholder=\"新しいパスワード\"\n                                            type={newPasswordToggle ? \"password\" : \"text\"}\n                                            onChange={changeNewPassword}/>\n                                        <input className=\"w-1/5 outline-none bg-white opacity-50\" type=\"button\" onClick={toggleNewPassword} value={newPasswordToggle ? \"表示\" : \"非表示\"}/>\n                                    </div>\n                                    <p className=\"text-red-600 text-center\">{newPasswordError}</p>\n                                    <input className=\"border-solid border-2 rounded p-2 mt-1 bg-blue-200　outline-none\" type=\"button\" onClick={submitPasswordAfterReAuth} value=\"変更\"/>\n                                </div>\n                        </AnimateHeight>\n                    </div>\n                    {/* verifyed block */}\n                    <div className=\"border-b-2 py-4\">\n                        <div className=\"\">\n                            <p className=\"text-center font-semibold\">メール認証</p>\n                            <p className=\"text-center\">{user.emailVerified ? \"認証済み\" : \"未認証\"}</p>\n                            <p\n                                className=\"text-blue-600 cursor-pointer text-xs text-center\"\n                                onClick={user.emailVerified ? handleNone : submitVerification}\n                                >\n                                    {user.emailVerified ? \"\" : verifyMessage}\n                            </p>\n                        </div>\n                    </div>\n                </div>\n                <div className=\"py-4\">\n                    <p className=\"text-blue-600 cursor-pointer text-center\" onClick={handleSignOut}>ログアウト</p>\n                    <p id=\"delete\" className=\"text-red-600 cursor-pointer text-center\" onClick={changeId}>アカウントを削除する</p>\n                    <AnimateHeight\n                        duration={300}\n                        height={toggleId === \"delete\" ? 'auto' : 0}>\n                        <div>\n                            <input\n                                placeholder=\"現在のパスワード\"\n                                type={passwordToggle ? \"password\" : \"text\"}\n                                onChange={changePassword}/>\n                            <input type=\"button\" onClick={togglePassword} value=\"表示\"/>\n                        </div>\n                        <p className={styles.alert}>{passwordError}</p>\n                        <input type=\"button\" onClick={submitDelete} value=\"削除\"/>\n                    </AnimateHeight>\n                </div>\n            </article>\n            <Application\n                events={allEventsData}\n                user={user}\n            />\n            <article className=\"bg-white p-6 mt-6 mb-6 sm:max-w-lg sm:mx-auto\">\n                <div className=\"w-full\">\n                </div>\n                {userData.admin ?\n                    <div className={styles.detailWrapper}>\n                        <h2 className=\"text-center\">イベントリスト</h2>\n                        <ul className={styles.mainWrapper}>\n                            {allEventsData.map((event) => (\n                                \n                                <li className={styles.eventList} key={`admin${event.id}`}>\n                                    <h3>{event.title}</h3>\n                                    <p>{event.date}</p>\n                                    <div>\n                                        <p>合計人数 {event.mens.length + event.womens.length}人</p>\n                                        <p>男性参加者</p>\n                                        <div className={styles.adminUsers}>\n                                            <div className={styles.adminName}>\n                                                {event.mens.map((man) => (\n                                                    <div>\n                                                       <p>{man.name}</p>\n                                                        <p>{man.mail}</p>\n                                                    </div>\n                                                ))}\n                                            </div>\n                                        </div>\n                                        <p>女性参加者</p>\n                                        <div className={styles.adminUsers}>\n                                            <div className={styles.adminName}>\n                                                {event.womens.map((woman) => (\n                                                    <div>\n                                                        <p>{woman.name}</p>\n                                                        <p>{woman.mail}</p>\n                                                    </div>\n                                                ))}\n                                            </div>\n                                        </div>\n                                    </div>\n                                </li>\n                            ))}\n                        </ul>\n                    </div>\n                :\n                <div></div>\n                }\n            </article>\n        </Layout>\n    )\n}"]},"metadata":{},"sourceType":"module"}