{"ast":null,"code":"var _jsxFileName = \"/Users/tkak/sample/villageon/villageon/pages/posts/[id].js\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport Layout, { phoneNumber } from '../../components/layout';\nimport Head from 'next/head';\nimport styles from '../../styles/posts.module.scss';\nimport { getAllPostIds, getPostData, getAttention, getBan } from '../../lib/posts';\nimport Link from 'next/link';\nimport initFirebase from '../../components/initFirebase';\nimport firebase from \"firebase/app\";\nimport 'firebase/auth';\nimport { useState, useEffect } from 'react';\n\nrequire('firebase/auth');\n\nrequire(\"firebase/firestore\");\n\ninitFirebase();\nvar db = firebase.firestore();\nexport async function getStaticPaths() {\n  //return a list of possible value for id\n  const ids = await db.collection('events').orderBy(\"date\").get().then(function (querySnapshot) {\n    var ids = [];\n    querySnapshot.docs.forEach(doc => {\n      ids.push(doc.id);\n    });\n    return ids;\n  });\n  paths = ids.map(id => {\n    return {\n      params: {\n        id: id\n      }\n    };\n  }); //const paths = getAllPostIds()\n\n  return {\n    paths,\n    fallback: false\n  };\n}\nexport async function getStaticProps({\n  params\n}) {\n  //fetch necessary data for \n  const postData = await db.collection('events').orderBy(\"date\").get().then(function (querySnapshot) {\n    var datas = [];\n    querySnapshot.docs.forEach(doc => {\n      datas.push(doc.data());\n    });\n    return datas;\n  }); //const postData = await getPostData(params.id)\n\n  const attention = await getAttention();\n  const ban = await getBan();\n  return {\n    props: {\n      postData,\n      attention,\n      ban\n    }\n  };\n}\nexport default function Post({\n  postData,\n  attention,\n  ban\n}) {\n  const {\n    0: user,\n    1: setUser\n  } = useState(\"\");\n  const {\n    0: first,\n    1: setFirst\n  } = useState(\"\");\n  const {\n    0: last,\n    1: setLast\n  } = useState(\"\");\n  const {\n    0: gender,\n    1: setGender\n  } = useState(\"man\");\n  const {\n    0: mount,\n    1: setMount\n  } = useState(true);\n  const {\n    0: display,\n    1: setDisplay\n  } = useState(false);\n  const {\n    0: applied,\n    1: setApplied\n  } = useState(false);\n  const {\n    0: verification,\n    1: setVerification\n  } = useState(false);\n  firebase.auth().onAuthStateChanged(function (user) {\n    if (user) {\n      // User is signed in.\n      setUser(user);\n    } else {// No user is signed in.\n    }\n  });\n  useEffect(() => {\n    if (mount) {\n      firebase.auth().onAuthStateChanged(function (user) {\n        if (user) {\n          // User is signed in.\n          setUser(user);\n          setMount(false);\n        } else {// No user is signed in.\n        }\n      });\n    }\n  });\n\n  const submitApplication = event => {\n    db.collection(\"users\").doc(user.uid).update({\n      events: firebase.firestore.FieldValue.arrayUnion({\n        id: postData.id,\n        date: postData.date,\n        place: postData.place,\n        title: postData.title,\n        gender: gender,\n        price: gender == \"man\" ? postData.mensPrice : postData.womensPrice\n      })\n    }).then(function () {}).catch(function (error) {});\n\n    if (gender == \"man\") {\n      db.collection(\"events\").doc(postData.id).update({\n        mens: firebase.firestore.FieldValue.arrayUnion({\n          id: user.uid,\n          mail: user.email,\n          name: user.displayName\n        })\n      }).then(function () {\n        setApplied(true);\n      }).catch(function (error) {});\n    } else {\n      db.collection(\"events\").doc(postData.id).update({\n        womens: firebase.firestore.FieldValue.arrayUnion({\n          id: user.uid,\n          mail: user.email,\n          name: user.displayName\n        })\n      }).then(function () {\n        setApplied(true);\n      }).catch(function (error) {});\n    }\n  };\n\n  const displayPurchase = event => {\n    var gender = event.target.id;\n    setGender(gender);\n    setDisplay(true);\n  };\n\n  const hidePurchase = () => {\n    setDisplay(false);\n  };\n\n  const submitVerification = () => {\n    var actionCodeSettings = {\n      url: `http://localhost:3000/posts/${postData.id}`\n    };\n    user.sendEmailVerification(actionCodeSettings).then(function () {\n      setVerification(true);\n    });\n  };\n\n  return __jsx(Layout, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 9\n    }\n  }, __jsx(Head, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 13\n    }\n  }, __jsx(\"title\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 17\n    }\n  }, postData.title)), __jsx(\"article\", {\n    className: styles.articleWrapper,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 13\n    }\n  }, __jsx(\"div\", {\n    className: styles.meta,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 17\n    }\n  }, __jsx(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 21\n    }\n  }, postData.title), __jsx(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 21\n    }\n  }, \"\\u65E5\\u6642 \", postData.date), __jsx(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 21\n    }\n  }, \"\\u5834\\u6240 \", postData.place), __jsx(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 21\n    }\n  }, \"\\u4F4F\\u6240 \", postData.address), __jsx(\"div\", {\n    className: styles.feeWrapper,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 21\n    }\n  }, !display ? __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 29\n    }\n  }, __jsx(\"div\", {\n    className: styles.fee,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 33\n    }\n  }, __jsx(\"p\", {\n    className: styles.mens,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 37\n    }\n  }, \"\\u7537\\u6027\"), __jsx(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 37\n    }\n  }, \"1\\u4EBA\"), __jsx(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 37\n    }\n  }, postData.mensPrice, \"\\u5186\"), __jsx(\"input\", {\n    id: \"man\",\n    type: \"button\",\n    value: \"\\u4E88\\u7D04\",\n    onClick: displayPurchase,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 37\n    }\n  })), __jsx(\"div\", {\n    className: styles.fee,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 33\n    }\n  }, __jsx(\"p\", {\n    className: styles.womens,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 37\n    }\n  }, \"\\u5973\\u6027\"), __jsx(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 37\n    }\n  }, \"1\\u4EBA\"), __jsx(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 37\n    }\n  }, postData.womensPrice, \"\\u5186\"), __jsx(\"input\", {\n    id: \"woman\",\n    type: \"button\",\n    value: \"\\u4E88\\u7D04\",\n    onClick: displayPurchase,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 37\n    }\n  }))) : user ? user.emailVerified ? !applied ? __jsx(\"div\", {\n    className: styles.purchase,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 37\n    }\n  }, __jsx(\"div\", {\n    className: styles.hideButtonWrapper,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 41\n    }\n  }, __jsx(\"div\", {\n    className: styles.hideButton,\n    onClick: hidePurchase,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 45\n    }\n  }, __jsx(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 103\n    }\n  }, \"\\xD7\"))), gender == \"man\" ? __jsx(\"div\", {\n    className: styles.fee,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 45\n    }\n  }, __jsx(\"p\", {\n    className: styles.mens,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 49\n    }\n  }, \"\\u7537\\u6027\"), __jsx(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 49\n    }\n  }, \"1\\u4EBA\"), __jsx(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 49\n    }\n  }, postData.mensPrice, \"\\u5186\")) : __jsx(\"div\", {\n    className: styles.fee,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 45\n    }\n  }, __jsx(\"p\", {\n    className: styles.womens,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 49\n    }\n  }, \"\\u5973\\u6027\"), __jsx(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 49\n    }\n  }, \"1\\u4EBA\"), __jsx(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 49\n    }\n  }, postData.womensPrice, \"\\u5186\")), __jsx(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 41\n    }\n  }, \"\\u4EE5\\u4E0A\\u306B\\u9593\\u9055\\u3044\\u304C\\u306A\\u3044\\u304B\\u3092\\u78BA\\u8A8D\\u3057\\u305F\\u306E\\u3061\\u3001\\u4E0B\\u306E\\u30DC\\u30BF\\u30F3\\u3092\\u30AF\\u30EA\\u30C3\\u30AF\\u3057\\u3066\\u304F\\u3060\\u3055\\u3044\"), __jsx(\"input\", {\n    type: \"button\",\n    value: \"\\u4E88\\u7D04\\u3059\\u308B\",\n    onClick: submitApplication,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 41\n    }\n  })) : __jsx(\"div\", {\n    className: styles.purchase,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 37\n    }\n  }, __jsx(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 70\n    }\n  }, \"\\u4E88\\u7D04\\u3057\\u307E\\u3057\\u305F\")) : __jsx(\"div\", {\n    className: styles.purchase,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 209,\n      columnNumber: 33\n    }\n  }, !verification ? __jsx(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 41\n    }\n  }, __jsx(\"p\", {\n    className: styles.link,\n    onClick: submitVerification,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 45\n    }\n  }, \"\\u30E1\\u30FC\\u30EB\\u30A2\\u30C9\\u30EC\\u30B9\\u306E\\u78BA\\u8A8D\"), \"\\u304C\\u5B8C\\u4E86\\u3057\\u305F\\u306E\\u3061\\u3054\\u4E88\\u7D04\\u3067\\u304D\\u307E\\u3059\") : __jsx(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 216,\n      columnNumber: 41\n    }\n  }, \"\\u3054\\u767B\\u9332\\u3044\\u305F\\u3060\\u3044\\u3066\\u308B\\u30E1\\u30FC\\u30EB\\u30A2\\u30C9\\u30EC\\u30B9\\u306B\\u78BA\\u8A8D\\u30E1\\u30FC\\u30EB\\u3092\\u9001\\u308A\\u307E\\u3057\\u305F\\u3002\")) : __jsx(\"div\", {\n    className: styles.purchase,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 222,\n      columnNumber: 29\n    }\n  }, __jsx(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 223,\n      columnNumber: 33\n    }\n  }, __jsx(Link, {\n    href: \"/sign/signup\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 224,\n      columnNumber: 37\n    }\n  }, __jsx(\"a\", {\n    className: styles.link,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 41\n    }\n  }, \"\\u30A2\\u30AB\\u30A6\\u30F3\\u30C8\\u3092\\u4F5C\\u6210\")), \"\\u3057\\u3001\\u30E1\\u30FC\\u30EB\\u30A2\\u30C9\\u30EC\\u30B9\\u306E\\u78BA\\u8A8D\\u304C\\u5B8C\\u4E86\\u3057\\u305F\\u306E\\u3061\\u306B\\u3054\\u4E88\\u7D04\\u3067\\u304D\\u307E\\u3059\")))), __jsx(\"div\", {\n    className: styles.requirement,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 233,\n      columnNumber: 17\n    }\n  }, __jsx(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 234,\n      columnNumber: 21\n    }\n  }, \"\\u53C2\\u52A0\\u6761\\u4EF6\"), __jsx(\"div\", {\n    className: styles.reqDetails,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 235,\n      columnNumber: 21\n    }\n  }, __jsx(\"div\", {\n    className: styles.reqContent,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 236,\n      columnNumber: 25\n    }\n  }, __jsx(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 236,\n      columnNumber: 60\n    }\n  }, \"\\u7537\\u6027 \", postData.mensRequirement)), __jsx(\"div\", {\n    className: styles.reqContent,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 237,\n      columnNumber: 25\n    }\n  }, __jsx(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 237,\n      columnNumber: 60\n    }\n  }, \"\\u5973\\u6027 \", postData.womensRequirement))), __jsx(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 239,\n      columnNumber: 21\n    }\n  }, __jsx(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 240,\n      columnNumber: 25\n    }\n  }, \"\\u72EC\\u8EAB\\u30FB\\u5BFE\\u8C61\\u5E74\\u9F62\\u3067\\u3042\\u308B\\u3053\\u3068\"), __jsx(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 243,\n      columnNumber: 25\n    }\n  }), \"\\u53C2\\u52A0\\u6761\\u4EF6\\u304C\\u78BA\\u8A8D\\u3067\\u304D\\u306A\\u3044\\u3001\\u8A72\\u5F53\\u3057\\u306A\\u3044\\u5834\\u5408\\u3054\\u53C2\\u52A0\\u3092\\u304A\\u65AD\\u308A\\u3057\\u307E\\u3059\\u3002\\u305D\\u306E\\u5834\\u5408\\u53C2\\u52A0\\u8CBB\\u306E\\u3054\\u8FD4\\u91D1\\u306F\\u3054\\u3056\\u3044\\u307E\\u305B\\u3093\\u3002\")), __jsx(\"div\", {\n    className: styles.content,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 247,\n      columnNumber: 17\n    }\n  }, __jsx(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 248,\n      columnNumber: 21\n    }\n  }, \"\\u30AD\\u30E3\\u30F3\\u30BB\\u30EB\"), __jsx(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 249,\n      columnNumber: 21\n    }\n  }, \"\\u958B\\u50AC4\\u65E5\\u524D\\u307E\\u3067\\u306F\", __jsx(Link, {\n    href: \"/user/details\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 249,\n      columnNumber: 32\n    }\n  }, __jsx(\"a\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 249,\n      columnNumber: 59\n    }\n  }, \"\\u30E6\\u30FC\\u30B6\\u30FC\\u60C5\\u5831\")), \"\\u304B\\u3089\\u30AD\\u30E3\\u30F3\\u30BB\\u30EB\\u3067\\u304D\\u307E\\u3059\\u3002\"), __jsx(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 250,\n      columnNumber: 21\n    }\n  }, \"\\u958B\\u50AC3\\u65E5\\u524D\\u3088\\u308A\\u5F53\\u56E3\\u4F53\\u65E2\\u5B9A\\u306E\\u30AD\\u30E3\\u30F3\\u30BB\\u30EB\\u6599\\u91D1\\u304C\\u767A\\u751F\\u3057\\u3001web\\u4E0A\\u3067\\u306E\\u30AD\\u30E3\\u30F3\\u30BB\\u30EB\\u304C\\u3067\\u304D\\u307E\\u305B\\u3093\\u3002\\u4EE5\\u4E0B\\u306E\\u96FB\\u8A71\\u756A\\u53F7\\u307E\\u3067\\u3054\\u9023\\u7D61\\u304F\\u3060\\u3055\\u3044\\u3002\"), __jsx(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 251,\n      columnNumber: 21\n    }\n  }, phoneNumber)), __jsx(\"div\", {\n    className: styles.content,\n    dangerouslySetInnerHTML: {\n      __html: postData.contentHtml\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 253,\n      columnNumber: 17\n    }\n  }), __jsx(\"div\", {\n    className: styles.attention,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 254,\n      columnNumber: 17\n    }\n  }, __jsx(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 255,\n      columnNumber: 21\n    }\n  }, \"\\u6CE8\\u610F\\u4E8B\\u9805\"), __jsx(\"div\", {\n    dangerouslySetInnerHTML: {\n      __html: attention.contentHtml\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 256,\n      columnNumber: 21\n    }\n  })), __jsx(\"div\", {\n    className: styles.ban,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 258,\n      columnNumber: 17\n    }\n  }, __jsx(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 259,\n      columnNumber: 21\n    }\n  }, \"\\u7981\\u6B62\\u4E8B\\u9805\"), __jsx(\"div\", {\n    dangerouslySetInnerHTML: {\n      __html: ban.contentHtml\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 260,\n      columnNumber: 21\n    }\n  }))));\n}","map":{"version":3,"sources":["/Users/tkak/sample/villageon/villageon/pages/posts/[id].js"],"names":["Layout","phoneNumber","Head","styles","getAllPostIds","getPostData","getAttention","getBan","Link","initFirebase","firebase","useState","useEffect","require","db","firestore","getStaticPaths","ids","collection","orderBy","get","then","querySnapshot","docs","forEach","doc","push","id","paths","map","params","fallback","getStaticProps","postData","datas","data","attention","ban","props","Post","user","setUser","first","setFirst","last","setLast","gender","setGender","mount","setMount","display","setDisplay","applied","setApplied","verification","setVerification","auth","onAuthStateChanged","submitApplication","event","uid","update","events","FieldValue","arrayUnion","date","place","title","price","mensPrice","womensPrice","catch","error","mens","mail","email","name","displayName","womens","displayPurchase","target","hidePurchase","submitVerification","actionCodeSettings","url","sendEmailVerification","articleWrapper","meta","address","feeWrapper","fee","emailVerified","purchase","hideButtonWrapper","hideButton","link","requirement","reqDetails","reqContent","mensRequirement","womensRequirement","content","__html","contentHtml"],"mappings":"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","sourcesContent":["import Layout, {phoneNumber} from '../../components/layout'\nimport Head from 'next/head'\nimport styles from '../../styles/posts.module.scss'\nimport { getAllPostIds, getPostData, getAttention, getBan } from '../../lib/posts'\nimport Link from 'next/link'\n\n\nimport initFirebase from '../../components/initFirebase'\nimport firebase from \"firebase/app\"\nimport 'firebase/auth'\nimport { useState, useEffect } from 'react'\nrequire('firebase/auth')\nrequire(\"firebase/firestore\")\n\ninitFirebase()\nvar db = firebase.firestore()\n\n\nexport async function getStaticPaths () {\n    //return a list of possible value for id\n    const ids = await db.collection('events').orderBy(\"date\").get().then(function(querySnapshot) {\n        var ids = []\n        querySnapshot.docs.forEach(doc => {\n          ids.push(doc.id)\n        })\n        return ids\n    })\n    paths = ids.map(id => {\n        return {\n            params: {\n                id: id\n            }\n        }\n    })\n    //const paths = getAllPostIds()\n    return {\n        paths,\n        fallback: false\n    }\n}\n\nexport async function getStaticProps({params}) {\n    //fetch necessary data for \n    const postData = await db.collection('events').orderBy(\"date\").get().then(function(querySnapshot) {\n        var datas = []\n        querySnapshot.docs.forEach(doc => {\n          datas.push(doc.data())\n        })\n        return datas\n    })\n    //const postData = await getPostData(params.id)\n    const attention = await getAttention()\n    const ban = await getBan()\n    return {\n        props: {\n            postData,\n            attention,\n            ban\n        }\n    }\n}\n\nexport default function Post ({postData, attention, ban}) {\n    const [user, setUser] = useState(\"\")\n    const [first, setFirst] = useState(\"\")\n    const [last, setLast] = useState(\"\")\n    const [gender, setGender] = useState(\"man\")\n    const [mount, setMount] = useState(true)\n    const [display, setDisplay] = useState(false)\n    const [applied, setApplied] = useState(false)\n    const [verification, setVerification] = useState(false)\n\n    firebase.auth().onAuthStateChanged(function(user) {\n        if (user) {\n          // User is signed in.\n          setUser(user)\n        } else {\n          // No user is signed in.\n        }\n    })\n\n    useEffect(() => {\n        if (mount) {\n            firebase.auth().onAuthStateChanged(function(user) {\n                if (user) {\n                  // User is signed in.\n                  setUser(user)\n                  setMount(false)\n                } else {\n                  // No user is signed in.\n                }\n            })\n        }\n    })\n\n    const submitApplication = (event) => {\n        db.collection(\"users\").doc(user.uid).update({\n            events: firebase.firestore.FieldValue.arrayUnion({\n                id: postData.id, \n                date: postData.date, \n                place: postData.place,\n                title: postData.title,\n                gender: gender,\n                price: gender == \"man\" ? postData.mensPrice : postData.womensPrice\n            })\n        }).then(function(){\n        }).catch(function(error){\n        })\n        if (gender == \"man\") {\n            db.collection(\"events\").doc(postData.id).update({\n                mens: firebase.firestore.FieldValue.arrayUnion({\n                    id: user.uid,\n                    mail: user.email,\n                    name: user.displayName,\n                })\n            }).then(function(){\n                setApplied(true)\n            }).catch(function(error){\n            })\n        } else {\n            db.collection(\"events\").doc(postData.id).update({\n                womens: firebase.firestore.FieldValue.arrayUnion({\n                    id: user.uid,\n                    mail: user.email,\n                    name: user.displayName,\n                })\n            }).then(function(){\n                setApplied(true)\n            }).catch(function(error){\n            })\n        }        \n    }\n\n\n    const displayPurchase = (event) => {\n        var gender = event.target.id\n        setGender(gender)\n        setDisplay(true)\n    }\n\n    const hidePurchase = () => {\n        setDisplay(false)\n    }\n\n    const submitVerification = ()　=> {\n        var actionCodeSettings = {\n            url: `http://localhost:3000/posts/${postData.id}`,\n        }\n        user.sendEmailVerification(actionCodeSettings).then(\n            function() {\n                setVerification(true)\n            }\n        )\n    }\n\n    return (\n        <Layout>\n            <Head>\n                <title>{postData.title}</title>\n            </Head>\n            <article className={styles.articleWrapper}>\n                <div className={styles.meta}>\n                    <h1>{postData.title}</h1>\n                    <p>日時 {postData.date}</p>\n                    <p>場所 {postData.place}</p>\n                    <p>住所 {postData.address}</p>\n                    <div className={styles.feeWrapper}>\n                        {!display ? \n                            <div>\n                                <div className={styles.fee}>\n                                    <p className={styles.mens}>男性</p>\n                                    <p>1人</p>\n                                    <p>{postData.mensPrice}円</p>\n                                    <input id=\"man\" type=\"button\" value=\"予約\" onClick={displayPurchase}/>\n                                </div>\n                                <div className={styles.fee}>\n                                    <p className={styles.womens}>女性</p>\n                                    <p>1人</p>\n                                    <p>{postData.womensPrice}円</p>\n                                    <input id=\"woman\" type=\"button\" value=\"予約\" onClick={displayPurchase}/>\n                                </div>\n                            </div>\n                        : user ?\n                            user.emailVerified ?\n                                !applied ?\n                                    <div className={styles.purchase}>\n                                        <div className={styles.hideButtonWrapper}>\n                                            <div className={styles.hideButton} onClick={hidePurchase}><p>×</p></div>\n                                        </div>\n                                        {gender == \"man\" ? \n                                            <div className={styles.fee}>\n                                                <p className={styles.mens}>男性</p>\n                                                <p>1人</p>\n                                                <p>{postData.mensPrice}円</p>\n                                            </div>\n                                        :\n                                            <div className={styles.fee}>\n                                                <p className={styles.womens}>女性</p>\n                                                <p>1人</p>\n                                                <p>{postData.womensPrice}円</p>\n                                            </div>\n                                        }\n                                        <p>以上に間違いがないかを確認したのち、下のボタンをクリックしてください</p>\n                                        <input type=\"button\" value=\"予約する\" onClick={submitApplication}/>\n                                    </div>\n                                :\n                                    <div className={styles.purchase}><p>予約しました</p></div>\n                            :\n                                <div className={styles.purchase}>\n                                    {!verification ?\n                                        <p>\n                                            <p className={styles.link} onClick={submitVerification}>メールアドレスの確認</p>\n                                            が完了したのちご予約できます\n                                        </p>\n                                    :\n                                        <p>\n                                            ご登録いただいてるメールアドレスに確認メールを送りました。\n                                        </p>\n                                    }\n                                </div>\n                        :\n                            <div className={styles.purchase}>\n                                <p>\n                                    <Link href=\"/sign/signup\">\n                                        <a className={styles.link}>アカウントを作成</a>\n                                    </Link>\n                                    し、メールアドレスの確認が完了したのちにご予約できます\n                                </p>\n                            </div>\n                        }\n                    </div>\n                </div>\n                <div className={styles.requirement}>\n                    <h2>参加条件</h2>\n                    <div className={styles.reqDetails}>\n                        <div className={styles.reqContent}><p>男性 {postData.mensRequirement}</p></div>\n                        <div className={styles.reqContent}><p>女性 {postData.womensRequirement}</p></div>\n                    </div>\n                    <p>\n                        <strong>\n                            独身・対象年齢であること\n                        </strong>\n                        <br/>\n                        参加条件が確認できない、該当しない場合ご参加をお断りします。その場合参加費のご返金はございません。\n                    </p>\n                </div>\n                <div className={styles.content}>\n                    <h2>キャンセル</h2>\n                    <p>開催4日前までは<Link href=\"/user/details\"><a>ユーザー情報</a></Link>からキャンセルできます。</p>\n                    <p>開催3日前より当団体既定のキャンセル料金が発生し、web上でのキャンセルができません。以下の電話番号までご連絡ください。</p>\n                    <p>{phoneNumber}</p>\n                </div>\n                <div className={styles.content} dangerouslySetInnerHTML={{ __html: postData.contentHtml }}/>\n                <div className={styles.attention}>\n                    <h2>注意事項</h2>\n                    <div dangerouslySetInnerHTML={{ __html: attention.contentHtml }}/>\n                </div>\n                <div className={styles.ban}>\n                    <h2>禁止事項</h2>\n                    <div dangerouslySetInnerHTML={{ __html: ban.contentHtml }}/>\n                </div>\n            </article>\n        </Layout>\n    )\n}\n\n"]},"metadata":{},"sourceType":"module"}