{"ast":null,"code":"var _jsxFileName = \"/Users/tkak/sample/villageon/villageon/pages/user/details.js\",\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport Layout, { phoneNumber, url } from '../../components/layout';\nimport Head from 'next/head';\nimport styles from '../../styles/user.module.scss';\nimport { useState, useEffect } from 'react';\nimport AnimateHeight from 'react-animate-height';\nimport Router from 'next/router';\nimport Link from 'next/link';\nimport initFirebase from '../../components/initFirebase';\nimport firebase from \"firebase/app\";\nimport 'firebase/auth';\n\nrequire('firebase/auth');\n\nrequire(\"firebase/firestore\");\n\ninitFirebase();\nvar db = firebase.firestore();\nvar getOptions = {\n  source: 'cache'\n};\nexport var __N_SSG = true;\nexport default function details(_ref) {\n  _s();\n\n  var _this = this;\n\n  var allPostsData = _ref.allPostsData;\n\n  var _useState = useState(\"\"),\n      user = _useState[0],\n      setUser = _useState[1];\n\n  var _useState2 = useState(\"認証メールを送る\"),\n      verifyMessage = _useState2[0],\n      setVerifyMessage = _useState2[1];\n\n  var _useState3 = useState(\"\"),\n      toggleId = _useState3[0],\n      setToggleId = _useState3[1]; //name\n\n\n  var _useState4 = useState(\"\"),\n      nameError = _useState4[0],\n      setNameError = _useState4[1];\n\n  var _useState5 = useState(\"\"),\n      newFirst = _useState5[0],\n      setNewFirst = _useState5[1];\n\n  var _useState6 = useState(\"\"),\n      newLast = _useState6[0],\n      setNewLast = _useState6[1]; //mail\n\n\n  var _useState7 = useState(\"\"),\n      newMail = _useState7[0],\n      setNewMail = _useState7[1];\n\n  var _useState8 = useState(\"\"),\n      mailError = _useState8[0],\n      setMailError = _useState8[1];\n\n  var _useState9 = useState(false),\n      reAuth = _useState9[0],\n      setReAuth = _useState9[1]; //password\n\n\n  var _useState10 = useState(\"\"),\n      password = _useState10[0],\n      setPassword = _useState10[1];\n\n  var _useState11 = useState(\"\"),\n      newPassword = _useState11[0],\n      setNewPassword = _useState11[1];\n\n  var _useState12 = useState(\"\"),\n      passwordError = _useState12[0],\n      setPasswordError = _useState12[1];\n\n  var _useState13 = useState(\"\"),\n      newPasswordError = _useState13[0],\n      setNewPasswordError = _useState13[1];\n\n  var _useState14 = useState(true),\n      passwordToggle = _useState14[0],\n      setPasswordToggle = _useState14[1];\n\n  var _useState15 = useState(true),\n      newPasswordToggle = _useState15[0],\n      setNewPasswordToggle = _useState15[1]; //database\n\n\n  var _useState16 = useState(false),\n      admin = _useState16[0],\n      setAdmin = _useState16[1];\n\n  var _useState17 = useState([]),\n      events = _useState17[0],\n      setEvents = _useState17[1]; //useEffect\n\n\n  var _useState18 = useState(true),\n      mount = _useState18[0],\n      setMount = _useState18[1]; //cancel\n\n\n  var _useState19 = useState(\"\"),\n      cancelId = _useState19[0],\n      setCancelId = _useState19[1];\n\n  var _useState20 = useState([]),\n      canceledId = _useState20[0],\n      setCanceledId = _useState20[1];\n\n  var _useState21 = useState([]),\n      cancelErrorId = _useState21[0],\n      setCancelErrorId = _useState21[1]; //admin\n\n\n  var _useState22 = useState({}),\n      mensName = _useState22[0],\n      setMensName = _useState22[1];\n\n  var _useState23 = useState({}),\n      womensName = _useState23[0],\n      setWomensName = _useState23[1];\n\n  var _useState24 = useState({}),\n      mensEmail = _useState24[0],\n      setMensEmail = _useState24[1];\n\n  var _useState25 = useState({}),\n      womensEmail = _useState25[0],\n      setWomensEmail = _useState25[1];\n\n  var _useState26 = useState(\"\"),\n      eventId = _useState26[0],\n      setEventId = _useState26[1];\n\n  var _useState27 = useState([]),\n      eventMensName = _useState27[0],\n      setEventMensName = _useState27[1];\n\n  var _useState28 = useState([]),\n      eventMensMail = _useState28[0],\n      setEventMensMail = _useState28[1];\n\n  var _useState29 = useState([]),\n      eventWomensName = _useState29[0],\n      setEventWomensName = _useState29[1];\n\n  var _useState30 = useState([]),\n      eventWomensMail = _useState30[0],\n      setEventWomensMail = _useState30[1];\n\n  useEffect(function () {\n    if (mount) {\n      firebase.auth().onAuthStateChanged(function (user) {\n        if (user) {\n          // User is signed in.\n          setUser(user);\n        } else {\n          if (true) {\n            Router.push(\"/\");\n          } // No user is signed in.\n\n        }\n      });\n\n      if (user) {\n        db.collection(\"users\").doc(user.uid).get().then(function (doc) {\n          if (doc.exists) {\n            setEvents(doc.data().events);\n            setAdmin(doc.data().admin);\n\n            if (admin) {\n              var mensName = {};\n              var _womensName = {};\n              var _mensEmail = {};\n              var _womensEmail = {};\n              db.collection('events').get().then(function (querySnapshot) {\n                querySnapshot.docs.forEach(function (doc) {\n                  var nameForMens = [];\n                  var emailForMens = [];\n                  doc.data().mens.forEach(function (man) {\n                    nameForMens.push(man.name);\n                    emailForMens.push(man.mail);\n                  });\n                  var nameForWomens = [];\n                  var emailForWomens = [];\n                  doc.data().womens.forEach(function (woman) {\n                    nameForWomens.push(woman.name);\n                    emailForWomens.push(woman.mail);\n                  });\n                  mensName[doc.id] = nameForMens;\n                  _mensEmail[doc.id] = emailForMens;\n                  _womensName[doc.id] = nameForWomens;\n                  _womensEmail[doc.id] = emailForWomens;\n                });\n                setMensName(mensName);\n                setMensEmail(_mensEmail);\n                setWomensName(_womensName);\n                setWomensEmail(_womensEmail);\n              });\n            }\n\n            setMount(false);\n          } else {}\n        });\n      }\n    }\n  });\n  useEffect(function () {\n    if (user) {\n      db.collection(\"users\").doc(user.uid).get().then(function (doc) {\n        if (doc.exists) {\n          setEvents(doc.data().events);\n        }\n      });\n    }\n  }, [canceledId]);\n\n  var changeFirst = function changeFirst(event) {\n    setNewFirst(event.target.value);\n  };\n\n  var changeLast = function changeLast(event) {\n    setNewLast(event.target.value);\n  }; //change displayname to newer\n\n\n  var submitName = function submitName(event) {\n    user.updateProfile({\n      displayName: \"\".concat(newLast, \" \").concat(newFirst)\n    }).then(function () {\n      setToggleId(\"\");\n      setNewFirst(\"\");\n      setNewLast(\"\");\n    })[\"catch\"](function (error) {\n      setNameError(error.message);\n    });\n  }; //change email to newer\n\n\n  var submitMail = function submitMail() {\n    user.updateEmail(newMail).then(function () {\n      setToggleId(\"\");\n      setNewMail(\"\");\n      setMailError(\"\");\n    })[\"catch\"](function (error) {\n      if (error.code == \"auth/invalid-email\") {\n        setMailError(\"メールアドレスの形式が正しくないです\");\n      } else if (error.code == \"auth/email-already-in-use\") {\n        setMailError(\"既に使われています\");\n      } else if (error.code == \"auth/requires-recent-login\") {\n        setReAuth(true);\n      }\n    });\n  };\n\n  var submitMailAfterReAuth = function submitMailAfterReAuth() {\n    var cred = firebase.auth.EmailAuthProvider.credential(user.email, password);\n    user.reauthenticateWithCredential(cred).then(function () {\n      submitMail();\n      setPasswordError(\"\");\n      setToggleId(\"\");\n      setReAuth(false);\n    })[\"catch\"](function (error) {\n      if (error.code == \"auth/wrong-password\") {\n        setPasswordError(\"パスワードが違います\");\n      } else {\n        setPasswordError(error.message);\n      }\n    });\n  };\n\n  var changeMail = function changeMail(event) {\n    var mail = event.target.value;\n    setNewMail(mail);\n  }; //change password to newer\n\n\n  var submitPasswordAfterReAuth = function submitPasswordAfterReAuth() {\n    var cred = firebase.auth.EmailAuthProvider.credential(user.email, password);\n    user.reauthenticateWithCredential(cred).then(function () {\n      setPasswordError(\"\");\n      submitPassword();\n    })[\"catch\"](function (error) {\n      if (error.code == \"auth/wrong-password\") {\n        setPasswordError(\"パスワードが違います\");\n      } else {\n        setPasswordError(error.message);\n      }\n    });\n  };\n\n  var submitPassword = function submitPassword() {\n    user.updatePassword(newPassword).then(function () {\n      setPassword(\"\");\n      setPasswordError(\"\");\n      setToggleId(\"\");\n      setReAuth(false);\n    })[\"catch\"](function (error) {\n      if (error.code == \"auth/weak-password\") {\n        setNewPasswordError(\"6文字以上で設定してください\");\n      } else {\n        setNewPasswordError(error.message);\n      }\n    });\n  }; //switch password display or none\n\n\n  var togglePassword = function togglePassword() {\n    setPasswordToggle(!passwordToggle);\n  }; //switch newpassword display or none\n\n\n  var toggleNewPassword = function toggleNewPassword() {\n    setNewPasswordToggle(!newPasswordToggle);\n  };\n\n  var changePassword = function changePassword(event) {\n    var pass = event.target.value;\n    setPassword(pass);\n  };\n\n  var changeNewPassword = function changeNewPassword(event) {\n    var pass = event.target.value;\n    setNewPassword(pass);\n  }; //send verification for mail\n\n\n  var submitVerification = function submitVerification() {\n    var actionCodeSettings = {\n      url: \"\".concat(url, \"/user/details\")\n    };\n    user.sendEmailVerification(actionCodeSettings).then(function () {\n      setVerifyMessage(\"認証メールを送信しました。\");\n    })[\"catch\"](function (error) {\n      setVerifyMessage(error.code);\n    });\n  }; //signout\n\n\n  var handleSignOut = function handleSignOut() {\n    firebase.auth().signOut().then(function () {\n      Router.replace(\"/\");\n    })[\"catch\"](function (error) {// An error happened.\n    });\n  }; //reauthentication\n  //damy\n\n\n  var handleNone = function handleNone() {}; // toggle setting id\n\n\n  var changeId = function changeId(event) {\n    var newId = event.target.id;\n\n    if (newId == toggleId) {\n      setToggleId(\"\");\n    } else {\n      setToggleId(newId);\n    }\n  }; //delete account\n\n\n  var submitDelete = function submitDelete() {\n    var cred = firebase.auth.EmailAuthProvider.credential(user.email, password);\n    user.reauthenticateWithCredential(cred).then(function () {\n      setPasswordError(\"\");\n      db.collection(\"users\").doc(user.uid)[\"delete\"]().then(function () {\n        user[\"delete\"]();\n      });\n    })[\"catch\"](function (error) {\n      if (error.code == \"auth/wrong-password\") {\n        setPasswordError(\"パスワードが違います\");\n      } else {\n        setPasswordError(error.message);\n      }\n    });\n  }; //apper display to cancel\n\n\n  var displayCancel = function displayCancel() {\n    var id = event.target.id;\n    setCancelId(id);\n  };\n\n  var hideCancel = function hideCancel() {\n    setCancelId(\"\");\n  };\n\n  var judgeCancel = function judgeCancel(eventId, eventDate, eventPlace, eventTitle, eventGender, eventPrice) {\n    var today = new Date();\n    var year = today.getFullYear();\n    var month = today.getMonth() + 1;\n    var day = today.getDate();\n\n    if (year < Number(eventId.substr(0, 4))) {\n      submitCancel(eventId, eventDate, eventPlace, eventTitle, eventGender, eventPrice);\n    } else if (year == Number(eventId.substr(0, 4)) && month < Number(eventId.substr(4, 2))) {\n      submitCancel(eventId, eventDate, eventPlace, eventTitle, eventGender, eventPrice);\n    } else if (month == Number(eventId.substr(4, 2)) && day + 3 < Number(eventId.substr(6, 2))) {\n      submitCancel(eventId, eventDate, eventPlace, eventTitle, eventGender, eventPrice);\n    } else {\n      setCancelErrorId(eventId);\n    }\n  };\n\n  var submitCancel = function submitCancel(eventId, eventDate, eventPlace, eventTitle, eventGender, eventPrice) {\n    db.collection(\"users\").doc(user.uid).update({\n      events: firebase.firestore.FieldValue.arrayRemove({\n        id: eventId,\n        date: eventDate,\n        place: eventPlace,\n        title: eventTitle,\n        gender: eventGender,\n        price: eventPrice\n      })\n    }).then(function () {\n      setCanceledId(eventId);\n    })[\"catch\"](function (error) {});\n\n    if (eventGender == \"man\") {\n      db.collection(\"events\").doc(cancelId).update({\n        mens: firebase.firestore.FieldValue.arrayRemove({\n          id: user.uid,\n          mail: user.email,\n          name: user.displayName\n        })\n      }).then(function () {})[\"catch\"](function (error) {});\n    } else {\n      db.collection(\"events\").doc(cancelId).update({\n        womens: firebase.firestore.FieldValue.arrayRemove({\n          id: user.uid,\n          mail: user.email,\n          name: user.displayName\n        })\n      }).then(function () {})[\"catch\"](function (error) {});\n    }\n  };\n\n  var changeEventId = function changeEventId(event) {\n    var id = event.target.id;\n    setEventId(id);\n    setEventMensName(mensName[id]);\n    setEventMensMail(mensEmail[id]);\n    setEventWomensName(womensName[id]);\n    setEventWomensMail(womensEmail[id]);\n  };\n\n  return __jsx(Layout, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 391,\n      columnNumber: 9\n    }\n  }, __jsx(Head, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 392,\n      columnNumber: 13\n    }\n  }, __jsx(\"title\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 393,\n      columnNumber: 17\n    }\n  }, \"details\")), __jsx(\"article\", {\n    className: \"bg-white p-6 mt-6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 395,\n      columnNumber: 13\n    }\n  }, __jsx(\"div\", {\n    className: \"w-full\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 396,\n      columnNumber: 17\n    }\n  }, __jsx(\"div\", {\n    className: \" border-b-2 py-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 398,\n      columnNumber: 21\n    }\n  }, __jsx(\"p\", {\n    className: \"text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 399,\n      columnNumber: 25\n    }\n  }, \"\\u540D\\u524D\"), __jsx(\"p\", {\n    className: \"text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 400,\n      columnNumber: 25\n    }\n  }, user.displayName), __jsx(\"p\", {\n    className: \"text-blue-600 cursor-pointer text-xs text-center\",\n    id: \"name\",\n    onClick: changeId,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 401,\n      columnNumber: 25\n    }\n  }, \"\\u7DE8\\u96C6\"), __jsx(AnimateHeight, {\n    duration: 300,\n    height: toggleId === \"name\" ? 'auto' : 0,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 402,\n      columnNumber: 25\n    }\n  }, __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 405,\n      columnNumber: 29\n    }\n  }, __jsx(\"input\", {\n    type: \"text\",\n    placeholder: \"\\u59D3\",\n    onChange: changeLast,\n    className: styles.inputName,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 406,\n      columnNumber: 33\n    }\n  }), __jsx(\"input\", {\n    type: \"text\",\n    placeholder: \"\\u540D\",\n    onChange: changeFirst,\n    className: styles.inputName,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 407,\n      columnNumber: 33\n    }\n  })), __jsx(\"p\", {\n    className: styles.alert,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 409,\n      columnNumber: 29\n    }\n  }, nameError), __jsx(\"input\", {\n    className: styles.inputButton,\n    type: \"button\",\n    onClick: submitName,\n    value: \"\\u5909\\u66F4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 410,\n      columnNumber: 29\n    }\n  }))), __jsx(\"div\", {\n    className: \"border-b-2 py-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 414,\n      columnNumber: 21\n    }\n  }, __jsx(\"p\", {\n    className: \"text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 415,\n      columnNumber: 25\n    }\n  }, \"\\u30E1\\u30FC\\u30EB\\u30A2\\u30C9\\u30EC\\u30B9\"), __jsx(\"p\", {\n    className: \"text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 416,\n      columnNumber: 25\n    }\n  }, user.email), __jsx(\"p\", {\n    className: \"text-blue-600 cursor-pointer text-xs text-center\",\n    id: \"mail\",\n    onClick: changeId,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 417,\n      columnNumber: 25\n    }\n  }, \"\\u7DE8\\u96C6\"), __jsx(AnimateHeight, {\n    duration: 300,\n    height: toggleId === \"mail\" ? 'auto' : 0,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 418,\n      columnNumber: 25\n    }\n  }, __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 421,\n      columnNumber: 29\n    }\n  }, __jsx(\"input\", {\n    className: styles.input,\n    type: \"text\",\n    placeholder: \"\\u65B0\\u3057\\u3044\\u30E1\\u30FC\\u30EB\\u30A2\\u30C9\\u30EC\\u30B9\",\n    onChange: changeMail,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 422,\n      columnNumber: 33\n    }\n  })), __jsx(\"p\", {\n    className: styles.alert,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 424,\n      columnNumber: 29\n    }\n  }, mailError), __jsx(\"input\", {\n    className: styles.inputButton,\n    type: \"button\",\n    onClick: submitMail,\n    value: \"\\u5909\\u66F4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 425,\n      columnNumber: 29\n    }\n  })), __jsx(AnimateHeight, {\n    duration: 300,\n    height: reAuth ? 'auto' : 0,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 427,\n      columnNumber: 25\n    }\n  }, __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 430,\n      columnNumber: 33\n    }\n  }, __jsx(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 431,\n      columnNumber: 37\n    }\n  }, \"\\u6642\\u9593\\u304C\\u7D4C\\u3063\\u3066\\u3044\\u308B\\u305F\\u3081\\u30D1\\u30B9\\u30EF\\u30FC\\u30C9\\u3092\\u5165\\u529B\\u3057\\u3066\\u304F\\u3060\\u3055\\u3044\"), __jsx(\"div\", {\n    className: styles.passBlock,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 432,\n      columnNumber: 37\n    }\n  }, __jsx(\"input\", {\n    className: styles.inputPass,\n    placeholder: \"\\u73FE\\u5728\\u306E\\u30D1\\u30B9\\u30EF\\u30FC\\u30C9\",\n    type: passwordToggle ? \"password\" : \"text\",\n    onChange: changePassword,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 433,\n      columnNumber: 41\n    }\n  }), __jsx(\"input\", {\n    className: styles.passButton,\n    type: \"button\",\n    onClick: togglePassword,\n    value: passwordToggle ? \"表示\" : \"非表示\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 434,\n      columnNumber: 41\n    }\n  }))), __jsx(\"p\", {\n    className: styles.alert,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 437,\n      columnNumber: 33\n    }\n  }, passwordError), __jsx(\"input\", {\n    className: styles.inputButton,\n    type: \"button\",\n    onClick: submitMailAfterReAuth,\n    value: \"\\u8A8D\\u8A3C\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 438,\n      columnNumber: 33\n    }\n  }))), __jsx(\"div\", {\n    className: \"border-b-2 py-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 442,\n      columnNumber: 21\n    }\n  }, __jsx(\"p\", {\n    className: \"text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 443,\n      columnNumber: 25\n    }\n  }, \"\\u30D1\\u30B9\\u30EF\\u30FC\\u30C9\"), __jsx(\"p\", {\n    className: \"text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 444,\n      columnNumber: 25\n    }\n  }, \"\\u25CF\\u25CF\\u25CF\\u25CF\\u25CF\\u25CF\"), __jsx(\"p\", {\n    className: \"text-blue-600 cursor-pointer text-xs text-center\",\n    id: \"password\",\n    onClick: changeId,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 445,\n      columnNumber: 25\n    }\n  }, \"\\u7DE8\\u96C6\"), __jsx(AnimateHeight, {\n    duration: 300,\n    height: toggleId === \"password\" ? 'auto' : 0,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 446,\n      columnNumber: 25\n    }\n  }, __jsx(\"div\", {\n    className: styles.passBlock,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 449,\n      columnNumber: 29\n    }\n  }, __jsx(\"input\", {\n    className: styles.inputPass,\n    placeholder: \"\\u73FE\\u5728\\u306E\\u30D1\\u30B9\\u30EF\\u30FC\\u30C9\",\n    type: passwordToggle ? \"password\" : \"text\",\n    onChange: changePassword,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 450,\n      columnNumber: 33\n    }\n  }), __jsx(\"input\", {\n    className: styles.passButton,\n    type: \"button\",\n    onClick: togglePassword,\n    value: passwordToggle ? \"表示\" : \"非表示\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 455,\n      columnNumber: 33\n    }\n  })), __jsx(\"p\", {\n    className: styles.alert,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 457,\n      columnNumber: 29\n    }\n  }, passwordError), __jsx(\"div\", {\n    className: styles.passBlock,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 458,\n      columnNumber: 29\n    }\n  }, __jsx(\"input\", {\n    className: styles.inputPass,\n    placeholder: \"\\u65B0\\u3057\\u3044\\u30D1\\u30B9\\u30EF\\u30FC\\u30C9\",\n    type: newPasswordToggle ? \"password\" : \"text\",\n    onChange: changeNewPassword,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 459,\n      columnNumber: 33\n    }\n  }), __jsx(\"input\", {\n    className: styles.passButton,\n    type: \"button\",\n    onClick: toggleNewPassword,\n    value: newPasswordToggle ? \"表示\" : \"非表示\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 464,\n      columnNumber: 33\n    }\n  })), __jsx(\"p\", {\n    className: styles.alert,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 466,\n      columnNumber: 29\n    }\n  }, newPasswordError), __jsx(\"input\", {\n    className: styles.inputButton,\n    type: \"button\",\n    onClick: submitPasswordAfterReAuth,\n    value: \"\\u5909\\u66F4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 467,\n      columnNumber: 29\n    }\n  }))), __jsx(\"div\", {\n    className: \"border-b-2 py-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 471,\n      columnNumber: 21\n    }\n  }, __jsx(\"div\", {\n    className: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 472,\n      columnNumber: 25\n    }\n  }, __jsx(\"p\", {\n    className: \"text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 473,\n      columnNumber: 29\n    }\n  }, \"\\u30E1\\u30FC\\u30EB\\u8A8D\\u8A3C\"), __jsx(\"p\", {\n    className: \"text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 474,\n      columnNumber: 29\n    }\n  }, user.emailVerified ? \"認証済み\" : \"未認証\"), __jsx(\"p\", {\n    className: \"text-blue-600 cursor-pointer text-xs text-center\",\n    onClick: user.emailVerified ? handleNone : submitVerification,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 475,\n      columnNumber: 29\n    }\n  }, user.emailVerified ? \"\" : verifyMessage)))), __jsx(\"div\", {\n    className: \"py-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 484,\n      columnNumber: 17\n    }\n  }, __jsx(\"p\", {\n    className: \"text-blue-600 cursor-pointer text-center\",\n    onClick: handleSignOut,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 485,\n      columnNumber: 21\n    }\n  }, \"\\u30ED\\u30B0\\u30A2\\u30A6\\u30C8\"), __jsx(\"p\", {\n    id: \"delete\",\n    className: \"text-red-600 cursor-pointer text-center\",\n    onClick: changeId,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 486,\n      columnNumber: 21\n    }\n  }, \"\\u30A2\\u30AB\\u30A6\\u30F3\\u30C8\\u3092\\u524A\\u9664\\u3059\\u308B\"), __jsx(AnimateHeight, {\n    duration: 300,\n    height: toggleId === \"delete\" ? 'auto' : 0,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 487,\n      columnNumber: 21\n    }\n  }, __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 490,\n      columnNumber: 25\n    }\n  }, __jsx(\"input\", {\n    placeholder: \"\\u73FE\\u5728\\u306E\\u30D1\\u30B9\\u30EF\\u30FC\\u30C9\",\n    type: passwordToggle ? \"password\" : \"text\",\n    onChange: changePassword,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 491,\n      columnNumber: 29\n    }\n  }), __jsx(\"input\", {\n    type: \"button\",\n    onClick: togglePassword,\n    value: \"\\u8868\\u793A\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 495,\n      columnNumber: 29\n    }\n  })), __jsx(\"p\", {\n    className: styles.alert,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 497,\n      columnNumber: 25\n    }\n  }, passwordError), __jsx(\"input\", {\n    type: \"button\",\n    onClick: submitDelete,\n    value: \"\\u524A\\u9664\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 498,\n      columnNumber: 25\n    }\n  })))), __jsx(\"article\", {\n    className: \"bg-white p-6 mt-6 mb-6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 502,\n      columnNumber: 13\n    }\n  }, __jsx(\"div\", {\n    className: \"w-full\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 503,\n      columnNumber: 17\n    }\n  }, __jsx(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 504,\n      columnNumber: 21\n    }\n  }, \"\\u53C2\\u52A0\\u4E88\\u5B9A\\u306E\\u30A4\\u30D9\\u30F3\\u30C8\\u30EA\\u30B9\\u30C8\"), events ? events.map(function (event) {\n    return __jsx(\"li\", {\n      key: event.id,\n      className: styles.eventList,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 506,\n        columnNumber: 29\n      }\n    }, __jsx(\"div\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 507,\n        columnNumber: 33\n      }\n    }, __jsx(Link, {\n      href: \"/posts/[id]\",\n      as: \"/posts/\".concat(event.id),\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 508,\n        columnNumber: 37\n      }\n    }, __jsx(\"a\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 509,\n        columnNumber: 41\n      }\n    }, event.title)), __jsx(\"p\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 511,\n        columnNumber: 37\n      }\n    }, event.date), __jsx(\"p\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 512,\n        columnNumber: 37\n      }\n    }, event.place), __jsx(\"div\", {\n      className: styles.fee,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 513,\n        columnNumber: 37\n      }\n    }, __jsx(\"p\", {\n      className: styles.mens,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 514,\n        columnNumber: 41\n      }\n    }, event.gender == \"man\" ? \"男性\" : \"女性\"), __jsx(\"p\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 515,\n        columnNumber: 41\n      }\n    }, \"1\\u4EBA\"), __jsx(\"p\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 516,\n        columnNumber: 41\n      }\n    }, event.price, \"\\u5186\")), cancelId !== event.id ? __jsx(\"div\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 519,\n        columnNumber: 41\n      }\n    }, __jsx(\"input\", {\n      type: \"button\",\n      value: \"\\u30AD\\u30E3\\u30F3\\u30BB\\u30EB\",\n      id: event.id,\n      onClick: displayCancel,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 520,\n        columnNumber: 45\n      }\n    })) : __jsx(\"div\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 523,\n        columnNumber: 41\n      }\n    }, cancelErrorId !== event.id ? __jsx(\"div\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 525,\n        columnNumber: 49\n      }\n    }, __jsx(\"p\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 526,\n        columnNumber: 53\n      }\n    }, \"\\u4E0A\\u8A18\\u306E\\u30A4\\u30D9\\u30F3\\u30C8\\u306E\\u4E88\\u7D04\\u3092\\u30AD\\u30E3\\u30F3\\u30BB\\u30EB\\u3057\\u307E\\u3059\\u304C\\u3088\\u308D\\u3057\\u3044\\u3067\\u3059\\u304B\"), __jsx(\"div\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 527,\n        columnNumber: 53\n      }\n    }, __jsx(\"input\", {\n      type: \"button\",\n      value: \"\\u306F\\u3044\",\n      onClick: function onClick(e) {\n        return judgeCancel(event.id, event.date, event.place, event.title, event.gender, event.price, e);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 528,\n        columnNumber: 57\n      }\n    }), __jsx(\"input\", {\n      type: \"button\",\n      value: \"\\u3044\\u3044\\u3048\",\n      onClick: hideCancel,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 529,\n        columnNumber: 57\n      }\n    }))) : __jsx(\"div\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 533,\n        columnNumber: 49\n      }\n    }, __jsx(\"p\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 534,\n        columnNumber: 53\n      }\n    }, \"web\\u4E0A\\u3067\\u30AD\\u30E3\\u30F3\\u30BB\\u30EB\\u53EF\\u80FD\\u306A\\u65E5\\u306B\\u3061\\u3092\\u8D85\\u3048\\u3066\\u3044\\u307E\\u3059\\u3002\"), __jsx(\"p\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 535,\n        columnNumber: 53\n      }\n    }, \"\\u304A\\u624B\\u6570\\u3067\\u3059\\u304C\\u4EE5\\u4E0B\\u306E\\u96FB\\u8A71\\u756A\\u53F7\\u307E\\u3067\\u3054\\u9023\\u7D61\\u304F\\u3060\\u3055\\u3044\"), __jsx(\"p\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 536,\n        columnNumber: 53\n      }\n    }, phoneNumber)))));\n  }) : \"\"), admin ? __jsx(\"div\", {\n    className: styles.detailWrapper,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 546,\n      columnNumber: 21\n    }\n  }, __jsx(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 547,\n      columnNumber: 25\n    }\n  }, \"\\u30A4\\u30D9\\u30F3\\u30C8\\u30EA\\u30B9\\u30C8\"), __jsx(\"ul\", {\n    className: styles.mainWrapper,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 548,\n      columnNumber: 25\n    }\n  }, allPostsData.map(function (_ref2) {\n    var id = _ref2.id,\n        date = _ref2.date,\n        title = _ref2.title;\n    return __jsx(\"li\", {\n      className: styles.eventList,\n      key: \"admin\".concat(id),\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 551,\n        columnNumber: 33\n      }\n    }, __jsx(\"h3\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 552,\n        columnNumber: 37\n      }\n    }, title), __jsx(\"p\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 553,\n        columnNumber: 37\n      }\n    }, date), __jsx(\"p\", {\n      onClick: changeEventId,\n      id: id,\n      className: styles.link,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 554,\n        columnNumber: 37\n      }\n    }, \"\\u8A73\\u7D30\"), eventId == id ? __jsx(\"div\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 556,\n        columnNumber: 41\n      }\n    }, __jsx(\"p\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 557,\n        columnNumber: 45\n      }\n    }, \"\\u5408\\u8A08\\u4EBA\\u6570 \", eventMensName.length + eventWomensName.length, \"\\u4EBA\"), __jsx(\"p\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 558,\n        columnNumber: 45\n      }\n    }, \"\\u7537\\u6027\\u53C2\\u52A0\\u8005\"), __jsx(\"div\", {\n      className: styles.adminUsers,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 559,\n        columnNumber: 45\n      }\n    }, __jsx(\"div\", {\n      className: styles.adminName,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 560,\n        columnNumber: 49\n      }\n    }, eventMensName.map(function (name) {\n      return __jsx(\"p\", {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 562,\n          columnNumber: 57\n        }\n      }, name);\n    })), __jsx(\"div\", {\n      className: styles.adminMail,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 565,\n        columnNumber: 49\n      }\n    }, eventMensMail.map(function (mail) {\n      return __jsx(\"p\", {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 567,\n          columnNumber: 57\n        }\n      }, mail);\n    }))), __jsx(\"p\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 571,\n        columnNumber: 45\n      }\n    }, \"\\u5973\\u6027\\u53C2\\u52A0\\u8005\"), __jsx(\"div\", {\n      className: styles.adminUsers,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 572,\n        columnNumber: 45\n      }\n    }, __jsx(\"div\", {\n      className: styles.adminName,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 573,\n        columnNumber: 49\n      }\n    }, eventWomensName.map(function (name) {\n      return __jsx(\"p\", {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 575,\n          columnNumber: 57\n        }\n      }, name);\n    })), __jsx(\"div\", {\n      className: styles.adminMail,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 578,\n        columnNumber: 49\n      }\n    }, eventWomensMail.map(function (mail) {\n      return __jsx(\"p\", {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 580,\n          columnNumber: 57\n        }\n      }, mail);\n    })))) : __jsx(\"div\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 586,\n        columnNumber: 37\n      }\n    }));\n  }))) : __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 592,\n      columnNumber: 17\n    }\n  })));\n}\n\n_s(details, \"39D+E3lfQJubKJ314Feti90/vuI=\");","map":{"version":3,"sources":["/Users/tkak/sample/villageon/villageon/pages/user/details.js"],"names":["Layout","phoneNumber","url","Head","styles","useState","useEffect","AnimateHeight","Router","Link","initFirebase","firebase","require","db","firestore","getOptions","source","details","allPostsData","user","setUser","verifyMessage","setVerifyMessage","toggleId","setToggleId","nameError","setNameError","newFirst","setNewFirst","newLast","setNewLast","newMail","setNewMail","mailError","setMailError","reAuth","setReAuth","password","setPassword","newPassword","setNewPassword","passwordError","setPasswordError","newPasswordError","setNewPasswordError","passwordToggle","setPasswordToggle","newPasswordToggle","setNewPasswordToggle","admin","setAdmin","events","setEvents","mount","setMount","cancelId","setCancelId","canceledId","setCanceledId","cancelErrorId","setCancelErrorId","mensName","setMensName","womensName","setWomensName","mensEmail","setMensEmail","womensEmail","setWomensEmail","eventId","setEventId","eventMensName","setEventMensName","eventMensMail","setEventMensMail","eventWomensName","setEventWomensName","eventWomensMail","setEventWomensMail","auth","onAuthStateChanged","push","collection","doc","uid","get","then","exists","data","querySnapshot","docs","forEach","nameForMens","emailForMens","mens","man","name","mail","nameForWomens","emailForWomens","womens","woman","id","changeFirst","event","target","value","changeLast","submitName","updateProfile","displayName","error","message","submitMail","updateEmail","code","submitMailAfterReAuth","cred","EmailAuthProvider","credential","email","reauthenticateWithCredential","changeMail","submitPasswordAfterReAuth","submitPassword","updatePassword","togglePassword","toggleNewPassword","changePassword","pass","changeNewPassword","submitVerification","actionCodeSettings","sendEmailVerification","handleSignOut","signOut","replace","handleNone","changeId","newId","submitDelete","displayCancel","hideCancel","judgeCancel","eventDate","eventPlace","eventTitle","eventGender","eventPrice","today","Date","year","getFullYear","month","getMonth","day","getDate","Number","substr","submitCancel","update","FieldValue","arrayRemove","date","place","title","gender","price","changeEventId","inputName","alert","inputButton","input","passBlock","inputPass","passButton","emailVerified","map","eventList","fee","e","detailWrapper","mainWrapper","link","length","adminUsers","adminName","adminMail"],"mappings":"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","sourcesContent":["import Layout, { phoneNumber, url }from '../../components/layout'\nimport Head from 'next/head'\nimport styles from '../../styles/user.module.scss'\nimport { useState, useEffect } from 'react'\nimport AnimateHeight from 'react-animate-height'\nimport Router from 'next/router'\nimport Link from 'next/link'\nimport { getSortedPostsData } from '../../lib/posts'\n\nimport initFirebase from '../../components/initFirebase'\nimport firebase from \"firebase/app\"\nimport 'firebase/auth'\nrequire('firebase/auth')\nrequire(\"firebase/firestore\")\n\ninitFirebase()\nvar db = firebase.firestore()\nvar getOptions = {\n    source: 'cache'\n}\n\nexport async function getStaticProps() {\n    const allPostsData = getSortedPostsData()\n    return {\n      props: {\n        allPostsData\n      }\n    }\n  }\n\n\n\n\nexport default function details({ allPostsData }) {\n    const [user, setUser] = useState(\"\")\n    const [verifyMessage, setVerifyMessage] = useState(\"認証メールを送る\")\n    const [toggleId, setToggleId] = useState(\"\")\n    //name\n    const [nameError, setNameError] = useState(\"\")\n    const [newFirst, setNewFirst] = useState(\"\")\n    const [newLast, setNewLast] = useState(\"\")\n    //mail\n    const [newMail, setNewMail] = useState(\"\")\n    const [mailError, setMailError] = useState(\"\")\n    const [reAuth, setReAuth] = useState(false)\n    //password\n    const [password, setPassword] = useState(\"\")\n    const [newPassword, setNewPassword] = useState(\"\")\n    const [passwordError, setPasswordError] = useState(\"\")\n    const [newPasswordError, setNewPasswordError] = useState(\"\")\n    const [passwordToggle, setPasswordToggle] = useState(true)\n    const [newPasswordToggle, setNewPasswordToggle] = useState(true)\n    //database\n    const [admin, setAdmin] = useState(false) \n    const [events, setEvents] = useState([])\n    //useEffect\n    const [mount, setMount] = useState(true)\n    //cancel\n    const [cancelId, setCancelId] = useState(\"\")\n    const [canceledId, setCanceledId] = useState([])\n    const [cancelErrorId, setCancelErrorId] = useState([])\n    //admin\n    const [mensName, setMensName] = useState({})\n    const [womensName, setWomensName] = useState({})\n    const [mensEmail, setMensEmail] = useState({})\n    const [womensEmail, setWomensEmail] = useState({})\n    const [eventId, setEventId] = useState(\"\")\n    const [eventMensName, setEventMensName] = useState([])\n    const [eventMensMail, setEventMensMail] = useState([])\n    const [eventWomensName, setEventWomensName] = useState([])\n    const [eventWomensMail, setEventWomensMail] = useState([])\n\n    \n\n    \n    useEffect(() => {\n        if (mount) {\n            firebase.auth().onAuthStateChanged(function(user) {\n                if (user) {\n                    // User is signed in.\n                    setUser(user)\n                } else {\n                    if (process.browser) {\n                        Router.push(\"/\")\n                    }\n                    // No user is signed in.\n                }\n            })\n            if (user) {\n                db.collection(\"users\").doc(user.uid).get().then(function(doc) {\n                    if (doc.exists) {\n                        setEvents(doc.data().events)\n                        setAdmin(doc.data().admin)\n                        if (admin) {\n                            var mensName = {}\n                            const womensName = {}\n                            const mensEmail = {}\n                            const womensEmail = {}\n                            db.collection('events').get().then(function(querySnapshot) {\n                                querySnapshot.docs.forEach(doc => {\n                                    const nameForMens = []\n                                    const emailForMens = []\n                                    doc.data().mens.forEach(man => {\n                                        nameForMens.push(man.name)\n                                        emailForMens.push(man.mail)\n                                    })\n                                    \n                                    const nameForWomens = []\n                                    const emailForWomens = []\n                                    doc.data().womens.forEach(woman => {\n                                        nameForWomens.push(woman.name)\n                                        emailForWomens.push(woman.mail)\n                                    })\n                                    \n                                    mensName[doc.id] = nameForMens\n                                    mensEmail[doc.id] = emailForMens\n                                                                        \n                                    womensName[doc.id] = nameForWomens\n                                    womensEmail[doc.id] = emailForWomens\n                                })\n                                setMensName(mensName)\n                                setMensEmail(mensEmail)\n                                \n                                setWomensName(womensName)\n                                setWomensEmail(womensEmail)\n                                \n                            })\n                        }\n                        setMount(false)\n                    } else {\n                    }\n                })\n            }\n        }        \n    })\n\n    useEffect(() => {\n        if (user) {\n            db.collection(\"users\").doc(user.uid).get().then(function(doc) {\n                if (doc.exists) {\n                    setEvents(doc.data().events)\n                }\n            })\n        }\n    },[canceledId])\n    \n\n    const changeFirst = event => {\n        setNewFirst(event.target.value)\n    }\n\n    const changeLast = event => {\n        setNewLast(event.target.value)\n    }\n\n    //change displayname to newer\n    const submitName = event => {\n        user.updateProfile({\n            displayName: `${newLast} ${newFirst}`\n        }).then(function() {\n            setToggleId(\"\")\n            setNewFirst(\"\")\n            setNewLast(\"\")\n        }) .catch(function(error) {\n            setNameError(error.message)\n        })\n    }\n\n    //change email to newer\n    const submitMail = () => {\n        user.updateEmail(newMail).then(\n            function() {\n                setToggleId(\"\")\n                setNewMail(\"\")\n                setMailError(\"\")\n            }).catch(function(error) {\n                if (error.code == \"auth/invalid-email\") {\n                    setMailError(\"メールアドレスの形式が正しくないです\")\n                } else if (error.code == \"auth/email-already-in-use\") {\n                    setMailError(\"既に使われています\")\n                } else if (error.code == \"auth/requires-recent-login\") {\n                    setReAuth(true)\n                }\n            }\n        )\n    }\n\n    const submitMailAfterReAuth = () => {\n        var cred = firebase.auth.EmailAuthProvider.credential(user.email, password)\n        user.reauthenticateWithCredential(cred).then(\n            function(){\n                submitMail()\n                setPasswordError(\"\")\n                setToggleId(\"\")\n                setReAuth(false)\n            }).catch(function(error){\n                if (error.code == \"auth/wrong-password\") {\n                    setPasswordError(\"パスワードが違います\")\n                } else {\n                    setPasswordError(error.message)\n                }\n            })\n    }\n\n    const changeMail = (event) => {\n        var mail = event.target.value\n        setNewMail(mail)\n    }\n\n    //change password to newer\n    const submitPasswordAfterReAuth = () => {\n        var cred = firebase.auth.EmailAuthProvider.credential(user.email, password)\n        user.reauthenticateWithCredential(cred).then(\n            function(){\n                setPasswordError(\"\")\n                submitPassword()\n                \n            }).catch(function(error){\n                if (error.code == \"auth/wrong-password\") {\n                    setPasswordError(\"パスワードが違います\")\n                } else {\n                    setPasswordError(error.message)\n                }\n            })\n    }\n\n    const submitPassword = () => {\n        user.updatePassword(newPassword).then(function() {\n            setPassword(\"\")\n            setPasswordError(\"\")\n            setToggleId(\"\")\n            setReAuth(false)\n        }).catch(function(error) {\n            if (error.code == \"auth/weak-password\") {\n                setNewPasswordError(\"6文字以上で設定してください\")\n            } else {\n                setNewPasswordError(error.message)\n            }\n        })\n    }\n\n    //switch password display or none\n    const togglePassword = () => {\n        setPasswordToggle(!passwordToggle)\n    }\n\n    //switch newpassword display or none\n    const toggleNewPassword = () => {\n        setNewPasswordToggle(!newPasswordToggle)\n    }\n\n    \n    const changePassword = (event) => {\n        var pass = event.target.value\n        setPassword(pass)\n    }\n\n    const changeNewPassword = (event) => {\n        var pass = event.target.value\n        setNewPassword(pass)\n    }\n\n    //send verification for mail\n    const submitVerification = ()　=> {\n        var actionCodeSettings = {\n            url: `${url}/user/details`,\n        }\n        user.sendEmailVerification(actionCodeSettings).then(function() {\n            setVerifyMessage(\"認証メールを送信しました。\")\n        }).catch(function(error) {\n            setVerifyMessage(error.code)\n        })\n    }\n\n    //signout\n    const handleSignOut = () => {\n        firebase.auth().signOut().then(function() {\n            Router.replace(\"/\")\n          }).catch(function(error) {\n            // An error happened.\n          });\n    }\n\n    //reauthentication\n\n    //damy\n    const handleNone = () => {\n    }\n\n    // toggle setting id\n    const changeId = (event) => {\n        var newId = event.target.id\n        if (newId == toggleId) {\n            setToggleId(\"\")\n        } else {\n            setToggleId(newId)\n        }\n    }\n\n    //delete account\n    const submitDelete = () => {\n        var cred = firebase.auth.EmailAuthProvider.credential(user.email, password)\n        user.reauthenticateWithCredential(cred).then(\n            function(){\n                setPasswordError(\"\")\n                db.collection(\"users\").doc(user.uid).delete().then(function() {\n                    user.delete()\n                })\n            }).catch(function(error){\n                if (error.code == \"auth/wrong-password\") {\n                    setPasswordError(\"パスワードが違います\")\n                } else {\n                    setPasswordError(error.message)\n                }\n            })\n    }\n\n\n    //apper display to cancel\n    const displayCancel = () => {\n        var id = event.target.id\n        setCancelId(id)\n    }\n    const hideCancel = () => {\n        setCancelId(\"\")\n    }\n\n    const judgeCancel = (eventId, eventDate, eventPlace, eventTitle, eventGender, eventPrice) => {\n        var today = new Date()\n        var year = today.getFullYear()\n        var month = today.getMonth()+1\n        var day = today.getDate()\n        if (year < Number(eventId.substr(0,4))) {\n            submitCancel(eventId, eventDate, eventPlace, eventTitle, eventGender, eventPrice)\n        } else if (year == Number(eventId.substr(0,4)) && month < Number(eventId.substr(4,2))) {\n            submitCancel(eventId, eventDate, eventPlace, eventTitle, eventGender, eventPrice)\n        } else if (month == Number(eventId.substr(4,2)) && day+3 < Number(eventId.substr(6,2))) {\n            submitCancel(eventId, eventDate, eventPlace, eventTitle, eventGender, eventPrice)\n        } else {\n            setCancelErrorId(eventId)\n        }\n    }\n\n    const submitCancel = (eventId, eventDate, eventPlace, eventTitle, eventGender, eventPrice) => {\n        db.collection(\"users\").doc(user.uid).update({\n            events: firebase.firestore.FieldValue.arrayRemove({\n                id: eventId,\n                date: eventDate,\n                place: eventPlace,\n                title: eventTitle,\n                gender: eventGender,\n                price: eventPrice\n            })\n        }).then(function(){\n            setCanceledId(eventId)\n        }).catch(function(error){\n        })\n        if (eventGender == \"man\") {\n            db.collection(\"events\").doc(cancelId).update({\n                mens: firebase.firestore.FieldValue.arrayRemove({\n                    id: user.uid,\n                    mail: user.email,\n                    name: user.displayName,\n                })\n            }).then(function(){\n            }).catch(function(error){\n            })\n        } else {\n            db.collection(\"events\").doc(cancelId).update({\n                womens: firebase.firestore.FieldValue.arrayRemove({\n                    id: user.uid,\n                    mail: user.email,\n                    name: user.displayName,\n                })\n            }).then(function(){\n            }).catch(function(error){\n            })\n        }\n    }\n\n    const changeEventId = (event) => {\n        var id = event.target.id\n        setEventId(id)\n        setEventMensName(mensName[id])\n        setEventMensMail(mensEmail[id])\n        setEventWomensName(womensName[id])\n        setEventWomensMail(womensEmail[id])\n    }\n\n    return (\n        <Layout>\n            <Head>\n                <title>details</title>\n            </Head>\n            <article className=\"bg-white p-6 mt-6\">\n                <div className=\"w-full\">\n                    {/*name block*/}\n                    <div className=\" border-b-2 py-4\">\n                        <p className=\"text-center\">名前</p>\n                        <p className=\"text-center\">{user.displayName}</p>\n                        <p className=\"text-blue-600 cursor-pointer text-xs text-center\" id=\"name\" onClick={changeId}>編集</p>\n                        <AnimateHeight\n                            duration={300}\n                            height={toggleId === \"name\" ? 'auto' : 0}>\n                            <div>\n                                <input type=\"text\" placeholder=\"姓\" onChange={changeLast} className={styles.inputName}/>\n                                <input type=\"text\" placeholder=\"名\" onChange={changeFirst} className={styles.inputName}/>\n                            </div>\n                            <p className={styles.alert}>{nameError}</p>\n                            <input className={styles.inputButton} type=\"button\" onClick={submitName} value=\"変更\"/>\n                        </AnimateHeight>\n                    </div>\n                    {/*mail block*/}\n                    <div className=\"border-b-2 py-4\">\n                        <p className=\"text-center\">メールアドレス</p>\n                        <p className=\"text-center\">{user.email}</p>\n                        <p className=\"text-blue-600 cursor-pointer text-xs text-center\" id=\"mail\" onClick={changeId}>編集</p>\n                        <AnimateHeight\n                            duration={300}\n                            height={toggleId === \"mail\" ? 'auto' : 0}>\n                            <div>\n                                <input className={styles.input} type=\"text\" placeholder=\"新しいメールアドレス\" onChange={changeMail}/>\n                            </div>\n                            <p className={styles.alert}>{mailError}</p>\n                            <input className={styles.inputButton} type=\"button\" onClick={submitMail} value=\"変更\"/>\n                        </AnimateHeight>\n                        <AnimateHeight\n                            duration={300}\n                            height={reAuth ? 'auto' : 0}>\n                                <div>\n                                    <p>時間が経っているためパスワードを入力してください</p>\n                                    <div className={styles.passBlock}>\n                                        <input className={styles.inputPass} placeholder=\"現在のパスワード\" type={passwordToggle ? \"password\" : \"text\"} onChange={changePassword}/>\n                                        <input className={styles.passButton} type=\"button\" onClick={togglePassword} value={passwordToggle ? \"表示\" : \"非表示\"}/>\n                                    </div>\n                                </div>\n                                <p className={styles.alert}>{passwordError}</p>\n                                <input className={styles.inputButton} type=\"button\" onClick={submitMailAfterReAuth} value=\"認証\"/>\n                        </AnimateHeight>\n                    </div>\n                    {/*password block*/}\n                    <div className=\"border-b-2 py-4\">\n                        <p className=\"text-center\">パスワード</p>\n                        <p className=\"text-center\">●●●●●●</p>\n                        <p className=\"text-blue-600 cursor-pointer text-xs text-center\" id=\"password\" onClick={changeId}>編集</p>\n                        <AnimateHeight\n                            duration={300}\n                            height={toggleId === \"password\" ? 'auto' : 0}>\n                            <div className={styles.passBlock}>\n                                <input\n                                    className={styles.inputPass}\n                                    placeholder=\"現在のパスワード\"\n                                    type={passwordToggle ? \"password\" : \"text\"}\n                                    onChange={changePassword}/>\n                                <input className={styles.passButton} type=\"button\" onClick={togglePassword} value={passwordToggle ? \"表示\" : \"非表示\"}/>\n                            </div>\n                            <p className={styles.alert}>{passwordError}</p>\n                            <div className={styles.passBlock}>\n                                <input\n                                    className={styles.inputPass}\n                                    placeholder=\"新しいパスワード\"\n                                    type={newPasswordToggle ? \"password\" : \"text\"}\n                                    onChange={changeNewPassword}/>\n                                <input className={styles.passButton} type=\"button\" onClick={toggleNewPassword} value={newPasswordToggle ? \"表示\" : \"非表示\"}/>\n                            </div>\n                            <p className={styles.alert}>{newPasswordError}</p>\n                            <input className={styles.inputButton} type=\"button\" onClick={submitPasswordAfterReAuth} value=\"変更\"/>\n                        </AnimateHeight>\n                    </div>\n                    {/* verifyed block */}\n                    <div className=\"border-b-2 py-4\">\n                        <div className=\"\">\n                            <p className=\"text-center\">メール認証</p>\n                            <p className=\"text-center\">{user.emailVerified ? \"認証済み\" : \"未認証\"}</p>\n                            <p\n                                className=\"text-blue-600 cursor-pointer text-xs text-center\"\n                                onClick={user.emailVerified ? handleNone : submitVerification}\n                                >\n                                    {user.emailVerified ? \"\" : verifyMessage}\n                            </p>\n                        </div>\n                    </div>\n                </div>\n                <div className=\"py-4\">\n                    <p className=\"text-blue-600 cursor-pointer text-center\" onClick={handleSignOut}>ログアウト</p>\n                    <p id=\"delete\" className=\"text-red-600 cursor-pointer text-center\" onClick={changeId}>アカウントを削除する</p>\n                    <AnimateHeight\n                        duration={300}\n                        height={toggleId === \"delete\" ? 'auto' : 0}>\n                        <div>\n                            <input\n                                placeholder=\"現在のパスワード\"\n                                type={passwordToggle ? \"password\" : \"text\"}\n                                onChange={changePassword}/>\n                            <input type=\"button\" onClick={togglePassword} value=\"表示\"/>\n                        </div>\n                        <p className={styles.alert}>{passwordError}</p>\n                        <input type=\"button\" onClick={submitDelete} value=\"削除\"/>\n                    </AnimateHeight>\n                </div>\n            </article>\n            <article className=\"bg-white p-6 mt-6 mb-6\">\n                <div className=\"w-full\">\n                    <h2>参加予定のイベントリスト</h2>\n                    {events ? events.map(event =>\n                            <li key={event.id} className={styles.eventList}>\n                                <div>\n                                    <Link href=\"/posts/[id]\" as={`/posts/${event.id}`}>\n                                        <a>{event.title}</a>\n                                    </Link>\n                                    <p>{event.date}</p>\n                                    <p>{event.place}</p>\n                                    <div className={styles.fee}>\n                                        <p className={styles.mens}>{event.gender == \"man\" ? \"男性\" : \"女性\"}</p>\n                                        <p>1人</p>\n                                        <p>{event.price}円</p>\n                                    </div>\n                                    {cancelId !== event.id ? \n                                        <div>\n                                            <input type=\"button\" value=\"キャンセル\" id={event.id} onClick={displayCancel}/>\n                                        </div>\n                                    :\n                                        <div>\n                                            {cancelErrorId !== event.id ?\n                                                <div>\n                                                    <p>上記のイベントの予約をキャンセルしますがよろしいですか</p>\n                                                    <div>\n                                                        <input type=\"button\" value=\"はい\" onClick={(e) => judgeCancel(event.id, event.date, event.place, event.title, event.gender, event.price, e)}/>\n                                                        <input type=\"button\" value=\"いいえ\" onClick={hideCancel}/>\n                                                    </div>\n                                                </div>\n                                            :\n                                                <div>\n                                                    <p>web上でキャンセル可能な日にちを超えています。</p>\n                                                    <p>お手数ですが以下の電話番号までご連絡ください</p>\n                                                    <p>{phoneNumber}</p>\n                                                </div>\n                                            }\n                                        </div>\n                                    }\n                                </div>\n                            </li>\n                    ) : \"\"}\n                </div>\n                {admin ?\n                    <div className={styles.detailWrapper}>\n                        <h2>イベントリスト</h2>\n                        <ul className={styles.mainWrapper}>\n                            {allPostsData.map(({ id, date, title }) => (\n                                \n                                <li className={styles.eventList} key={`admin${id}`}>\n                                    <h3>{title}</h3>\n                                    <p>{date}</p>\n                                    <p onClick={changeEventId} id={id} className={styles.link}>詳細</p>\n                                    {eventId == id ? \n                                        <div>\n                                            <p>合計人数 {eventMensName.length + eventWomensName.length}人</p>\n                                            <p>男性参加者</p>\n                                            <div className={styles.adminUsers}>\n                                                <div className={styles.adminName}>\n                                                    {eventMensName.map((name) => (\n                                                        <p>{name}</p>\n                                                    ))}\n                                                </div>\n                                                <div className={styles.adminMail}>\n                                                    {eventMensMail.map((mail) => (\n                                                        <p>{mail}</p>\n                                                    ))}\n                                                </div>\n                                            </div>\n                                            <p>女性参加者</p>\n                                            <div className={styles.adminUsers}>\n                                                <div className={styles.adminName}>\n                                                    {eventWomensName.map((name) => (\n                                                        <p>{name}</p>\n                                                    ))}\n                                                </div>\n                                                <div className={styles.adminMail}>\n                                                    {eventWomensMail.map((mail) => (\n                                                        <p>{mail}</p>\n                                                    ))}\n                                                </div>\n                                            </div>\n                                        </div>\n                                    :\n                                    <div></div>}\n                                </li>\n                            ))}\n                        </ul>\n                    </div>\n                :\n                <div></div>\n                }\n            </article>\n        </Layout>\n    )\n}"]},"metadata":{},"sourceType":"module"}