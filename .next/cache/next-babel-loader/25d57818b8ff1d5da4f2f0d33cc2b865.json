{"ast":null,"code":"var _jsxFileName = \"/Users/tkak/sample/villageon/villageon/pages/sign/signin.js\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport Layout from '../../components/layout';\nimport Head from 'next/head';\nimport styles from '../../styles/sign.module.scss';\nimport { useState, useEffect } from 'react';\nimport Link from 'next/link';\nimport Router from 'next/router';\nimport initFirebase from '../../components/initFirebase';\nimport firebase from \"firebase/app\";\nimport 'firebase/auth';\n\nrequire('firebase/auth');\n\ninitFirebase();\nexport default function SignIn() {\n  const {\n    0: mail,\n    1: setMail\n  } = useState([]);\n  const {\n    0: password,\n    1: setPassword\n  } = useState([]);\n  const {\n    0: MailError,\n    1: setMailError\n  } = useState(\"\");\n  const {\n    0: PasswordError,\n    1: setPasswordError\n  } = useState(\"\");\n  const {\n    0: error,\n    1: setError\n  } = useState(\"sample\");\n  const {\n    0: mount,\n    1: setMount\n  } = useState(true);\n  const {\n    0: togglePassword,\n    1: setTogglePassword\n  } = useState(false);\n  useEffect(() => {\n    if (mount) {\n      firebase.auth().onAuthStateChanged(function (user) {\n        if (user) {\n          // User is signed in.\n          if (false) {\n            Router.push(\"/\");\n          }\n        } else {// No user is signed in.\n        }\n      });\n    }\n\n    return function cleanup() {\n      setMount(false);\n    };\n  });\n\n  const changeMail = event => {\n    const mail = event.target.value;\n    setMail(mail);\n  };\n\n  const changePassword = event => {\n    const password = event.target.value;\n    setPassword(password);\n  };\n\n  const handleSubmit = () => {\n    setMailError(\"\");\n    setPasswordError(\"\");\n    firebase.auth().signInWithEmailAndPassword(mail, password).then(function () {\n      Router.push(\"/user/details\");\n    }).catch(function (error) {\n      if (error.code == \"auth/invalid-email\") {\n        setMailError(\"メールアドレスの形式が不正確です\");\n      } else if (error.code == \"auth/user-disabled\") {\n        setMailError(\"ユーザーが無効になっています\");\n      } else if (error.code == \"auth/user-not-found\") {\n        setMailError(\"このメールアドレスは使われていません\");\n      } else if (error.code == \"auth/wrong-password\") {\n        setPasswordError(\"パスワードが間違っています\");\n      }\n    });\n  };\n\n  const togglePasswordDisplay = () => {\n    setTogglePassword(!togglePassword);\n  };\n\n  return __jsx(Layout, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 9\n    }\n  }, __jsx(Head, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 13\n    }\n  }, __jsx(\"title\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 17\n    }\n  }, \"SignIn\")), __jsx(\"article\", {\n    className: styles.signWrapper,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 17\n    }\n  }, __jsx(\"h1\", {\n    className: styles.title,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 21\n    }\n  }, \"\\u30ED\\u30B0\\u30A4\\u30F3\"), __jsx(\"form\", {\n    className: styles.form,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 21\n    }\n  }, __jsx(\"input\", {\n    className: styles.input,\n    type: \"text\",\n    placeholder: \"email\",\n    onChange: changeMail,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 25\n    }\n  }), __jsx(\"p\", {\n    className: styles.alert,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 25\n    }\n  }, MailError), __jsx(\"div\", {\n    className: styles.passBlock,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 25\n    }\n  }, __jsx(\"input\", {\n    className: styles.passInput,\n    type: togglePassword ? \"text\" : \"password\",\n    placeholder: \"\\u30D1\\u30B9\\u30EF\\u30FC\\u30C9\",\n    onChange: changePassword,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 29\n    }\n  }), __jsx(\"input\", {\n    className: styles.passButton,\n    type: \"button\",\n    value: togglePassword ? \"非表示\" : \"表示\",\n    onClick: togglePasswordDisplay,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 29\n    }\n  })), __jsx(\"p\", {\n    className: styles.alert,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 25\n    }\n  }, PasswordError), __jsx(\"input\", {\n    className: styles.checked,\n    type: \"button\",\n    value: \"\\u30ED\\u30B0\\u30A4\\u30F3\",\n    onClick: handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 25\n    }\n  })), __jsx(\"div\", {\n    className: styles.bottom,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 21\n    }\n  }, __jsx(Link, {\n    href: \"/sign/signup\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 25\n    }\n  }, __jsx(\"a\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 29\n    }\n  }, __jsx(\"button\", {\n    className: styles.button,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 32\n    }\n  }, \"\\u30A2\\u30AB\\u30A6\\u30F3\\u30C8\\u3092\\u4F5C\\u6210\\u3059\\u308B\"))))));\n}","map":{"version":3,"sources":["/Users/tkak/sample/villageon/villageon/pages/sign/signin.js"],"names":["Layout","Head","styles","useState","useEffect","Link","Router","initFirebase","firebase","require","SignIn","mail","setMail","password","setPassword","MailError","setMailError","PasswordError","setPasswordError","error","setError","mount","setMount","togglePassword","setTogglePassword","auth","onAuthStateChanged","user","push","cleanup","changeMail","event","target","value","changePassword","handleSubmit","signInWithEmailAndPassword","then","catch","code","togglePasswordDisplay","signWrapper","title","form","input","alert","passBlock","passInput","passButton","checked","bottom","button"],"mappings":"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","sourcesContent":["import Layout from '../../components/layout'\nimport Head from 'next/head'\nimport styles from '../../styles/sign.module.scss'\nimport { useState, useEffect } from 'react'\nimport Link from 'next/link'\nimport Router from 'next/router'\n\nimport initFirebase from '../../components/initFirebase'\nimport firebase from \"firebase/app\"\nimport 'firebase/auth'\nrequire('firebase/auth')\n\ninitFirebase()\n\nexport default function SignIn () {\n    const [mail, setMail] = useState([])\n    const [password, setPassword] = useState([])\n    const [MailError, setMailError] = useState(\"\")\n    const [PasswordError, setPasswordError] = useState(\"\")\n    const [error, setError] = useState(\"sample\")\n    const [mount, setMount] = useState(true)\n    const [togglePassword, setTogglePassword] = useState(false)\n\n    useEffect(() => {\n        if (mount) {\n            firebase.auth().onAuthStateChanged(function(user) {\n                if (user) {\n                    // User is signed in.\n                    if (process.browser) {\n                        Router.push(\"/\")\n                    }\n                } else {\n                    // No user is signed in.\n                }\n            })\n        }\n        return function cleanup() {\n            setMount(false)\n        }\n    })\n\n    const changeMail = event => {\n        const mail = event.target.value\n        setMail(mail)\n    }\n    const changePassword = event => {\n        const password = event.target.value\n        setPassword(password)\n    }\n    const handleSubmit = () => {\n        setMailError(\"\")\n        setPasswordError(\"\")\n        firebase.auth().signInWithEmailAndPassword(mail, password).then(\n            function() {\n                Router.push(\"/user/details\")\n            }).catch(\n            function(error) {\n                if (error.code == \"auth/invalid-email\") {\n                    setMailError(\"メールアドレスの形式が不正確です\")\n                } else if (error.code == \"auth/user-disabled\") {\n                    setMailError(\"ユーザーが無効になっています\")\n                }　else if (error.code == \"auth/user-not-found\") {\n                    setMailError(\"このメールアドレスは使われていません\")\n                }　else if (error.code == \"auth/wrong-password\") {\n                    setPasswordError(\"パスワードが間違っています\")\n                }\n            })\n    }\n\n    const togglePasswordDisplay = () => {\n        setTogglePassword(!togglePassword)\n    }\n\n    return (\n        <Layout>\n            <Head>\n                <title>SignIn</title>\n            </Head>\n                <article className={styles.signWrapper}>\n                    <h1 className={styles.title}>ログイン</h1>\n                    <form className={styles.form}>\n                        <input className={styles.input} type=\"text\" placeholder=\"email\" onChange={changeMail} />\n                        <p className={styles.alert}>{MailError}</p>\n                        <div className={styles.passBlock}>\n                            <input className={styles.passInput} type={togglePassword ? \"text\" : \"password\"} placeholder=\"パスワード\" onChange={changePassword} />\n                            <input className={styles.passButton} type=\"button\" value={togglePassword ? \"非表示\" : \"表示\"} onClick={togglePasswordDisplay}/>\n                        </div>\n                        <p className={styles.alert}>{PasswordError}</p>\n                        <input className={styles.checked} type=\"button\" value=\"ログイン\" onClick={handleSubmit} />\n                    </form>\n                    <div className={styles.bottom}>\n                        <Link href=\"/sign/signup\" >\n                            <a><button className={styles.button}>アカウントを作成する</button></a>\n                        </Link>\n                    </div>\n                </article>\n        </Layout>\n    )\n}"]},"metadata":{},"sourceType":"module"}