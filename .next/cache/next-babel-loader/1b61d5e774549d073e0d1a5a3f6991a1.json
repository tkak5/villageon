{"ast":null,"code":"var _jsxFileName = \"/Users/tkak/sample/villageon/villageon/pages/sign/signin.js\",\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport Layout from '../../components/layout';\nimport Head from 'next/head';\nimport styles from '../../styles/sign.module.scss';\nimport { useState, useEffect } from 'react';\nimport Link from 'next/link';\nimport Router from 'next/router';\nimport initFirebase from '../../components/initFirebase';\nimport firebase from \"firebase/app\";\nimport 'firebase/auth';\n\nrequire('firebase/auth');\n\ninitFirebase();\nexport default function SignIn() {\n  _s();\n\n  var _useState = useState(\"\"),\n      mail = _useState[0],\n      setMail = _useState[1];\n\n  var _useState2 = useState(\"\"),\n      password = _useState2[0],\n      setPassword = _useState2[1];\n\n  var _useState3 = useState(\"\"),\n      mailError = _useState3[0],\n      setMailError = _useState3[1];\n\n  var _useState4 = useState(\"\"),\n      passwordError = _useState4[0],\n      setPasswordError = _useState4[1];\n\n  var _useState5 = useState(true),\n      mount = _useState5[0],\n      setMount = _useState5[1];\n\n  var _useState6 = useState(false),\n      togglePassword = _useState6[0],\n      setTogglePassword = _useState6[1];\n\n  useEffect(function () {\n    if (mount) {\n      firebase.auth().onAuthStateChanged(function (user) {\n        if (user) {\n          // User is signed in.\n          if (true) {\n            Router.push(\"/\");\n          }\n        } else {// No user is signed in.\n        }\n      });\n    }\n\n    return function cleanup() {\n      setMount(false);\n    };\n  });\n\n  var changeMail = function changeMail(event) {\n    var mail = event.target.value;\n    setMail(mail);\n  };\n\n  var changePassword = function changePassword(event) {\n    var password = event.target.value;\n    setPassword(password);\n  };\n\n  var handleSubmit = function handleSubmit() {\n    setMailError(\"\");\n    setPasswordError(\"\");\n\n    if (!mail) {\n      setMailError(\"入力してください\");\n    }\n\n    if (!password) {\n      setPasswordError(\"入力してください\");\n    }\n\n    if (mail && password) {\n      firebase.auth().signInWithEmailAndPassword(mail, password).then(function () {\n        Router.push(\"/user/details\");\n      })[\"catch\"](function (error) {\n        if (error.code == \"auth/invalid-email\") {\n          setMailError(\"メールアドレスの形式が不正確です\");\n        } else if (error.code == \"auth/user-disabled\") {\n          setMailError(\"ユーザーが無効になっています\");\n        } else if (error.code == \"auth/user-not-found\") {\n          setMailError(\"このメールアドレスは使われていません\");\n        } else if (error.code == \"auth/wrong-password\") {\n          setPasswordError(\"パスワードが間違っています\");\n        }\n      });\n    }\n  };\n\n  var togglePasswordDisplay = function togglePasswordDisplay() {\n    setTogglePassword(!togglePassword);\n  };\n\n  return __jsx(Layout, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 9\n    }\n  }, __jsx(Head, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 13\n    }\n  }, __jsx(\"title\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 17\n    }\n  }, \"SignIn\")), __jsx(\"article\", {\n    className: \" flex flex-col justify-center items-center bg-white w-full my-6 p-6 sm:max-w-xs\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 17\n    }\n  }, __jsx(\"h1\", {\n    className: \"text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 21\n    }\n  }, \"\\u30ED\\u30B0\\u30A4\\u30F3\"), __jsx(\"input\", {\n    className: \"border-solid border-2 rounded p-2 w-full outline-none max-w-sm my-1\",\n    type: \"text\",\n    placeholder: \"email\",\n    onChange: changeMail,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 21\n    }\n  }), __jsx(\"p\", {\n    className: \"text-red-600\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 21\n    }\n  }, mailError), __jsx(\"div\", {\n    className: \"border-solid border-2 rounded p-2 w-full flex max-w-sm my-1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 21\n    }\n  }, __jsx(\"input\", {\n    className: \"w-4/5 outline-none\",\n    type: togglePassword ? \"text\" : \"password\",\n    placeholder: \"\\u30D1\\u30B9\\u30EF\\u30FC\\u30C9\",\n    onChange: changePassword,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 25\n    }\n  }), __jsx(\"input\", {\n    className: \"w-1/5 outline-none bg-white opacity-50\",\n    type: \"button\",\n    value: togglePassword ? \"非表示\" : \"表示\",\n    onClick: togglePasswordDisplay,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 25\n    }\n  })), __jsx(\"p\", {\n    className: \"text-red-600\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 21\n    }\n  }, passwordError), __jsx(\"input\", {\n    className: \"border-solid border-2 rounded p-2 mt-1 bg-blue-200\\u3000outline-none my-1\",\n    type: \"button\",\n    value: \"\\u30ED\\u30B0\\u30A4\\u30F3\",\n    onClick: handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 21\n    }\n  }), __jsx(\"div\", {\n    className: \"flex justify-center items-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 21\n    }\n  }, __jsx(Link, {\n    href: \"/sign/signup\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 25\n    }\n  }, __jsx(\"a\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 29\n    }\n  }, __jsx(\"button\", {\n    className: \"border-solid border-2 rounded p-2 mt-1 bg-blue-200\\u3000outline-none my-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 32\n    }\n  }, \"\\u30A2\\u30AB\\u30A6\\u30F3\\u30C8\\u3092\\u4F5C\\u6210\\u3059\\u308B\"))))));\n}\n\n_s(SignIn, \"vDxblZAKwbOMd5pd0Kvb0AwEThM=\");\n\n_c = SignIn;\n\nvar _c;\n\n$RefreshReg$(_c, \"SignIn\");","map":{"version":3,"sources":["/Users/tkak/sample/villageon/villageon/pages/sign/signin.js"],"names":["Layout","Head","styles","useState","useEffect","Link","Router","initFirebase","firebase","require","SignIn","mail","setMail","password","setPassword","mailError","setMailError","passwordError","setPasswordError","mount","setMount","togglePassword","setTogglePassword","auth","onAuthStateChanged","user","push","cleanup","changeMail","event","target","value","changePassword","handleSubmit","signInWithEmailAndPassword","then","error","code","togglePasswordDisplay"],"mappings":"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","sourcesContent":["import Layout from '../../components/layout'\nimport Head from 'next/head'\nimport styles from '../../styles/sign.module.scss'\nimport { useState, useEffect } from 'react'\nimport Link from 'next/link'\nimport Router from 'next/router'\n\nimport initFirebase from '../../components/initFirebase'\nimport firebase from \"firebase/app\"\nimport 'firebase/auth'\nrequire('firebase/auth')\n\ninitFirebase()\n\nexport default function SignIn () {\n    const [mail, setMail] = useState(\"\")\n    const [password, setPassword] = useState(\"\")\n    const [mailError, setMailError] = useState(\"\")\n    const [passwordError, setPasswordError] = useState(\"\")\n    const [mount, setMount] = useState(true)\n    const [togglePassword, setTogglePassword] = useState(false)\n\n    useEffect(() => {\n        if (mount) {\n            firebase.auth().onAuthStateChanged(function(user) {\n                if (user) {\n                    // User is signed in.\n                    if (process.browser) {\n                        Router.push(\"/\")\n                    }\n                } else {\n                    // No user is signed in.\n                }\n            })\n        }\n        return function cleanup() {\n            setMount(false)\n        }\n    })\n\n    const changeMail = event => {\n        const mail = event.target.value\n        setMail(mail)\n    }\n    const changePassword = event => {\n        const password = event.target.value\n        setPassword(password)\n    }\n    const handleSubmit = () => {\n        setMailError(\"\")\n        setPasswordError(\"\")\n        if (!mail) {\n            setMailError(\"入力してください\")\n        }\n        if (!password) {\n            setPasswordError(\"入力してください\")\n        }\n        if (mail && password) {\n            firebase.auth().signInWithEmailAndPassword(mail, password).then(function() {\n                Router.push(\"/user/details\")\n            }).catch(function(error) {\n                if (error.code == \"auth/invalid-email\") {\n                    setMailError(\"メールアドレスの形式が不正確です\")\n                } else if (error.code == \"auth/user-disabled\") {\n                    setMailError(\"ユーザーが無効になっています\")\n                }　else if (error.code == \"auth/user-not-found\") {\n                    setMailError(\"このメールアドレスは使われていません\")\n                }　else if (error.code == \"auth/wrong-password\") {\n                    setPasswordError(\"パスワードが間違っています\")\n                }\n            })\n        }\n    }\n\n    const togglePasswordDisplay = () => {\n        setTogglePassword(!togglePassword)\n    }\n\n    return (\n        <Layout>\n            <Head>\n                <title>SignIn</title>\n            </Head>\n                <article className=\"\n                    flex flex-col justify-center items-center bg-white w-full my-6 p-6\n                    sm:max-w-xs\">\n                    <h1 className=\"text-center\">ログイン</h1>\n                    <input className=\"border-solid border-2 rounded p-2 w-full outline-none max-w-sm my-1\" type=\"text\" placeholder=\"email\" onChange={changeMail} />\n                    <p className=\"text-red-600\">{mailError}</p>\n                    <div className=\"border-solid border-2 rounded p-2 w-full flex max-w-sm my-1\">\n                        <input className=\"w-4/5 outline-none\" type={togglePassword ? \"text\" : \"password\"} placeholder=\"パスワード\" onChange={changePassword} />\n                        <input className=\"w-1/5 outline-none bg-white opacity-50\" type=\"button\" value={togglePassword ? \"非表示\" : \"表示\"} onClick={togglePasswordDisplay}/>\n                    </div>\n                    <p className=\"text-red-600\">{passwordError}</p>\n                    <input className=\"border-solid border-2 rounded p-2 mt-1 bg-blue-200　outline-none my-1\" type=\"button\" value=\"ログイン\" onClick={handleSubmit} />\n                    <div className=\"flex justify-center items-center\">\n                        <Link href=\"/sign/signup\" >\n                            <a><button className=\"border-solid border-2 rounded p-2 mt-1 bg-blue-200　outline-none my-2\">アカウントを作成する</button></a>\n                        </Link>\n                    </div>\n                </article>\n        </Layout>\n    )\n}"]},"metadata":{},"sourceType":"module"}