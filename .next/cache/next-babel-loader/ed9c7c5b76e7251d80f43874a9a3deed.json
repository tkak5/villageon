{"ast":null,"code":"var _jsxFileName = \"/Users/tkak/sample/next5/villageon/pages/sign/verification.js\",\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport Layout from '../../components/layout';\nimport Head from 'next/head';\nimport styles from '../../styles/sign.module.scss';\nimport { useState, useEffect } from 'react';\nimport Link from 'next/link';\nimport Router from 'next/router';\nimport initFirebase from '../../components/initFirebase';\nimport firebase from \"firebase/app\";\nimport 'firebase/auth';\n\nrequire('firebase/auth');\n\nrequire(\"firebase/firestore\");\n\ninitFirebase();\nvar db = firebase.firestore();\nexport default function verification() {\n  _s();\n\n  var _useState = useState(\"\"),\n      user = _useState[0],\n      setUser = _useState[1];\n\n  var _useState2 = useState(true),\n      mount = _useState2[0],\n      setMount = _useState2[1];\n\n  var _useState3 = useState(false),\n      verification = _useState3[0],\n      setVerification = _useState3[1];\n\n  useEffect(function () {\n    if (mount) {\n      firebase.auth().onAuthStateChanged(function (user) {\n        if (user) {\n          // User is signed in.\n          setUser(user);\n        } else {// No user is signed in.\n        }\n      });\n    }\n\n    return function cleanup() {\n      setMount(false);\n    };\n  });\n\n  var submitVerification = function submitVerification() {\n    var actionCodeSettings = {\n      url: \"http://localhost:3000/user/details\"\n    };\n    user.sendEmailVerification(actionCodeSettings).then(function () {\n      setVerification(true);\n    })[\"catch\"](function (error) {});\n  };\n\n  return __jsx(Layout, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 9\n    }\n  }, __jsx(Head, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 13\n    }\n  }, __jsx(\"title\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 17\n    }\n  }, \"verification\")), __jsx(\"article\", {\n    className: styles.signWrapper,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 13\n    }\n  }, __jsx(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 17\n    }\n  }, \"\\u3054\\u767B\\u9332\\u9802\\u3044\\u305F\\u30E1\\u30FC\\u30EB\\u30A2\\u30C9\\u30EC\\u30B9\\u306B\\u78BA\\u8A8D\\u30E1\\u30FC\\u30EB\\u3092\\u9001\\u308A\\u307E\\u3057\\u305F\\u3002\"), __jsx(\"p\", {\n    className: styles.alert,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 17\n    }\n  }, \"\\u3053\\u3061\\u3089\\u306E\\u30E1\\u30FC\\u30EB\\u304B\\u3089\\u6539\\u3081\\u3066\\u30ED\\u30B0\\u30A4\\u30F3\\u3059\\u308B\\u3053\\u3068\\u3067\\u3054\\u4E88\\u7D04\\u304C\\u53EF\\u80FD\\u3068\\u306A\\u308A\\u307E\\u3059\\u3002\"), __jsx(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 17\n    }\n  }, \"\\u3057\\u3070\\u3089\\u304F\\u3057\\u3066\\u3082\\u30E1\\u30FC\\u30EB\\u304C\\u5C4A\\u304B\\u306A\\u3044\\u5834\\u5408\\u306F\\u4EE5\\u4E0B\\u306E\\u30DC\\u30BF\\u30F3\\u3092\\u30AF\\u30EA\\u30C3\\u30AF\\u3057\\u3066\\u304F\\u3060\\u3055\\u3044\\u3002\"), __jsx(\"input\", {\n    type: \"button\",\n    value: verification ? \"送信しました\" : \"再送信\",\n    onClick: verification ? \"\" : submitVerification,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 17\n    }\n  })));\n}\n\n_s(verification, \"XPtwuPDS8FuGncS2pcV1hq1LXdk=\");","map":{"version":3,"sources":["/Users/tkak/sample/next5/villageon/pages/sign/verification.js"],"names":["Layout","Head","styles","useState","useEffect","Link","Router","initFirebase","firebase","require","db","firestore","verification","user","setUser","mount","setMount","setVerification","auth","onAuthStateChanged","cleanup","submitVerification","actionCodeSettings","url","sendEmailVerification","then","error","signWrapper","alert"],"mappings":";;;;;AAAA,OAAOA,MAAP,MAAmB,yBAAnB;AACA,OAAOC,IAAP,MAAiB,WAAjB;AACA,OAAOC,MAAP,MAAmB,+BAAnB;AACA,SAASC,QAAT,EAAmBC,SAAnB,QAAoC,OAApC;AACA,OAAOC,IAAP,MAAiB,WAAjB;AACA,OAAOC,MAAP,MAAmB,aAAnB;AAEA,OAAOC,YAAP,MAAyB,+BAAzB;AACA,OAAOC,QAAP,MAAqB,cAArB;AACA,OAAO,eAAP;;AACAC,OAAO,CAAC,eAAD,CAAP;;AACAA,OAAO,CAAC,oBAAD,CAAP;;AAEAF,YAAY;AACZ,IAAIG,EAAE,GAAGF,QAAQ,CAACG,SAAT,EAAT;AAEA,eAAe,SAASC,YAAT,GAAwB;AAAA;;AAAA,kBACXT,QAAQ,CAAC,EAAD,CADG;AAAA,MAC5BU,IAD4B;AAAA,MACtBC,OADsB;;AAAA,mBAETX,QAAQ,CAAC,IAAD,CAFC;AAAA,MAE5BY,KAF4B;AAAA,MAErBC,QAFqB;;AAAA,mBAGKb,QAAQ,CAAC,KAAD,CAHb;AAAA,MAG5BS,YAH4B;AAAA,MAGdK,eAHc;;AAKnCb,EAAAA,SAAS,CAAC,YAAM;AACZ,QAAIW,KAAJ,EAAW;AACPP,MAAAA,QAAQ,CAACU,IAAT,GAAgBC,kBAAhB,CAAmC,UAASN,IAAT,EAAe;AAC9C,YAAIA,IAAJ,EAAU;AACN;AACAC,UAAAA,OAAO,CAACD,IAAD,CAAP;AACH,SAHD,MAGO,CACH;AACH;AACJ,OAPD;AAQH;;AACD,WAAO,SAASO,OAAT,GAAmB;AACtBJ,MAAAA,QAAQ,CAAC,KAAD,CAAR;AACH,KAFD;AAGH,GAdQ,CAAT;;AAgBA,MAAMK,kBAAkB,GAAG,SAArBA,kBAAqB,GAAM;AAC7B,QAAIC,kBAAkB,GAAG;AACrBC,MAAAA,GAAG,EAAE;AADgB,KAAzB;AAGAV,IAAAA,IAAI,CAACW,qBAAL,CAA2BF,kBAA3B,EAA+CG,IAA/C,CAAoD,YAAW;AAC3DR,MAAAA,eAAe,CAAC,IAAD,CAAf;AACH,KAFD,WAES,UAASS,KAAT,EAAgB,CACxB,CAHD;AAIH,GARD;;AAWA,SACI,MAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI,MAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADJ,CADJ,EAII;AAAS,IAAA,SAAS,EAAExB,MAAM,CAACyB,WAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oKADJ,EAEI;AAAG,IAAA,SAAS,EAAEzB,MAAM,CAAC0B,KAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8MAFJ,EAGI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gOAHJ,EAII;AAAO,IAAA,IAAI,EAAC,QAAZ;AAAqB,IAAA,KAAK,EAAEhB,YAAY,GAAG,QAAH,GAAc,KAAtD;AAA6D,IAAA,OAAO,EAAEA,YAAY,GAAG,EAAH,GAAQS,kBAA1F;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAJJ,CAJJ,CADJ;AAaH;;GA7CuBT,Y","sourcesContent":["import Layout from '../../components/layout'\nimport Head from 'next/head'\nimport styles from '../../styles/sign.module.scss'\nimport { useState, useEffect } from 'react'\nimport Link from 'next/link'\nimport Router from 'next/router'\n\nimport initFirebase from '../../components/initFirebase'\nimport firebase from \"firebase/app\"\nimport 'firebase/auth'\nrequire('firebase/auth')\nrequire(\"firebase/firestore\")\n\ninitFirebase()\nvar db = firebase.firestore()\n\nexport default function verification() {\n    const [user, setUser] = useState(\"\")\n    const [mount, setMount] = useState(true)\n    const [verification, setVerification] = useState(false)\n\n    useEffect(() => {\n        if (mount) {\n            firebase.auth().onAuthStateChanged(function(user) {\n                if (user) {\n                    // User is signed in.\n                    setUser(user)\n                } else {\n                    // No user is signed in.\n                }\n            })\n        }\n        return function cleanup() {\n            setMount(false)\n        }\n    })\n\n    const submitVerification = ()　=> {\n        var actionCodeSettings = {\n            url: \"http://localhost:3000/user/details\",\n        }\n        user.sendEmailVerification(actionCodeSettings).then(function() {\n            setVerification(true)\n        }).catch(function(error) {\n        })\n    }\n\n\n    return (\n        <Layout>\n            <Head>\n                <title>verification</title>\n            </Head>\n            <article className={styles.signWrapper}>\n                <h2>ご登録頂いたメールアドレスに確認メールを送りました。</h2>\n                <p className={styles.alert}>こちらのメールから改めてログインすることでご予約が可能となります。</p>\n                <p>しばらくしてもメールが届かない場合は以下のボタンをクリックしてください。</p>\n                <input type=\"button\" value={verification ? \"送信しました\" : \"再送信\"} onClick={verification ? \"\" : submitVerification}/>\n            </article>\n        </Layout>\n    )\n}"]},"metadata":{},"sourceType":"module"}